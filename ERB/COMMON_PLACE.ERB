
;-------------------------------------------------
;関数名:IN_ROOM
;部屋の中で特定要素での最低・最高を持つキャラを取得
;ARGS MAXかMINかを選択
;ARG 部屋の番号
;ARGS:1 対象となる変数の名前
;ARG:1 変数の番号
;-------------------------------------------------
@IN_ROOM, ARGS, ARG, ARGS:1, ARG:1
#FUNCTION
VARSET LOCAL, 0
SELECTCASE ARGS:1
	CASE "CFLAG"
		FOR LOCAL, 1, CHARANUM
			SIF CFLAG:LOCAL:現在マップ種別 != CFLAG:PLAYER:現在マップ種別
				CONTINUE
			SIF CFLAG:LOCAL:現在位置 != ARG
				CONTINUE
			IF LOCAL:3++ == 0
				LOCAL:1 = CFLAG:LOCAL:(ARG:1)
				LOCAL:2 = LOCAL
			ELSEIF ARGS == "MAX" && LOCAL:1 < CFLAG:LOCAL:(ARG:1)
				LOCAL:1 = CFLAG:LOCAL:(ARG:1)
				LOCAL:2 = LOCAL
			ELSEIF ARGS == "MIN" && LOCAL:1 > CFLAG:LOCAL:(ARG:1)
				LOCAL:1 = CFLAG:LOCAL:(ARG:1)
				LOCAL:2 = LOCAL
			ELSEIF LOCAL:1 == CFLAG:LOCAL:(ARG:1) && RAND:2
				LOCAL:1 = CFLAG:LOCAL:(ARG:1)
				LOCAL:2 = LOCAL
			ENDIF
		NEXT
		RETURNF LOCAL:2
	CASE "TCVAR"
		FOR LOCAL, 1, CHARANUM
			SIF CFLAG:LOCAL:現在マップ種別 != CFLAG:PLAYER:現在マップ種別
				CONTINUE
			SIF CFLAG:LOCAL:現在位置 != ARG
				CONTINUE
			IF LOCAL:3++ == 0
				LOCAL:1 = TCVAR:LOCAL:(ARG:1)
				LOCAL:2 = LOCAL
			ELSEIF ARGS == "MAX" && LOCAL:1 < TCVAR:LOCAL:(ARG:1)
				LOCAL:1 = TCVAR:LOCAL:(ARG:1)
				LOCAL:2 = LOCAL
			ELSEIF ARGS == "MIN" && LOCAL:1 > TCVAR:LOCAL:(ARG:1)
				LOCAL:1 = TCVAR:LOCAL:(ARG:1)
				LOCAL:2 = LOCAL
			ELSEIF LOCAL:1 == TCVAR:LOCAL:(ARG:1) && RAND:2
				LOCAL:1 = TCVAR:LOCAL:(ARG:1)
				LOCAL:2 = LOCAL
			ENDIF
		NEXT
		RETURNF LOCAL:2
	CASE "ABL"
		FOR LOCAL, 1, CHARANUM
			SIF CFLAG:LOCAL:現在マップ種別 != CFLAG:PLAYER:現在マップ種別
				CONTINUE
			SIF CFLAG:LOCAL:現在位置 != ARG
				CONTINUE
			IF LOCAL:3++ == 0
				LOCAL:1 = ABL:LOCAL:(ARG:1)
				LOCAL:2 = LOCAL
			ELSEIF ARGS == "MAX" && LOCAL:1 < ABL:LOCAL:(ARG:1)
				LOCAL:1 = ABL:LOCAL:(ARG:1)
				LOCAL:2 = LOCAL
			ELSEIF ARGS == "MIN" && LOCAL:1 > ABL:LOCAL:(ARG:1)
				LOCAL:1 = ABL:LOCAL:(ARG:1)
				LOCAL:2 = LOCAL
			ELSEIF LOCAL:1 == ABL:LOCAL:(ARG:1) && RAND:2
				LOCAL:1 = ABL:LOCAL:(ARG:1)
				LOCAL:2 = LOCAL
			ENDIF
		NEXT
		RETURNF LOCAL:2
	CASE "TALENT"
		FOR LOCAL, 1, CHARANUM
			SIF CFLAG:LOCAL:現在マップ種別 != CFLAG:PLAYER:現在マップ種別
				CONTINUE
			SIF CFLAG:LOCAL:現在位置 != ARG
				CONTINUE
			IF LOCAL:3++ == 0
				LOCAL:1 = TALENT:LOCAL:(ARG:1)
				LOCAL:2 = LOCAL
			ELSEIF ARGS == "MAX" && LOCAL:1 < TALENT:LOCAL:(ARG:1)
				LOCAL:1 = TALENT:LOCAL:(ARG:1)
				LOCAL:2 = LOCAL
			ELSEIF ARGS == "MIN" && LOCAL:1 > TALENT:LOCAL:(ARG:1)
				LOCAL:1 = TALENT:LOCAL:(ARG:1)
				LOCAL:2 = LOCAL
			ELSEIF LOCAL:1 == TALENT:LOCAL:(ARG:1) && RAND:2
				LOCAL:1 = TALENT:LOCAL:(ARG:1)
				LOCAL:2 = LOCAL
			ENDIF
		NEXT
		RETURNF LOCAL:2
ENDSELECT


@MAXROOM()
#FUNCTION
RETURNF 16

;ベッドがある部屋
@BEDROOM(ARG:1, ARG)
#FUNCTION
SELECTCASE ARG:1
	CASE 0
		SELECTCASE ARG
			CASE 20
				RETURNF 1
			CASE 9,10,11,12,15
				;プレイマット
				SIF ITEM:20
					RETURNF 1
		ENDSELECT
	CASE 999
		RETURNF 1
ENDSELECT


;お風呂がある部屋
@BATHROOM(ARG:1, ARG)
#FUNCTION
SELECTCASE ARG:1
	CASE 0
		SELECTCASE ARG
			CASE 9, 10, 11, 12
				RETURNF 1
		ENDSELECT
ENDSELECT

;水着になる部屋
@SWIMROOM(ARG:1, ARG)
#FUNCTION
SELECTCASE ARG:1
	CASE 0
		SELECTCASE ARG
			CASE 13, 14, 15, 1503, 1504, 1505, 1506
				RETURNF 1
		ENDSELECT
ENDSELECT

;厨房がある部屋
@KITCHEN(ARG:1, ARG)
#FUNCTION
SELECTCASE ARG:1
	CASE 0
		SELECTCASE ARG
			CASE 4,20
				RETURNF 1
		ENDSELECT
ENDSELECT

;見通しがいい場所
;戻り値2 野外プレイ 1室内
@OPENPLACE(ARG:1, ARG)
#FUNCTION
SELECTCASE ARG:1
	CASE 0
		SELECTCASE ARG
			;庭、玄関
			CASE 1, 3, 303, 304, 305, 307, 1503, 1504, 1505, 1506
				RETURNF 2
			;ロビー,廊下,プール
			CASE 2,6,15
				RETURNF 1
		ENDSELECT
ENDSELECT
