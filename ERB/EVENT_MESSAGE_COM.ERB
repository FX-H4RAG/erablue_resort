;調教時テキスト
@TRAIN_MESSAGE
DRAWLINE
RESULT = 1
IF RFLAG:サイドボタン操作
ELSEIF TFLAG:オートコマンドフラグ >= 3000
	LOCAL = TARGET
	TARGET = PLAYER
	PLAYER = AUTOCOM_相手番号保存
	IF AUTOCOM_派生保存 != ""
		LOCALS = _S{TFLAG:オートコマンドフラグ - 3000}_%AUTOCOM_派生保存%
	ELSE
		LOCALS = {TFLAG:オートコマンドフラグ - 3000}
	ENDIF
	TRYCCALLFORM MESSAGE_COM%LOCALS%
		RETURN 1
	CATCH
	ENDCATCH
	PLAYER = TARGET
	TARGET = LOCAL
ELSEIF TFLAG:オートコマンドフラグ > 2000
	TRYCCALLFORM MESSAGE_ALLAUTOCOM{TFLAG:オートコマンドフラグ - 2000}
		RETURN 1
	CATCH
	ENDCATCH
ELSEIF TFLAG:オートコマンドフラグ > 1000
	TRYCCALLFORM MESSAGE_AUTOCOM{TFLAG:オートコマンドフラグ - 1000}
		RETURN 1
	CATCH
	ENDCATCH
ELSEIF TFLAG:オートコマンドフラグ > 0
	TRYCCALLFORM MESSAGE_PRE_AUTOCOM{TFLAG:オートコマンドフラグ}
		RETURN 1
	CATCH
	ENDCATCH
ELSEIF TFLAG:オートコマンドフラグ == -1
	;自宅訪問時は個別メッセージなし
ELSEIF SELECTCOM_S != ""
	TRYCCALLFORM MESSAGE_COM_S%SELECTCOM_S%
		RETURN 1
	CATCH
	ENDCATCH
ELSE
	TRYCCALLFORM MESSAGE_COM{SELECTCOM}
		RETURN 1
	CATCH
	ENDCATCH
ENDIF

RETURN 0

@TRAIN_MESSAGE_非口上時
RESULT = 1

IF RFLAG:サイドボタン操作
ELSEIF TFLAG:オートコマンドフラグ >= 3000
	LOCAL = TARGET
	TARGET = PLAYER
	PLAYER = AUTOCOM_相手番号保存
	IF AUTOCOM_派生保存 != ""
		LOCALS = _S{TFLAG:オートコマンドフラグ - 3000}_%AUTOCOM_派生保存%
	ELSE
		LOCALS = {TFLAG:オートコマンドフラグ - 3000}
	ENDIF
	TRYCCALLFORM MESSAGE_COM%LOCALS%_非口上時
		PLAYER = TARGET
		TARGET = LOCAL
		RETURN 1
	CATCH
		PLAYER = TARGET
		TARGET = LOCAL
	ENDCATCH
ELSEIF TFLAG:オートコマンドフラグ > 2000
	TRYCCALLFORM MESSAGE_ALLAUTOCOM{TFLAG:オートコマンドフラグ - 2000}_非口上時
		RETURN 1
	CATCH
	ENDCATCH
ELSEIF TFLAG:オートコマンドフラグ > 1000
	TRYCCALLFORM MESSAGE_AUTOCOM{TFLAG:オートコマンドフラグ - 1000}_非口上時
		RETURN 1
	CATCH
	ENDCATCH
ELSEIF TFLAG:オートコマンドフラグ > 0
	TRYCCALLFORM MESSAGE_PRE_AUTOCOM{TFLAG:オートコマンドフラグ}_非口上時
		RETURN 1
	CATCH
	ENDCATCH
ELSEIF TFLAG:オートコマンドフラグ == -1
	;自宅訪問時は表示なし
ELSEIF SELECTCOM_S != ""
	TRYCCALLFORM MESSAGE_COM_S%SELECTCOM_S%_非口上時
		RETURN 1
	CATCH
	ENDCATCH
ELSE
	TRYCCALLFORM MESSAGE_COM{SELECTCOM}_非口上時
		RETURN 1
	CATCH
	ENDCATCH
ENDIF

RETURN 0
