@CALL_COM(ARG)

RESULT = 0
TCVAR:ARG:弱点コマンドフラグ = 0
弱点コマンドカテゴリ = 
IF RSTR:SELECTCOM_S受け渡し != ""
	IF TCVAR:TARGET:食いしばりフラグ
	ELSEIF TARGET == MASTER
		TARGET = PLAYER
		PLAYER = MASTER
		RFLAG:指示モード対象あなたフラグ = 1
		TRYCALLFORM CAN_COM_S%RSTR:SELECTCOM_S受け渡し%
		RFLAG:指示モード対象あなたフラグ = 0
		PLAYER = TARGET
		TARGET = MASTER
	ELSE
		TRYCALLFORM CAN_COM_S%RSTR:SELECTCOM_S受け渡し%
	ENDIF
	TRYCALLFORMF COMTYPE_S_%RSTR:SELECTCOM_S受け渡し%
	TRYCALLFORM COM_S%RSTR:SELECTCOM_S受け渡し%
	LOCAL:1 = RESULT
	IF LOCAL:1 >= 0
		LOCALS = %RSTR:SELECTCOM_S受け渡し%
		IF STRFIND(弱点コマンドカテゴリ, "リダイレクト") >= 0
			LOCALS = %SUBSTRING(弱点コマンドカテゴリ, 12)%
		ENDIF
		; IF 弱点コマンドカテゴリ != ""
			FOR LOCAL, 0, 50
				IF 弱点コマンド枠:ARG:LOCAL == LOCALS
					TCVAR:ARG:弱点コマンドフラグ = 1
					SIF 弱点看破:ARG:LOCAL == 0
						弱点看破:ARG:LOCAL = 1
				ENDIF
			NEXT
		; ENDIF
	ENDIF
	SPLIT RSTR:SELECTCOM_S受け渡し, "_", RESULTS
	RETURN LOCAL:1
ELSE
	IF TCVAR:TARGET:食いしばりフラグ
	ELSEIF TARGET == MASTER
		TARGET = PLAYER
		PLAYER = MASTER
		RFLAG:指示モード対象あなたフラグ = 1
		TRYCALLFORM CAN_COM{SELECTCOM}
		RFLAG:指示モード対象あなたフラグ = 0
		PLAYER = TARGET
		TARGET = MASTER
	ELSE
		TRYCALLFORM CAN_COM{SELECTCOM}
	ENDIF
	TRYCALLFORMF COMTYPE_{SELECTCOM}
	TRYCALLFORM COM{SELECTCOM}
	LOCAL:1 = RESULT
	IF LOCAL:1 >= 0
		SELECTCASE SELECTCOM
			CASE 370 TO 374
				LOCALS = {SELECTCOM}_{NO:ARG}
			CASE 380 TO 384
				LOCALS = {SELECTCOM}_{CFLAG:MASTER:現在マップ種別}_{CFLAG:MASTER:現在位置}
			CASE 385 TO 389
				LOCALS = {SELECTCOM}_%開催予定祭り名%
			CASEELSE
				LOCALS = {SELECTCOM}
		ENDSELECT
		; IF STRFIND(弱点コマンドカテゴリ, "リダイレクト") >= 0
		; 	LOCALS = %SUBSTRING(弱点コマンドカテゴリ, 12)%
		; ENDIF
		; IF 弱点コマンドカテゴリ != ""
			FOR LOCAL, 0, 50
				IF 弱点コマンド枠:ARG:LOCAL == LOCALS
					TCVAR:ARG:弱点コマンドフラグ = 1
					SIF 弱点看破:ARG:LOCAL == 0
						弱点看破:ARG:LOCAL = 1
				ENDIF
			NEXT
		; ENDIF
	ENDIF
	RETURN LOCAL:1
ENDIF


