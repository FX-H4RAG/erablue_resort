@自室キャラ訪問処理
#DIM 訪問候補者, 1000
#DIM キャラ番号
#DIM 訪問キャラ番号
#DIM 候補番号
;休憩時、キャラが自室に遊びに来る処理

;候補者リスト作成
候補番号 = 0
FOR キャラ番号, 1, CHARANUM
	;島にいる
	SIF CFLAG:キャラ番号:滞在期間 < 1
		CONTINUE
	;好感度が一定以上か、従業員のどちらか
	SIF CFLAG:キャラ番号:好感度レベル < 関係閾値:2 && !TALENT:キャラ番号:従業員
		CONTINUE
	訪問候補者:候補番号 = キャラ番号
	候補番号 += 1
	IF TALENT:キャラ番号:セフレ
		;セフレは確率２倍
		訪問候補者:候補番号 = キャラ番号
		候補番号 += 1
	ELSEIF TALENT:キャラ番号:恋慕
		;恋慕は確率３倍
		訪問候補者:候補番号 = キャラ番号
		候補番号 += 1
		訪問候補者:候補番号 = キャラ番号
		候補番号 += 1
	ENDIF
NEXT

;一人も候補がいないなら戻る
SIF 候補番号 == 0
	BREAK

;訪問キャラ決定
訪問キャラ番号 = 訪問候補者:(RAND:候補番号)

;訪問処理

