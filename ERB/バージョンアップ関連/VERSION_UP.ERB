;変数の書き換えなどを伴なうバージョンアップ用
@VERSION_UP

@バージョンアップ準備処理
PRINTL erablue_resort バージョンアップアシスタントです(開発者用)
PRINTL バージョンアップの準備を行いますか？
PRINTBUTTONLC "[0]はい", 0
PRINTBUTTONLC "[1]いいえ", 1

BINPUT
SIF RESULT == 1
	RETURN

CALL VERUP用ファイル生成(GAMEBASE_VERSION + 1)

PRINTFORML ./CSV/GameBase.csv の"バージョン,{GAMEBASE_VERSION}"を"バージョン,{GAMEBASE_VERSION+1}"に
PRINTFORML "バージョン違い認める,{GAMEBASE_ALLOWVERSION}"を"バージョン違い認める,{GAMEBASE_VERSION-1}"に書き換えてください
PRINTL 
PRINTFORML ./ERB_EDITFILE/VERUP_{GAMEBASE_VERSION+1}.ERB を ./ERB/バージョンアップ関連/ に置き、
PRINTFORML 代わりに ./ERB/バージョンアップ関連/VERUP_{GAMEBASE_VERSION-2}.ERB を削除してください
PRINTL 内部で使用されているフォロー変数の定義も適宜削除してください
WAIT

CLEARLINE LINECOUNT
RETURN 0

@VERUP用ファイル生成(バージョン)
#DIM バージョン

REDRAW 0
CLEARLINE LINECOUNT

PRINTFORML ;Ver%TOSTR(バージョン, "0,.000")%と旧バージョンとの互換のための処理
PRINTFORML ;Ver%TOSTR(バージョン+3, "0,.000")%にしたとき消す、互換を{バージョン+1}に
PRINTL 
PRINTL ;追加TALENT、追加CSTRのチェック
PRINTFORML @VERUP_{バージョン}_CHARA(ARG)
PRINTL 
PRINTL ;その他広域変数の書き換えなど
PRINTFORML @VERUP_{バージョン}()
PRINTL 

OUTPUTLOG @"ERB_EDITFILE/VERUP_{バージョン}.ERB"
CLEARLINE LINECOUNT
REDRAW 1
