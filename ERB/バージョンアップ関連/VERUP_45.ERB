;Ver0.045と旧バージョンとの互換のための処理
;Ver0.048にしたとき消す、互換を46に
 
;追加TALENT、追加CSTRのチェック
@VERUP_45_CHARA(ARG)
#DIM ループ用
#DIM キャラ番号
#DIMS 経験道具

IF 初体験データベースフォロー_初うふふ == 0
	IF 初体験日:ARG:初うふふ
		CALL 初体験日登録処理(ARG, MASTER, "初うふふ", 初体験日:ARG:初うふふ * 1440 + 720, @"%CALLNAME:MASTER%の部屋", "押し倒す", "", 1)
		CALL 初体験日登録処理(ARG, MASTER, "うふふ", 初体験日:ARG:初うふふ * 1440 + 720, @"%CALLNAME:MASTER%の部屋", "押し倒す", "", 0)
		CALL 初体験日登録処理(MASTER, ARG, "初うふふ", 初体験日:ARG:初うふふ * 1440 + 720, @"%CALLNAME:MASTER%の部屋", "押し倒す", "", 1)
		CALL 初体験日登録処理(MASTER, ARG, "うふふ", 初体験日:ARG:初うふふ * 1440 + 720, @"%CALLNAME:MASTER%の部屋", "押し倒す", "", 0)
	ENDIF
	IF 経験相手:ARG:初うふふ != ""
		VARSET RESULTS
		SPLIT 経験相手:ARG:初うふふ, "_", RESULTS
		FOR ループ用, 0, RESULT
			SIF ISNUMERIC(RESULTS:ループ用) == 0
				CONTINUE
			キャラ番号 = FIND_CHARA_FROM_PERSON_ID(TOINT(RESULTS:ループ用))
			CALL 初体験日登録処理(ARG, キャラ番号, "初うふふ", DAY * 1440 + 720, @"%CALLNAME:ARG%の部屋", "押し倒す", "", 1)
			CALL 初体験日登録処理(ARG, キャラ番号, "うふふ", DAY * 1440 + 720, @"%CALLNAME:ARG%の部屋", "押し倒す", "", 0)
			CALL 初体験日登録処理(キャラ番号, ARG, "初うふふ", DAY * 1440 + 720, @"%CALLNAME:ARG%の部屋", "押し倒す", "", 1)
			CALL 初体験日登録処理(キャラ番号, ARG, "うふふ", DAY * 1440 + 720, @"%CALLNAME:ARG%の部屋", "押し倒す", "", 0)
		NEXT
	ENDIF
ENDIF

IF 初体験データベースフォロー_挿入系 == 0
	IF GETBIT(TALENT:MASTER:性別, 1)
		経験道具 = ペニス
	ELSE
		経験道具 = ペニスバンド
	ENDIF
	IF 初体験日:ARG:Ｖ挿入初体験
		CALL 初体験日登録処理(ARG, MASTER, "Ｖ挿入初体験", 初体験日:ARG:Ｖ挿入初体験 * 1440 + 720, @"%CALLNAME:MASTER%の部屋", 経験道具, "", 1)
		CALL 初体験日登録処理(ARG, MASTER, "Ｖ挿入体験", 初体験日:ARG:Ｖ挿入初体験 * 1440 + 720, @"%CALLNAME:MASTER%の部屋", 経験道具, "", 0)
		CALL 初体験日登録処理(MASTER, ARG, "Ｖ挿入初体験_男側", 初体験日:ARG:Ｖ挿入初体験 * 1440 + 720, @"%CALLNAME:MASTER%の部屋", 経験道具, "", 1)
		CALL 初体験日登録処理(MASTER, ARG, "Ｖ挿入体験_男側", 初体験日:ARG:Ｖ挿入初体験 * 1440 + 720, @"%CALLNAME:MASTER%の部屋", 経験道具, "", 0)
	ENDIF
	IF 初体験日:ARG:Ａ挿入初体験
		CALL 初体験日登録処理(ARG, MASTER, "Ａ挿入初体験", 初体験日:ARG:Ａ挿入初体験 * 1440 + 720, @"%CALLNAME:MASTER%の部屋", 経験道具, "", 1)
		CALL 初体験日登録処理(ARG, MASTER, "Ａ挿入体験", 初体験日:ARG:Ａ挿入初体験 * 1440 + 720, @"%CALLNAME:MASTER%の部屋", 経験道具, "", 0)
		CALL 初体験日登録処理(MASTER, ARG, "Ａ挿入初体験_男側", 初体験日:ARG:Ａ挿入初体験 * 1440 + 720, @"%CALLNAME:MASTER%の部屋", 経験道具, "", 1)
		CALL 初体験日登録処理(MASTER, ARG, "Ａ挿入体験_男側", 初体験日:ARG:Ａ挿入初体験 * 1440 + 720, @"%CALLNAME:MASTER%の部屋", 経験道具, "", 0)
	ENDIF
	IF GETBIT(TALENT:ARG:性別, 1)
		経験道具 = ペニス
	ELSE
		経験道具 = ペニスバンド
	ENDIF
	IF 初体験日:ARG:Ｖ挿入初体験_男側
		CALL 初体験日登録処理(ARG, MASTER, "Ｖ挿入初体験_男側", 初体験日:ARG:Ｖ挿入初体験_男側 * 1440 + 720, @"%CALLNAME:MASTER%の部屋", 経験道具, "", 1)
		CALL 初体験日登録処理(ARG, MASTER, "Ｖ挿入体験_男側", 初体験日:ARG:Ｖ挿入初体験_男側 * 1440 + 720, @"%CALLNAME:MASTER%の部屋", 経験道具, "", 0)
		CALL 初体験日登録処理(MASTER, ARG, "Ｖ挿入初体験", 初体験日:ARG:Ｖ挿入初体験_男側 * 1440 + 720, @"%CALLNAME:MASTER%の部屋", 経験道具, "", 1)
		CALL 初体験日登録処理(MASTER, ARG, "Ｖ挿入体験", 初体験日:ARG:Ｖ挿入初体験_男側 * 1440 + 720, @"%CALLNAME:MASTER%の部屋", 経験道具, "", 0)
	ENDIF
	IF 初体験日:ARG:Ａ挿入初体験_男側
		CALL 初体験日登録処理(ARG, MASTER, "Ａ挿入初体験_男側", 初体験日:ARG:Ｖ挿入初体験_男側 * 1440 + 720, @"%CALLNAME:MASTER%の部屋", 経験道具, "", 1)
		CALL 初体験日登録処理(ARG, MASTER, "Ａ挿入体験_男側", 初体験日:ARG:Ｖ挿入初体験_男側 * 1440 + 720, @"%CALLNAME:MASTER%の部屋", 経験道具, "", 0)
		CALL 初体験日登録処理(MASTER, ARG, "Ａ挿入初体験", 初体験日:ARG:Ｖ挿入初体験_男側 * 1440 + 720, @"%CALLNAME:MASTER%の部屋", 経験道具, "", 1)
		CALL 初体験日登録処理(MASTER, ARG, "Ａ挿入体験", 初体験日:ARG:Ｖ挿入初体験_男側 * 1440 + 720, @"%CALLNAME:MASTER%の部屋", 経験道具, "", 0)
	ENDIF
	IF 経験相手:ARG:初うふふ != ""
		VARSET RESULTS
		SPLIT 経験相手:ARG:初うふふ, "_", RESULTS
		FOR ループ用, 0, RESULT
			SIF ISNUMERIC(RESULTS:ループ用) == 0
				CONTINUE
			キャラ番号 = FIND_CHARA_FROM_PERSON_ID(TOINT(RESULTS:ループ用))
			
			IF キャラ番号 < 0 || GETBIT(TALENT:キャラ番号:性別, 1)
				経験道具 = ペニス
			ELSE
				経験道具 = ペニスバンド
			ENDIF
			IF 初体験日:ARG:Ｖ挿入初体験
				CALL 初体験日登録処理(ARG, キャラ番号, "Ｖ挿入初体験", DAY * 1440 + 720, @"%CALLNAME:ARG%の部屋", 経験道具, "", 1)
				CALL 初体験日登録処理(ARG, キャラ番号, "Ｖ挿入体験", DAY * 1440 + 720, @"%CALLNAME:ARG%の部屋", 経験道具, "", 0)
				CALL 初体験日登録処理(キャラ番号, ARG, "Ｖ挿入初体験_男側", DAY * 1440 + 720, @"%CALLNAME:ARG%の部屋", 経験道具, "", 1)
				CALL 初体験日登録処理(キャラ番号, ARG, "Ｖ挿入体験_男側", DAY * 1440 + 720, @"%CALLNAME:ARG%の部屋", 経験道具, "", 0)
			ENDIF
			IF 初体験日:ARG:Ａ挿入初体験
				CALL 初体験日登録処理(ARG, キャラ番号, "Ａ挿入初体験", DAY * 1440 + 720, @"%CALLNAME:ARG%の部屋", 経験道具, "", 1)
				CALL 初体験日登録処理(ARG, キャラ番号, "Ａ挿入体験", DAY * 1440 + 720, @"%CALLNAME:ARG%の部屋", 経験道具, "", 0)
				CALL 初体験日登録処理(キャラ番号, ARG, "Ａ挿入初体験_男側", DAY * 1440 + 720, @"%CALLNAME:ARG%の部屋", 経験道具, "", 1)
				CALL 初体験日登録処理(キャラ番号, ARG, "Ａ挿入体験_男側", DAY * 1440 + 720, @"%CALLNAME:ARG%の部屋", 経験道具, "", 0)
			ENDIF
			IF GETBIT(TALENT:ARG:性別, 1)
				経験道具 = ペニス
			ELSE
				経験道具 = ペニスバンド
			ENDIF
			IF 初体験日:ARG:Ｖ挿入初体験_男側
				CALL 初体験日登録処理(ARG, キャラ番号, "Ｖ挿入初体験_男側", DAY * 1440 + 720, @"%CALLNAME:ARG%の部屋", 経験道具, "", 1)
				CALL 初体験日登録処理(ARG, キャラ番号, "Ｖ挿入体験_男側", DAY * 1440 + 720, @"%CALLNAME:ARG%の部屋", 経験道具, "", 0)
				CALL 初体験日登録処理(キャラ番号, ARG, "Ｖ挿入初体験", DAY * 1440 + 720, @"%CALLNAME:ARG%の部屋", 経験道具, "", 1)
				CALL 初体験日登録処理(キャラ番号, ARG, "Ｖ挿入体験", DAY * 1440 + 720, @"%CALLNAME:ARG%の部屋", 経験道具, "", 0)
			ENDIF
			IF 初体験日:ARG:Ａ挿入初体験_男側
				CALL 初体験日登録処理(ARG, キャラ番号, "Ａ挿入初体験_男側", DAY * 1440 + 720, @"%CALLNAME:ARG%の部屋", 経験道具, "", 1)
				CALL 初体験日登録処理(ARG, キャラ番号, "Ａ挿入体験_男側", DAY * 1440 + 720, @"%CALLNAME:ARG%の部屋", 経験道具, "", 0)
				CALL 初体験日登録処理(キャラ番号, ARG, "Ａ挿入初体験", DAY * 1440 + 720, @"%CALLNAME:ARG%の部屋", 経験道具, "", 1)
				CALL 初体験日登録処理(キャラ番号, ARG, "Ａ挿入体験", DAY * 1440 + 720, @"%CALLNAME:ARG%の部屋", 経験道具, "", 0)
			ENDIF
		NEXT
	ENDIF
ENDIF

IF 初体験データベースフォロー_キス == 0
	IF CFLAG:ARG:ファーストキスフラグ
		SELECTCASE CFLAG:ARG:ファーストキスフラグ
			CASE 1
				経験道具 = 唇
			CASE 10
				経験道具 = クリトリス
			CASE 11
				経験道具 = 陰茎
			CASE 12
				経験道具 = アナル
		ENDSELECT
		キャラ番号 = FIND_CHARA_FROM_PERSON_ID(CFLAG:ARG:ファーストキス相手番号)
		IF キャラ番号 == MASTER
			CALL 初体験日登録処理(ARG, キャラ番号, "ファーストキス", DAY * 1440 + 720, @"%CALLNAME:MASTER%の部屋", 経験道具, "", 1)
			CALL 初体験日登録処理(キャラ番号, ARG, "ファーストキス", DAY * 1440 + 720, @"%CALLNAME:MASTER%の部屋", 経験道具, "", 1)
			IF 経験道具 == "唇"
				CALL 初体験日登録処理(ARG, キャラ番号, "キス", DAY * 1440 + 720, @"%CALLNAME:MASTER%の部屋", 経験道具, "", 0)
				CALL 初体験日登録処理(キャラ番号, ARG, "キス", DAY * 1440 + 720, @"%CALLNAME:MASTER%の部屋", 経験道具, "", 0)
			ENDIF
		ELSE
			CALL 初体験日登録処理(ARG, キャラ番号, "ファーストキス", DAY * 1440 + 720, @"%CALLNAME:ARG%の部屋", 経験道具, "", 1)
			CALL 初体験日登録処理(キャラ番号, ARG, "ファーストキス", DAY * 1440 + 720, @"%CALLNAME:ARG%の部屋", 経験道具, "", 1)
			IF 経験道具 == "唇"
				CALL 初体験日登録処理(ARG, キャラ番号, "キス", DAY * 1440 + 720, @"%CALLNAME:ARG%の部屋", 経験道具, "", 0)
				CALL 初体験日登録処理(キャラ番号, ARG, "キス", DAY * 1440 + 720, @"%CALLNAME:ARG%の部屋", 経験道具, "", 0)
			ENDIF
		ENDIF
	ENDIF
ENDIF
 
;その他広域変数の書き換えなど
@VERUP_45()
 
; IF なんらかフォロー == 0
; 	;なんらかのフォロー処理
; 	;ここで"なんらかフォロー = 1"しない
; ENDIF
 
;対応処理用フラグを対応済状態にセット
@VERUP_45_FINISH()
; なんらかフォロー = 1
 
初体験データベースフォロー_初うふふ = 1
初体験データベースフォロー_挿入系 = 1
初体験データベースフォロー_キス = 1
