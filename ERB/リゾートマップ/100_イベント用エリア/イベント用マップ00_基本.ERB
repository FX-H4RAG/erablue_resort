
@MAP_VIEWING_100(AA)
#DIMS REF AA, 0
TRYCALLFORM MAP_RESORT_100_%開催予定祭り名%(AA)


@エリア情報登録_100(ARGS)
SELECTCASE ARGS
	CASE "エリア名"
		IF 開催予定祭り名 != ""
			TSTR:場所名受渡 = %SUBSTRING(開催予定祭り名, 9)%マップ
		ENDIF
	CASE "エリア移動可能場所"
		RETURN 1
ENDSELECT

@MAP_RESORT_100_FESTIVAL_お花見(AA)
#DIMS REF AA, 0

LOCAL = 0
AA:(LOCAL++) = 桜桜桜桜桜桜桜桜桜桜桜桜桜桜桜桜桜桜桜桜桜桜桜桜桜桜桜桜桜桜桜桜桜桜桜桜桜桜
AA:(LOCAL++) = 桜桜桜桜桜桜桜桜桜桜　　　桜桜桜　　　　　　　　　　　　桜桜桜桜桜桜桜桜桜桜
AA:(LOCAL++) = 桜桜桜桜桜桜　　　　　　　　　　　　　　　　桜桜　　　　　　　　桜桜桜桜桜桜
AA:(LOCAL++) = 桜桜桜　　　　　　　　　　　　　　　　　　桜桜桜桜桜　　　　　　桜　　桜桜桜
AA:(LOCAL++) = 桜桜　　　　　　　　　　桜桜　　　　　　　　　桜桜　　　　　　　　　　　桜桜
AA:(LOCAL++) = 桜桜　　　　　桜桜桜　　　　　　　　　　　　　　　　　　　　　　　　　　桜桜
AA:(LOCAL++) = 桜　　　桜桜　　桜桜桜　　　桜桜　　　　　　　　　　　　　　　　　桜桜　　桜
AA:(LOCAL++) = 桜　　　　　　　┌───────┐　┌─┬─┬─┬─┬─┬─┐　桜桜　　　桜
AA:(LOCAL++) = 桜桜　　　　桜桜│　　　　　　　│　│　│　│　│　│　│　│　　　　　　　　
AA:(LOCAL++) = 桜　　　　　　桜│　　　　　　　│　└─┴─┴─┴─┴─┴─┘
AA:(LOCAL++) = 桜　　　　　　桜│　　　　　　　│　　　　　　　　　　　　　　　　　01　　
AA:(LOCAL++) = 桜桜　　　　桜　│　　　03　　　│　　　　　　02　　　　　　　　　　　　　　　
AA:(LOCAL++) = 桜桜桜　　　　　│　　　　　　　│　┌─┬─┐　┌─┬─┬─┐　　　　　　桜
AA:(LOCAL++) = 桜　　　　桜桜桜│　　　　　　　│　│　│　│　│　│　│　│　　　桜　　桜
AA:(LOCAL++) = 桜桜　　桜桜桜　│　　　　　　　│　└─┼─┤　├─┼─┴─┘　　　　　桜桜
AA:(LOCAL++) = 桜桜　　　　桜桜└───────┘　　　│　│　│　│　桜　　　　　　　桜桜
AA:(LOCAL++) = 桜　　　　　　　　　　　　桜桜　　　　　├─┤　├─┤　　桜　　　　桜桜桜桜
AA:(LOCAL++) = 桜　桜桜桜桜　　　　　　　　　　　　　　│　│　│　│　　　　　　　　桜桜桜
AA:(LOCAL++) = 桜　桜桜桜桜桜桜桜桜　　　　　　桜桜　桜├─┤　├─┤　　　　　　　　　桜
AA:(LOCAL++) = 桜　桜桜桜桜桜桜桜桜桜桜桜　　　　　　　│　│　│　│　　　　　　　　　桜桜
AA:(LOCAL++) = 桜　　桜桜桜桜桜桜桜桜桜桜桜桜　　　　　└─┘　└─┘　　　　　　　　　桜桜
AA:(LOCAL++) = 桜桜　桜桜桜桜桜桜桜桜桜桜桜　　桜　桜　　　　　　　　　　　　　　　　　桜桜
AA:(LOCAL++) = 桜桜　桜桜桜桜桜桜桜桜　　　　桜桜　　　桜　　　　　　　　　　　　　　　　桜
AA:(LOCAL++) = 桜桜　桜桜桜桜桜桜　　　桜桜　　　桜　桜桜　　　　　　　　　　　　　　　桜桜
AA:(LOCAL++) = 桜桜　桜桜桜桜桜桜　　桜　　　　05　桜　　桜桜　　　　　　04　　　　　桜桜桜
AA:(LOCAL++) = 桜桜　　桜桜桜桜桜　　桜　桜　桜　　　桜　　　　　　　　　　　　　　池池池池
AA:(LOCAL++) = 桜　　　桜桜桜桜桜桜　　　　桜　桜　　　　　桜　　　　　　　池池池池池池池池
AA:(LOCAL++) = 桜　06　桜桜桜桜桜桜桜　桜　　　　桜桜　　桜　　　　　池池池池池池池池池池池
AA:(LOCAL++) = 桜　　　桜桜桜桜桜桜桜桜桜桜桜桜桜桜桜桜桜桜　　　池池池池池池池池池池池池池
AA:(LOCAL++) = 桜桜桜桜桜桜桜桜桜桜桜桜桜桜桜桜桜桜桜桜桜桜桜桜桜池池池池池池池池池池池池池
AA:(LOCAL++) = 　
AA:(LOCAL++) = 01：会場入口　　02：出店通り　　03：宴会場　　　04：池のほとり　05：桜の森
AA:(LOCAL++) = 06：静かな場所

@GETPLACENAME_100_0(ARG)
#FUNCTION
TRYCALLFORMF GETPLACENAME_100_%開催予定祭り名%(ARG)

@GETPLACENAME_100_FESTIVAL_お花見(ARG)
#FUNCTION
SELECTCASE ARG
	CASE 1
		TSTR:場所名受渡 = 会場入口
	CASE 2
		TSTR:場所名受渡 = 出店通り
	CASE 3
		TSTR:場所名受渡 = 宴会場
	CASE 4
		TSTR:場所名受渡 = 池のほとり
	CASE 5
		TSTR:場所名受渡 = 桜の森
	CASE 6
		TSTR:場所名受渡 = 静かな場所
ENDSELECT

@DRAW_MAP_BG_100_0(SLICED)
#DIMS SLICED
TRYCALLFORM DRAW_MAP_BG_100_%開催予定祭り名%(SLICED)

@DRAW_MAP_BG_100_FESTIVAL_お花見(SLICED)
#DIMS SLICED
SELECTCASE SLICED
	CASE "CFLAG:MASTER:現在位置"
		SETCOLOR 0x90EE90
		PRINTS SLICED
		RESETCOLOR
	CASE "桜"
		SETCOLOR 0xFFDBED
		PRINTS SLICED
		RESETCOLOR
	CASE "池"
		SETCOLOR 0x0067C0
		PRINTS SLICED
		RESETCOLOR
	CASEELSE
		PRINTS SLICED
ENDSELECT

@CAN_MOVE_FESTIVAL_お花見(ARG, ARG:1)
;ARG 移動元
;ARG:1 移動先
#FUNCTION

SELECTCASE ARG
	CASE 1
		;静かな場所以外はOK
		IF GROUPMATCH(ARG:1, 1, 2, 3, 4, 5)
			RESULT = 3
			RETURNF 3
		ENDIF
	CASE 2
		;静かな場所以外はOK
		IF GROUPMATCH(ARG:1, 1, 2, 3, 4, 5)
			RESULT = 3
			RETURNF 3
		ENDIF
	CASE 3
		;静かな場所以外は見通しヨシ
		IF GROUPMATCH(ARG:1, 1, 2, 3, 4, 5)
			RESULT = 3
			RETURNF 3
		ELSEIF ARG:1 == 6
			RESULT = 1
			RETURNF 1
		ENDIF
	CASE 4
		;静かな場所以外はOK
		IF GROUPMATCH(ARG:1, 1, 2, 3, 4, 5)
			RESULT = 3
			RETURNF 3
		ENDIF
	CASE 5
		;静かな場所以外はOK
		IF GROUPMATCH(ARG:1, 1, 2, 3, 4, 5)
			RESULT = 3
			RETURNF 3
		ENDIF
	CASE 6
		;宴会場のみ
		IF ARG:1 == 3
			RESULT = 1
			RETURNF 1
		ENDIF
ENDSELECT
RESULT = 0


@存在しない移動先_FESTIVAL_お花見(ARG)
#FUNCTION
IF ARG < 1 || ARG > 6
	RESULT = 1
	RETURNF 1
ELSE
	RESULT = 0
	RETURNF 0
ENDIF




