
;-------------------------------------------------
;03_304_01バーベキューエリアで食事をする
;-------------------------------------------------
@COMNAME_PLACE_381_3_3
#FUNCTION

TSTR:コマンド名受渡 = ＢＢＱをする
RETURNF 1

;===================================================
;コマンドタイプ
;===================================================
@COMTYPE_381_3_3
#FUNCTION
TFLAG:コマンドタイプ受渡 = COMTYPE("日常")

@COM_TOOLTIP_381_3_3
LOCALS = <br>■ＢＢＱをする<br>
LOCALS += "その場にいるキャラ全員とＢＢＱして食事するコマンド。一定確率で大成功、成功、失敗、大失敗に分岐。<br>所持している食材を提供すると、効果が上昇する。"
LOCALS += "<br>COMタイプ：日常<br>取得ソース：歓楽・征服"
LOCALS += "<br>固有の取得経験：なし<br>"
TSTR:ツールチップ受渡 = %LOCALS%
		
@COM381_3_3
;バーベキューエリアと同一なのでそっちに渡す
CALL COM380_0_304()
RETURN RESULT

;-------------------------------------------------
;実行判定
;-------------------------------------------------
@COM_ABLE381_3_3
;条件に合う場合0（不許可）を返す
;どの条件にも引っかからないなら1（許可）を返す
;一括管理
SIF GLOBAL_COMABLE(381)
	RETURN RESULT
;睡眠中
SIF CFLAG:睡眠
	RETURN 0
;隠密中はダメ
SIF CFLAG:PLAYER:隠密
	RETURN 0
;満腹
SIF TCVAR:MASTER:満腹
	RETURN 0
RETURN 1

;-------------------------------------------------
;実行時メッセージ
;-------------------------------------------------
@MESSAGE_COM381_3_3

PRINTFORM %CALLNAME:PLAYER%は%CALLNAME:TARGET%\@ GET_TARGETNUM() > 1 ? 達 # \@と
PRINT バーベキューをした

SELECTCASE RFLAG:コマンド結果受渡し変数
	CASE -2
		;大失敗時
		PRINTL が、
		PRINTW 料理を大失敗して何も食べられなかった…
	CASE -1
		;失敗時
		PRINTL 
		PRINTW ところどころコゲた肉や野菜が目立ったが、お腹はいっぱいになった。
	CASE 1
		;成功時
		PRINTL 
		PRINTFORMW %CALLNAME:(RFLAG:コマンド結果受渡し変数２)%が美味しく焼いた肉でお腹がいっぱいになった
	CASE 2
		;大成功時
		PRINTL 
		PRINTFORMW %CALLNAME:(RFLAG:コマンド結果受渡し変数２)%が焼いた串は絶品で、\@ GET_TARGETNUM() > 1 ? みんなは # ふたりとも\@大満足で満腹になった！
ENDSELECT


