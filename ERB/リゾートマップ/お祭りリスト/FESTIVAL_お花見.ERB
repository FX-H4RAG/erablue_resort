@MOVE_ROUTINE_FESTIVAL_お花見(ARGS)
#DIM キャラ番号
#DIM 時間計算

SELECTCASE ARGS
	CASE "出現条件"
		;既に予定に入ってたらアウト
		SIF 開催予定祭り名 == "FESTIVAL_お花見"
			RETURN 0
		;春の月限定
		SIF DAY % 120 / 30 != 0
			RETURN 0
		RETURN 1
	CASE "参加判定"
		;とりあえず全員参加
		RETURN 1
	CASE "起床時間"
		時間計算 = 480 - (TALENT:キャラ番号:早起き * 30)
		RETURN 時間計算
	CASE "就寝時間"
		時間計算 = 1320 - (TALENT:キャラ番号:早寝 * 60)
		RETURN 時間計算
	CASE "初期位置"
		CFLAG:キャラ番号:現在位置 = 6
		CFLAG:キャラ番号:現在マップ種別 = 0
	CASE "移動処理"
		CALL MOVE_ROUTINE_移動処理(キャラ番号, "FESTIVAL_お花見")
	CASE "イベント補正"
ENDSELECT


@ROUTINE_PLAN_FESTIVAL_お花見(キャラ番号, マップ種別取得フラグ = 0)
#DIM マップ種別取得フラグ
#DIM キャラ番号

;時間ごとにどの場所にいるべきかを決定
; SELECTCASE TIME
; 	;19時半まではお祭りにいる
; 	CASE IS < 1170
; 		SIF マップ種別取得フラグ
; 			RETURN 0
; 		RETURN 4
; 	;風呂の前後１５分は脱衣所
; 	CASE IS < 1185
; 		SIF マップ種別取得フラグ
; 			RETURN 0
; 		IF TALENT:キャラ番号:性別 == 2
; 			RETURN 7
; 		ELSE
; 			RETURN 8
; 		ENDIF
; 	;21時までは風呂にいる
; 	CASE IS < 1260
; 		SIF マップ種別取得フラグ
; 			RETURN 0
; 		IF TALENT:キャラ番号:性別 == 2
; 			RETURN 9
; 		ELSE
; 			RETURN 11
; 		ENDIF
; 	;風呂の前後１５分は脱衣所
; 	CASE IS < 1185
; 		SIF マップ種別取得フラグ
; 			RETURN 0
; 		IF TALENT:キャラ番号:性別 == 2
; 			RETURN 7
; 		ELSE
; 			RETURN 8
; 		ENDIF
; 	;寝るまでは自室にいる
; 	CASEELSE
; 		SIF マップ種別取得フラグ
; 			RETURN 999
; 		RETURN 999
; ENDSELECT
