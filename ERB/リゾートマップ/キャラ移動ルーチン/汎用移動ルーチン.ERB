;------------------------------------------------------------------------------
;汎用ルーチン プールで遊ぶ
;------------------------------------------------------------------------------
@MOVE_ROUTINE_プールで遊ぶ(キャラ番号, ARGS)
#DIM キャラ番号
#DIM 時間計算

SELECTCASE ARGS
	CASE "起床時刻"
		時間計算 = 480 - (TALENT:キャラ番号:早起き * 30)
		RETURN 時間計算

	CASE "就寝時刻"
		時間計算 = 1320 - (TALENT:キャラ番号:早寝 * 60)
		RETURN 時間計算

	CASE "就寝場所"
		RETURN 0

	CASE "初期位置"
		CFLAG:キャラ番号:現在位置 = 6
		CFLAG:キャラ番号:現在マップ種別 = 0
ENDSELECT

@ROUTINE_SCHEDULE_プールで遊ぶ(キャラ番号)
#DIM キャラ番号
CALL ROUTINE_SCHEDULE_AM_プールで遊ぶ(キャラ番号)
CALL ROUTINE_SCHEDULE_PM_プールで遊ぶ(キャラ番号)

@ROUTINE_SCHEDULE_AM_プールで遊ぶ(キャラ番号)
#DIM キャラ番号
#DIM スケジュール番号

CALL RESET_SCHEDULE(キャラ番号)
スケジュール番号 = 0

;起床後はロビーへ
CALL SET_SCHEDULE(キャラ番号, スケジュール番号, 0, "交流")
スケジュール番号++

;9時からプール
CALL SET_SCHEDULE(キャラ番号, スケジュール番号, 540 + TCVAR:キャラ番号:行動時間ゆらぎ, "プールで遊ぶ", "所要時間", "120")
スケジュール番号++

;12時の15分前(着替え時間)から食堂
CALL SET_SCHEDULE(キャラ番号, スケジュール番号, 705 + TCVAR:キャラ番号:行動時間ゆらぎ, "食事", "所要時間", "60", "優先度", "4")
スケジュール番号++

@ROUTINE_SCHEDULE_PM_プールで遊ぶ(キャラ番号)
#DIM キャラ番号
#DIM スケジュール番号

スケジュール番号 = FIND_BLANK_SCHEDULE(キャラ番号)

;13時半からプール
CALL SET_SCHEDULE(キャラ番号, スケジュール番号, 810 + TCVAR:キャラ番号:行動時間ゆらぎ, "プールで遊ぶ", "所要時間", "180")
スケジュール番号++

;18時の15分前(着替え時間)から食堂
CALL SET_SCHEDULE(キャラ番号, スケジュール番号, 1065 + TCVAR:キャラ番号:行動時間ゆらぎ, "食事", "所要時間", "60", "優先度", "4")
スケジュール番号++

;19時半からお風呂
CALL SET_SCHEDULE(キャラ番号, スケジュール番号, 1170 + TCVAR:キャラ番号:行動時間ゆらぎ, "お風呂", "所要時間", "60", "優先度", "2")
スケジュール番号++

IF TALENT:キャラ番号:早寝 > 0
	;早寝のキャラは21時の15分前(着替え時間)から寝るまでは自室
	CALL SET_SCHEDULE(キャラ番号, スケジュール番号, 1245 + TCVAR:キャラ番号:行動時間ゆらぎ, "休憩")
	スケジュール番号++
ELSE
	;21時からロビーへ
	CALL SET_SCHEDULE(キャラ番号, スケジュール番号, 1260 + TCVAR:キャラ番号:行動時間ゆらぎ, "交流")
	スケジュール番号++

	;21時30分から寝るまでは自室
	CALL SET_SCHEDULE(キャラ番号, スケジュール番号, 1290 + TCVAR:キャラ番号:行動時間ゆらぎ, "休憩")
	スケジュール番号++
ENDIF


;------------------------------------------------------------------------------
;汎用ルーチン 外で遊ぶ
;------------------------------------------------------------------------------
@MOVE_ROUTINE_外で遊ぶ(キャラ番号, ARGS)
#DIM キャラ番号
#DIM 時間計算

SELECTCASE ARGS
	CASE "起床時刻"
		時間計算 = 480 - (TALENT:キャラ番号:早起き * 30)
		RETURN 時間計算

	CASE "就寝時刻"
		時間計算 = 1290 - (TALENT:キャラ番号:早寝 * 60)
		RETURN 時間計算

	CASE "就寝場所"
		;キャンプ場の時、メインテントで眠る
		IF 施設改造度:3:0
			RESULT:1 = 0
			RESULT:2 = 303
			RETURN 1
		ELSE
			RETURN 0
		ENDIF

	CASE "初期位置"
		CFLAG:キャラ番号:現在位置 = 6
		CFLAG:キャラ番号:現在マップ種別 = 0
ENDSELECT

@ROUTINE_SCHEDULE_外で遊ぶ(キャラ番号)
#DIM キャラ番号
CALL ROUTINE_SCHEDULE_AM_外で遊ぶ(キャラ番号)
CALL ROUTINE_SCHEDULE_PM_外で遊ぶ(キャラ番号)

@ROUTINE_SCHEDULE_AM_外で遊ぶ(キャラ番号)
#DIM キャラ番号
#DIM スケジュール番号

CALL RESET_SCHEDULE(キャラ番号)
スケジュール番号 = 0

;起床後はロビーへ
CALL SET_SCHEDULE(キャラ番号, スケジュール番号, 0, "交流")
スケジュール番号++

;9時から外へ
CALL SET_SCHEDULE(キャラ番号, スケジュール番号, 540 + TCVAR:キャラ番号:行動時間ゆらぎ, "外で遊ぶ", "所要時間", "120")
スケジュール番号++

;12時から食堂（キャンプ場改造済ならバーベキューエリア）
CALL SET_SCHEDULE(キャラ番号, スケジュール番号, 720 + TCVAR:キャラ番号:行動時間ゆらぎ, "食事", "小分類", "バーベキュー", "所要時間", "60", "優先度", "4")
スケジュール番号++

@ROUTINE_SCHEDULE_PM_外で遊ぶ(キャラ番号)
#DIM キャラ番号
#DIM スケジュール番号

スケジュール番号 = FIND_BLANK_SCHEDULE(キャラ番号)

;13時半から外へ
CALL SET_SCHEDULE(キャラ番号, スケジュール番号, 810 + TCVAR:キャラ番号:行動時間ゆらぎ, "外で遊ぶ", "所要時間", "180")
スケジュール番号++

;18時から食堂（キャンプ場改造済ならバーベキューエリア）
CALL SET_SCHEDULE(キャラ番号, スケジュール番号, 1080 + TCVAR:キャラ番号:行動時間ゆらぎ, "食事", "小分類", "バーベキュー", "所要時間", "60", "優先度", "4")
スケジュール番号++

;19時半からお風呂
CALL SET_SCHEDULE(キャラ番号, スケジュール番号, 1170 + TCVAR:キャラ番号:行動時間ゆらぎ, "お風呂", "所要時間", "60", "優先度", "2")
スケジュール番号++

IF TALENT:キャラ番号:早寝 > 0
	;早寝のキャラは21時の15分前(着替え時間)から寝るまでは自室（キャンプ場改造済ならメインテント）
	CALL SET_SCHEDULE(キャラ番号, スケジュール番号, 1245 + TCVAR:キャラ番号:行動時間ゆらぎ, "休憩", "小分類", "キャンプ")
	スケジュール番号++
ELSE
	;21時からロビーへ
	CALL SET_SCHEDULE(キャラ番号, スケジュール番号, 1260 + TCVAR:キャラ番号:行動時間ゆらぎ, "交流")
	スケジュール番号++

	;21時30分から寝るまでは自室（キャンプ場改造済ならメインテント）
	CALL SET_SCHEDULE(キャラ番号, スケジュール番号, 1290 + TCVAR:キャラ番号:行動時間ゆらぎ, "休憩", "小分類", "キャンプ")
	スケジュール番号++
ENDIF


;------------------------------------------------------------------------------
;汎用ルーチン 遊戯室で遊ぶ
;------------------------------------------------------------------------------
@MOVE_ROUTINE_遊戯室で遊ぶ(キャラ番号, ARGS)
#DIM キャラ番号
#DIM 時間計算

SELECTCASE ARGS
	CASE "起床時刻"
		時間計算 = 510 - (TALENT:キャラ番号:早起き * 30)
		RETURN 時間計算

	CASE "就寝時刻"
		時間計算 = 1320 - (TALENT:キャラ番号:早寝 * 60)
		RETURN 時間計算

	CASE "就寝場所"
		RETURN 0

	CASE "初期位置"
		CFLAG:キャラ番号:現在位置 = 6
		CFLAG:キャラ番号:現在マップ種別 = 0
ENDSELECT

@ROUTINE_SCHEDULE_遊戯室で遊ぶ(キャラ番号)
#DIM キャラ番号
CALL ROUTINE_SCHEDULE_AM_遊戯室で遊ぶ(キャラ番号)
CALL ROUTINE_SCHEDULE_PM_遊戯室で遊ぶ(キャラ番号)

@ROUTINE_SCHEDULE_AM_遊戯室で遊ぶ(キャラ番号)
#DIM キャラ番号
#DIM スケジュール番号

CALL RESET_SCHEDULE(キャラ番号)
スケジュール番号 = 0

;起床後はロビーへ
CALL SET_SCHEDULE(キャラ番号, スケジュール番号, 0, "交流")
スケジュール番号++

;9時から遊戯室へ
CALL SET_SCHEDULE(キャラ番号, スケジュール番号, 540 + TCVAR:キャラ番号:行動時間ゆらぎ, "遊戯室で遊ぶ", "所要時間", "120")
スケジュール番号++

;12時から食堂
CALL SET_SCHEDULE(キャラ番号, スケジュール番号, 720 + TCVAR:キャラ番号:行動時間ゆらぎ, "食事", "所要時間", "60", "優先度", "4")
スケジュール番号++

@ROUTINE_SCHEDULE_PM_遊戯室で遊ぶ(キャラ番号)
#DIM キャラ番号
#DIM スケジュール番号

スケジュール番号 = FIND_BLANK_SCHEDULE(キャラ番号)

;13時半から遊戯室へ
CALL SET_SCHEDULE(キャラ番号, スケジュール番号, 810 + TCVAR:キャラ番号:行動時間ゆらぎ, "遊戯室で遊ぶ", "所要時間", "180")
スケジュール番号++

;18時から食堂
CALL SET_SCHEDULE(キャラ番号, スケジュール番号, 1080 + TCVAR:キャラ番号:行動時間ゆらぎ, "食事", "所要時間", "60", "優先度", "4")
スケジュール番号++

;19時半からお風呂
CALL SET_SCHEDULE(キャラ番号, スケジュール番号, 1170 + TCVAR:キャラ番号:行動時間ゆらぎ, "お風呂", "所要時間", "60", "優先度", "2")
スケジュール番号++

IF TALENT:キャラ番号:早寝 > 0
	;早寝のキャラは21時の15分前(着替え時間)から寝るまでは自室
	CALL SET_SCHEDULE(キャラ番号, スケジュール番号, 1245 + TCVAR:キャラ番号:行動時間ゆらぎ, "休憩")
	スケジュール番号++
ELSE
	;21時からロビーへ
	CALL SET_SCHEDULE(キャラ番号, スケジュール番号, 1260 + TCVAR:キャラ番号:行動時間ゆらぎ, "交流")
	スケジュール番号++

	;21時30分から寝るまでは自室
	CALL SET_SCHEDULE(キャラ番号, スケジュール番号, 1290 + TCVAR:キャラ番号:行動時間ゆらぎ, "休憩")
	スケジュール番号++
ENDIF


;------------------------------------------------------------------------------
;汎用ルーチン 空艇港でショッピング
;------------------------------------------------------------------------------
@MOVE_ROUTINE_空艇港でショッピング(キャラ番号, ARGS)
#DIM キャラ番号
#DIM 時間計算

SELECTCASE ARGS
	CASE "起床時刻"
		時間計算 = 540 - (TALENT:キャラ番号:早起き * 30)
		RETURN 時間計算

	CASE "就寝時刻"
		時間計算 = 1320 - (TALENT:キャラ番号:早寝 * 60)
		RETURN 時間計算

	CASE "就寝場所"
		RETURN 0

	CASE "初期位置"
		CFLAG:キャラ番号:現在位置 = 6
		CFLAG:キャラ番号:現在マップ種別 = 0
ENDSELECT

@ROUTINE_SCHEDULE_空艇港でショッピング(キャラ番号)
#DIM キャラ番号
CALL ROUTINE_SCHEDULE_AM_空艇港でショッピング(キャラ番号)
CALL ROUTINE_SCHEDULE_PM_空艇港でショッピング(キャラ番号)

@ROUTINE_SCHEDULE_AM_空艇港でショッピング(キャラ番号)
#DIM キャラ番号
#DIM スケジュール番号

CALL RESET_SCHEDULE(キャラ番号)
スケジュール番号 = 0

;起床後はロビーへ
CALL SET_SCHEDULE(キャラ番号, スケジュール番号, 0, "交流")
スケジュール番号++

;9時から店へ
CALL SET_SCHEDULE(キャラ番号, スケジュール番号, 540 + TCVAR:キャラ番号:行動時間ゆらぎ, "空艇港でショッピング", "所要時間", "120")
スケジュール番号++

;12時から食事処、無いなら食堂
CALL SET_SCHEDULE(キャラ番号, スケジュール番号, 720 + TCVAR:キャラ番号:行動時間ゆらぎ, "食事", "小分類", "外食", "所要時間", "60", "優先度", "4")
スケジュール番号++

@ROUTINE_SCHEDULE_PM_空艇港でショッピング(キャラ番号)
#DIM キャラ番号
#DIM スケジュール番号

スケジュール番号 = FIND_BLANK_SCHEDULE(キャラ番号)

;13時半から店へ
CALL SET_SCHEDULE(キャラ番号, スケジュール番号, 810 + TCVAR:キャラ番号:行動時間ゆらぎ, "空艇港でショッピング", "所要時間", "180")
スケジュール番号++

;18時から食事処、無いなら食堂
CALL SET_SCHEDULE(キャラ番号, スケジュール番号, 1080 + TCVAR:キャラ番号:行動時間ゆらぎ, "食事", "小分類", "外食", "所要時間", "60", "優先度", "4")
スケジュール番号++

;19時半からお風呂
CALL SET_SCHEDULE(キャラ番号, スケジュール番号, 1170 + TCVAR:キャラ番号:行動時間ゆらぎ, "お風呂", "所要時間", "60", "優先度", "2")
スケジュール番号++

IF TALENT:キャラ番号:早寝 > 0
	;早寝のキャラは21時の15分前(着替え時間)から寝るまでは自室
	CALL SET_SCHEDULE(キャラ番号, スケジュール番号, 1245 + TCVAR:キャラ番号:行動時間ゆらぎ, "休憩")
	スケジュール番号++
ELSE
	;21時からロビーへ
	CALL SET_SCHEDULE(キャラ番号, スケジュール番号, 1260 + TCVAR:キャラ番号:行動時間ゆらぎ, "交流")
	スケジュール番号++

	;21時30分から寝るまでは自室
	CALL SET_SCHEDULE(キャラ番号, スケジュール番号, 1290 + TCVAR:キャラ番号:行動時間ゆらぎ, "休憩")
	スケジュール番号++
ENDIF
