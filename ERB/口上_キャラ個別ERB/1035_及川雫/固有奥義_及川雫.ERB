@固有奥義_1035(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 奥義威力
#DIM 隊列
#DIMS 奥義名
MHP = 基礎BATTLE_STATE:キャラ番号:最大ＨＰ + 装備ステータス補正保存:キャラ番号:最大ＨＰ

LOCAL = 0
隊列 = キャラ隊列検索(キャラ番号)

SIF 隊列 > -1
	LOCAL = 戦闘中カウント:隊列:0

IF 基礎BATTLE_STATE:キャラ番号:Lv >= 25
	奥義名 = Milkey Mode＋
	奥義威力 = 450
ELSE
	奥義名 = Milkey Mode
	奥義威力 = 300
ENDIF

SELECTCASE ARGS
	CASE "奥義名"
		TSTR:コマンド名受渡 = %奥義名%
	CASE "奥義説明文"
		IF 基礎BATTLE_STATE:キャラ番号:Lv >= 25
			詳細文文字列受け渡し変数 = <br>敵単体に{奥義威力}％のダメージを与える/自身のHPを50％回復/自身にミルキィ・モード効果［5ターン/消去不可］
			詳細文文字列受け渡し変数 += @"　ミルキィ・モード効果"
			詳細文文字列受け渡し変数 += @"　被ダメージを20％軽減し、敵対心を100％アップする。"
			詳細文文字列受け渡し変数 += @"　さらに、ターン終了時にHPを50％回復する。"
		ELSE
			詳細文文字列受け渡し変数 = <br>敵単体に{奥義威力}％のダメージを与える/自身のHPを30％回復/自身にミルキィ・モード効果［3ターン/消去不可］
			詳細文文字列受け渡し変数 += @"　ミルキィ・モード効果"
			詳細文文字列受け渡し変数 += @"　被ダメージを10％軽減し、敵対心を100％アップする。"
			詳細文文字列受け渡し変数 += @"　さらに、ターン終了時にHPを30％回復する。"
		ENDIF

		RETURN 奥義威力
	CASE "奥義追加効果"
		CALL アビ汎用変数文字列リセット
		CALL アビ対象選択テンプレート_自己のみ
		IF 基礎BATTLE_STATE:キャラ番号:Lv >= 25
			アビ汎用変数:効果割合 = 50
		ELSE
			アビ汎用変数:効果割合 = 30
		ENDIF
		CALL アビテンプレート_回復処理_MAXでも回復
		アビ汎用文字列:バフ・デバフ枠 = ミルキィ・モード
		アビ汎用文字列:バフ・デバフ対象能力 =ミルキィ・モード
		IF 基礎BATTLE_STATE:キャラ番号:Lv >= 25
			アビ汎用変数:効果割合 = 20
			アビ汎用変数:持続ターン = 5
		ELSE
			アビ汎用変数:効果割合 = 10
			アビ汎用変数:持続ターン = 3
		ENDIF
		アビ汎用文字列:バフ・デバフ枠 = ミルキィ・モード_被ダメ軽減
		アビ汎用文字列:バフ・デバフ対象能力 = ミルキィ・モード_ダメージ増減
		アビ汎用変数:消去不可オプション = 1
		アビ汎用変数:特殊表示オプション = 1
		CALL アビテンプレート_有利効果_バフ効果セット
		アビ汎用文字列:バフ・デバフ枠 = ミルキィ・モード_敵対心
		アビ汎用文字列:バフ・デバフ対象能力 = ミルキィ・モード_敵対心
		アビ汎用変数:効果量 = 200
		CALL アビテンプレート_有利効果_バフ効果セット

ENDSELECT


@固有ターン終了時処理_キャラ_1035
#DIM バフ・デバフ行数
#DIM 隊列番号

隊列番号 = キャラ隊列検索(FINDCHARA(NO, 1035))

バフ・デバフ行数 = バフ存在チェック_枠("ミルキィ・モード", 隊列番号)
IF バフ・デバフ行数 > -1
		CALL アビ汎用変数文字列リセット
		CALL アビ対象選択テンプレート_自己のみ
		IF 基礎BATTLE_STATE:1035:Lv >= 25
			アビ汎用変数:効果割合 = 50
		ELSE
			アビ汎用変数:効果割合 = 30
		ENDIF
		CALL アビテンプレート_回復処理_MAXでも回復
ENDIF
