;--------------------------------------------------
;ダンジョン探索中に条件を満たしていた時表示される文章
;--------------------------------------------------
;・使い方
;「25」をキャラクター番号に置換し、それぞれの関数に処理を入れる
;--------------------------------------------------

;--------------------------------------------------
;「仲間と会話」ボタン押下時
;簡単に何度も見られるので、条件分岐やランダム化で複数パターンの登録を推奨
;--------------------------------------------------
@KOJO_DUNGEON_仲間と会話_25(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

SELECTCASE RAND:5
	CASE 0
		WSTR:(K++) = 「んー？ %CSTR:LOCAL:二人称%さん、どぉしたの？」
		KSTR:(K++) = %CALLNAME:LOCAL%は小首をかしげている
	CASE 1
		WSTR:(K++) = %CALLNAME:LOCAL%は周囲を伺っている……
		KSTR:(K++) = 「_I_はてさて、なにか使えそうな素材は……_CALL_カリオストロ本性開示_」
	CASE 2
		WSTR:(K++) = 「_I_おいおい、オレ様にばかり見とれてないで周りも警戒しろよ_CALL_カリオストロ本性開示_」
		KSTR:(K++) = %CALLNAME:LOCAL%は意地の悪そうな笑顔を浮かべている
	CASE 3
		WSTR:(K++) = 「_I_おい%CSTR:LOCAL:二人称%、あんまりオレ様から離れるんじゃねぇぞ_」
		KSTR:(K++) = 「_I_オレ様がついているのに怪我でもされちゃ、沽券に関わるからな_CALL_カリオストロ本性開示_」
	CASE 4
		WSTR:(K++) = %CALLNAME:LOCAL%は憂いを帯びた表情でため息をついている……
		KSTR:(K++) = 「%CSTR:LOCAL:二人称%さん、どうだった？ 今の表情、一味違う可愛さだったでしょ」
ENDSELECT

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ,,0)

;--------------------------------------------------
;戦闘中特定タイミングで表示される文章
;--------------------------------------------------
;固有スキル発動時
;「（キャラ名）の（アビ名）！」よりも前に表示される
;汎用アビや衣装アビだと発動しないので注意
;--------------------------------------------------
@KOJO_DUNGEON_固有アビ発動時_25_1(対象キャラ, 使用アビ名)
#DIMS 使用アビ名
#DIM 対象キャラ

;YYYYを固有アビ関数の「@固有アビ_XXXX_YYYY」のYYYYと同じに変更する
;使用したアビリティの名前は「使用アビ名」に入ってくる
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

@KOJO_DUNGEON_固有アビ発動時_25_2(対象キャラ, 使用アビ名)
#DIMS 使用アビ名
#DIM 対象キャラ

;YYYYを固有アビ関数の「@固有アビ_XXXX_YYYY」のYYYYと同じに変更する
;使用したアビリティの名前は「使用アビ名」に入ってくる
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

@KOJO_DUNGEON_固有アビ発動時_25_3(対象キャラ, 使用アビ名)
#DIMS 使用アビ名
#DIM 対象キャラ

;YYYYを固有アビ関数の「@固有アビ_XXXX_YYYY」のYYYYと同じに変更する
;使用したアビリティの名前は「使用アビ名」に入ってくる
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

@KOJO_DUNGEON_固有アビ発動時_25_11(対象キャラ, 使用アビ名)
#DIMS 使用アビ名
#DIM 対象キャラ

;YYYYを固有アビ関数の「@固有アビ_XXXX_YYYY」のYYYYと同じに変更する
;使用したアビリティの名前は「使用アビ名」に入ってくる
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

@KOJO_DUNGEON_固有アビ発動時_25_12(対象キャラ, 使用アビ名)
#DIMS 使用アビ名
#DIM 対象キャラ

;YYYYを固有アビ関数の「@固有アビ_XXXX_YYYY」のYYYYと同じに変更する
;使用したアビリティの名前は「使用アビ名」に入ってくる
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

@KOJO_DUNGEON_固有アビ発動時_25_13(対象キャラ, 使用アビ名)
#DIMS 使用アビ名
#DIM 対象キャラ

;YYYYを固有アビ関数の「@固有アビ_XXXX_YYYY」のYYYYと同じに変更する
;使用したアビリティの名前は「使用アビ名」に入ってくる
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

;--------------------------------------------------
;奥義発動時
;「（キャラ名）の奥義：（奥義名）！」よりも前に表示される
;--------------------------------------------------
@KOJO_DUNGEON_奥義発動時_25(対象キャラ, 使用奥義名)
#DIMS 使用奥義名
#DIM 対象キャラ

CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

IF 基礎BATTLE_STATE:LOCAL:Lv >= 35 && 陥落チェック(LOCAL)
	IF RAND:4
		KSTR:(K++) = 「_I_真理の前に跪け！_」
	ELSE
		KSTR:(K++) = 「_I_あばよ！テメェはここで終身刑だ！！_」
	ENDIF
ELSE
	KSTR:(K++) = 「これが真理のぉ…_I_一撃だ！_」
ENDIF
CALL カリオストロ本性開示()
CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ,,0)

;--------------------------------------------------
;チェンバースト発動時
;「チェインバースト！」（フルチェイン！）よりも前に表示される
;該当キャラが起点になった時（＝ターンで最初に奥義を撃った）にしか呼ばれないので注意
;--------------------------------------------------
@KOJO_DUNGEON_チェンバ発動時_25(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 

;掛け合いの作り方
;ZZZZ = 掛け合い相手のCSVに記載してあるキャラ番号とする
;
; LOCAL:2 = FINDCHARA(NO, ZZZZ)
; IF キャラ隊列検索(LOCAL:2) > -1
; 	KSTR:(K++) = （口上キャラのセリフ）
;
; 	NSTR:(K++) = ++++
;	切り替え名前:0 = %CALLNAME:(LOCAL:2)%
; 	切り替え顔グラリソース:0 = 探索用_{キャラ隊列検索(LOCAL:2)}_顔
;
; 	KSTR:(K++) = （掛け合い相手のセリフ）
; ENDIF
;と記述すると下に一個、掛け合い相手の顔グラと名前が表示されたメッセージ欄を増やせるので、そこで掛け合いを行う
;複数個メッセージ欄を増やす場合、切り替え顔グラリソース:1、切り替え名前:1のように配列番号を１つずつ増やすこと

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)


;--------------------------------------------------
;トドメ時
;行動の結果（◯◯は倒れた！など）の後に表示される
;複数攻撃時は一人でも倒していれば表示される
;--------------------------------------------------
;口上用トドメフラグ には倒した敵の数が入っている
;口上用技名保存 には奥義名・アビ名が入っている
;       通常攻撃の場合は「通常攻撃」、チェンバの場合は「チェインバースト」が入っている
@KOJO_DUNGEON_トドメ時_25(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)


;--------------------------------------------------
;味方から回復を受けた時
;「（キャラ名）のＨＰが」の直後に表示される
;複数人回復した場合、ランダムで一人の分が表示される
;--------------------------------------------------
;（現在未実装）
@KOJO_DUNGEON_被回復時_25(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

;回復した側のキャラは「BATTLE_STATE:戦闘行動キャラ:0」でキャラ番号が
;「戦闘行動キャラ」で隊列番号が取れる

KSTR:(K++) = 

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)


;--------------------------------------------------
;戦闘勝利時
;ルピやEXPの取得よりも前に表示される
;--------------------------------------------------
@KOJO_DUNGEON_戦闘勝利時_25(対象キャラ)
#DIM 対象キャラ
CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

STRDATA KSTR:(K++)
	DATA 「やぁん、カリオストロ、勝っちゃったぁ_H_」
	DATA 「えへっ、カリオストロの勝ちぃ_H_」
	DATA 「あれあれ～？ もうお終い？」
	DATA 「_I_口ほどにもなかったな_」
	DATA 「_I_オレ様に勝とうなんて、千年早ぇんだよ_」
	DATA 「_I_楽勝だったな！_」
ENDDATA

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

;--------------------------------------------------
;全滅時
;--------------------------------------------------
@KOJO_DUNGEON_全滅時_25(対象キャラ)
#DIM 対象キャラ
CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)


STRDATA KSTR:(K++)
	DATA 「ふぇ～ん、カリオストロたち、負けちゃったぁ」
	DATA 「暴力はんた～い」
	DATA 「_I_嘘だろ、あり得ねぇ…_」
	DATA 「_I_オレ様としたことが……_」
	DATA 「_I_やってくれるじゃねぇか…_」
ENDDATA

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

;--------------------------------------------------
;逃走時
;--------------------------------------------------
@KOJO_DUNGEON_逃走時_25(対象キャラ)
#DIM 対象キャラ
CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

STRDATA KSTR:(K++)
	DATA 「ばいば～い☆」
	DATA 「これ以上相手してあげられないの、ゴメンね？」
	DATA 「_I_チッ、ここは一旦退くぞ！_」
	DATA 「_I_一時撤退だ、態勢を立て直すぞ！_」
	DATA 「_I_このまま相手するのは分が悪い、仕切り直すぞ_」
ENDDATA

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)
