;--------------------------------------------------
;ダンジョン探索中に条件を満たしていた時表示される文章
;--------------------------------------------------
;・使い方
;「28」をキャラクター番号に置換し、それぞれの関数に処理を入れる
;--------------------------------------------------

;--------------------------------------------------
;「仲間と会話」ボタン押下時
;簡単に何度も見られるので、条件分岐やランダム化で複数パターンの登録を推奨
;--------------------------------------------------
@KOJO_DUNGEON_仲間と会話_28
CALL 口上変数初期化
LOCAL = FINDCHARA(NO, 28)
LOCAL:1 = キャラ隊列検索(LOCAL)
SELECTCASE RAND:5
	CASE 0
WSTR:(K++) = 「んふふん、育ちざかりです！」
KSTR:(K++) = ルリアはそう言って胸を反らすが、反らした胸は平坦である。
	CASE 1
WSTR:(K++) = 「WowWowWow♪、WowWowWow♪　WowWowWow♪、YeahYeahYeah♪」
KSTR:(K++) = 「ひゃあ！　き、聞いてたんですか！？　い、いるならいるって言ってくださいよぉー！」
	CASE 2
WSTR:(K++) = 「みんな、あなたを助けてていいなあって思ってたんです」
KSTR:(K++) = 「私もあなたを守りたい！ カタリナみたいに、えい、やあ！　って！」
KSTR:(K++) = 「私だって、守られてばかりじゃないんです！」
	CASE 3
WSTR:(K++) = 「ィイエェェェェェイッ！！　これが、自由でェす！！」
KSTR:(K++) = 「はーわわわわわわわァ！」
	CASE 4
WSTR:(K++) = 「召喚って、すごくおなかが減るんですよね……」
	ENDSELECT

CALL メッセージ欄表示用関数(@"探索用_{LOCAL:1}_顔", CALLNAME:LOCAL,,0)




;--------------------------------------------------
;戦闘中特定タイミングで表示される文章
;--------------------------------------------------
;固有スキル発動時
;「（キャラ名）の（アビ名）！」よりも前に表示される
;汎用アビや衣装アビだと発動しないので注意
;--------------------------------------------------
;恵みの風
@KOJO_DUNGEON_固有アビ発動時_28_1(使用アビ名)
#DIMS 使用アビ名
CALL 口上変数初期化
LOCAL = FINDCHARA(NO, 28)
LOCAL:1 = キャラ隊列検索(LOCAL)

STRDATA KSTR:(K++)
	DATA 「風の囁き、届けます！」
	DATA 「あなたを守ります！」
	DATA 「轟く風、生命の運び手！」
ENDDATA

CALL メッセージ欄表示用関数(@"探索用_{LOCAL:1}_顔", CALLNAME:LOCAL)

;猛き炎
@KOJO_DUNGEON_固有アビ発動時_28_2(使用アビ名)
#DIMS 使用アビ名
CALL 口上変数初期化
LOCAL = FINDCHARA(NO, 28)
LOCAL:1 = キャラ隊列検索(LOCAL)

STRDATA KSTR:(K++)
	DATA 「炎の叫び、詠います！」
	DATA 「あなたのためなら…それーっ！」
	DATA 「渦巻く炎、万物を清める！」
ENDDATA

CALL メッセージ欄表示用関数(@"探索用_{LOCAL:1}_顔", CALLNAME:LOCAL)

@KOJO_DUNGEON_固有アビ発動時_28_3(使用アビ名)
#DIMS 使用アビ名
CALL 口上変数初期化
LOCAL = FINDCHARA(NO, 28)
LOCAL:1 = キャラ隊列検索(LOCAL)

STRDATA KSTR:(K++)
	DATA 「水の語り、贈ります！」
	DATA 「頑張れ、頑張れ！　えーい！」
	DATA 「波打つ水、生誕の揺籠！」
ENDDATA

CALL メッセージ欄表示用関数(@"探索用_{LOCAL:1}_顔", CALLNAME:LOCAL)

@KOJO_DUNGEON_固有アビ発動時_28_4(使用アビ名)
#DIMS 使用アビ名
CALL 口上変数初期化
LOCAL = FINDCHARA(NO, 28)
LOCAL:1 = キャラ隊列検索(LOCAL)
STRDATA KSTR:(K++)
	DATA 「土の温もり、伝えます！」
	DATA 「任せて下さい！」
	DATA 「広大の地、万象の礎！」
ENDDATA

CALL メッセージ欄表示用関数(@"探索用_{LOCAL:1}_顔", CALLNAME:LOCAL)
;--------------------------------------------------
;奥義発動時
;「（キャラ名）の奥義：（奥義名）！」よりも前に表示される
;--------------------------------------------------
@KOJO_DUNGEON_奥義発動時_28(使用奥義名)
#DIMS 使用奥義名

CALL 口上変数初期化
LOCAL = FINDCHARA(NO, 28)
LOCAL:1 = キャラ隊列検索(LOCAL)
SELECTCASE RAND:3
	CASE 0
		KSTR:(K++) = 「始原の竜、闇の炎の子――汝の名は……バハムート！」
	CASE 1
		KSTR:(K++) = 「お願い……バハムート！」
	CASE 2
		KSTR:(K++) = 「空の果てまで、導いて！　汝の名は、バハムート！」
ENDSELECT

CALL メッセージ欄表示用関数(@"探索用_{LOCAL:1}_顔", CALLNAME:LOCAL)

;--------------------------------------------------
;チェンバースト発動時
;「チェインバースト！」（フルチェイン！）よりも前に表示される
;該当キャラが起点になった時（＝ターンで最初に奥義を撃った）にしか呼ばれないので注意
;--------------------------------------------------
@KOJO_DUNGEON_チェンバ発動時_28
CALL 口上変数初期化
LOCAL = FINDCHARA(NO, 28)
LOCAL:1 = キャラ隊列検索(LOCAL)

KSTR:(K++) = 「私だって、力になります！」

LOCAL:2 = FINDCHARA(NO, 27)
IF キャラ隊列検索(LOCAL:2) > -1
	NSTR:(K++) = ++++
	切り替え名前:0 = %CALLNAME:(LOCAL:2)%
	切り替え顔グラリソース:0 = 探索用_{キャラ隊列検索(LOCAL:2)}_顔

	KSTR:(K++) = 「行くよ、ルリア！」

	NSTR:(K++) = ++++
	切り替え名前:1 = %CALLNAME:(LOCAL:1)%
	切り替え顔グラリソース:1 = 探索用_{キャラ隊列検索(LOCAL:1)}_顔
	
	KSTR:(K++) = 「はい！　お願い、バハムート！」
ENDIF
;と記述すると下に一個、掛け合い相手の顔グラと名前が表示されたメッセージ欄を増やせるので、そこで掛け合いを行う
;複数個メッセージ欄を増やす場合、切り替え顔グラリソース:1、切り替え名前:1のように配列番号を１つずつ増やすこと

CALL メッセージ欄表示用関数(@"探索用_{LOCAL:1}_顔", CALLNAME:LOCAL)

;--------------------------------------------------
;味方から回復を受けた時
;「（キャラ名）のＨＰが」の直後に表示される
;複数人回復した場合、ランダムで一人の分が表示される
;--------------------------------------------------
@KOJO_DUNGEON_被回復時_28
CALL 口上変数初期化
LOCAL = FINDCHARA(NO, 28)
LOCAL:1 = キャラ隊列検索(LOCAL)

;回復した側のキャラは「BATTLE_STATE:戦闘行動キャラ:0」でキャラ番号が
;「戦闘行動キャラ」で隊列番号が取れる

KSTR:(K++) = 「たすかりましたぁ～！」

CALL メッセージ欄表示用関数(@"探索用_{LOCAL:1}_顔", CALLNAME:LOCAL)

;--------------------------------------------------
;戦闘勝利時
;ルピやEXPの取得よりも前に表示される
;--------------------------------------------------
@KOJO_DUNGEON_戦闘勝利時_28
CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化
LOCAL = FINDCHARA(NO, 28)
LOCAL:1 = キャラ隊列検索(LOCAL)

KSTR:(K++) = 「ふふーん、どうですか？　私だってやれるんです！」

CALL メッセージ欄表示用関数(@"探索用_{LOCAL:1}_顔", CALLNAME:LOCAL)

;--------------------------------------------------
;全滅時
;--------------------------------------------------
@KOJO_DUNGEON_全滅時_28
CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化
LOCAL = FINDCHARA(NO, 28)
LOCAL:1 = キャラ隊列検索(LOCAL)

KSTR:(K++) = 「ごめんなさい…あなたの助けになれなくて…」

CALL メッセージ欄表示用関数(@"探索用_{LOCAL:1}_顔", CALLNAME:LOCAL)

;--------------------------------------------------
;逃走時
;--------------------------------------------------
@KOJO_DUNGEON_逃走時_28
CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化
LOCAL = FINDCHARA(NO, 28)
LOCAL:1 = キャラ隊列検索(LOCAL)

KSTR:(K++) = 「はうぅ……やっぱり私じゃダメなんでしょうか」

CALL メッセージ欄表示用関数(@"探索用_{LOCAL:1}_顔", CALLNAME:LOCAL)
