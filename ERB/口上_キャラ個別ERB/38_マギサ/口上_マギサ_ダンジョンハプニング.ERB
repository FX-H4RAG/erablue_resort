;--------------------------------------------------
;ダンジョン探索中にダンジョンハプニングを踏んだとき表示される文章
;--------------------------------------------------
;・使い方
;「38」をキャラクター番号に置換し、それぞれの関数に処理を入れる
;--------------------------------------------------
;ver240507
;--------------------------------------------------
;「スカート捲れ」時
;--------------------------------------------------
@KOJO_ハプニング_スカート捲れ_38
CALL 口上変数初期化
LOCAL = FINDCHARA(NO, 38)
LOCAL:1 = キャラ隊列検索(LOCAL)
IF TALENT:LOCAL:恋慕
	KSTR:(K++) = 「あらあら、見られちゃったかしら？」
	KSTR:(K++) = 「……もっと見たいの？　二人きりになったら、ね_H_」
ELSEIF TALENT:LOCAL:セフレ
	KSTR:(K++) = 「あらあら、見られちゃったかしら？」
	KSTR:(K++) = 「……もっと見たいの？　二人きりになったら、ね_H_」
ELSE
	KSTR:(K++) = 「私のスカートの下が気になるの？　それはいいのよ。当然ね」
	KSTR:(K++) = 「けれど……魔女の下着は、一目だけでも高いわよ？　覚えておくことね」
	KSTR:(K++) = 笑みを浮かべているけれど眼は全然笑っていない……
ENDIF


CALL メッセージ欄表示用関数(@"探索用_{LOCAL:1}_顔", CALLNAME:LOCAL,,0)

;--------------------------------------------------
;「ポロリ発生」時
;--------------------------------------------------
@KOJO_ハプニング_ポロリ発生_38
CALL 口上変数初期化
LOCAL = FINDCHARA(NO, 38)
LOCAL:1 = キャラ隊列検索(LOCAL)

IF TALENT:LOCAL:恋慕
	KSTR:(K++) = 「困ったわね……%CALLNAME:MASTER%さん、ちょっと手伝ってくれないかしら？」
	KSTR:(K++) = 欲望を必死で抑えつけながら、マギサの服の乱れを直すのを手伝った……
ELSEIF TALENT:LOCAL:セフレ
	KSTR:(K++) = 「困ったわね……%CALLNAME:MASTER%さん、ちょっと手伝ってくれないかしら？」
	KSTR:(K++) = 欲望を必死で抑えつけながら、マギサの服の乱れを直すのを手伝った……
ELSE
	KSTR:(K++) = 「やだもう、滅多にこんなことはないんだけど……」
	KSTR:(K++) = 「……あんまり見てると怒るわよ？」
ENDIF

CALL メッセージ欄表示用関数(@"探索用_{LOCAL:1}_顔", CALLNAME:LOCAL,,0)

;--------------------------------------------------
;「乳タッチ」時
;--------------------------------------------------
@KOJO_ハプニング_乳タッチ_38
CALL 口上変数初期化
LOCAL = FINDCHARA(NO, 38)
LOCAL:1 = キャラ隊列検索(LOCAL)

IF TALENT:LOCAL:恋慕
	KSTR:(K++) = 「捻挫とかはしてないみたいね。それはよかったわ」
	KSTR:(K++) = 「でも……そういうのは、人がいないところで……ね？」
ELSEIF TALENT:LOCAL:セフレ
	KSTR:(K++) = 「大丈夫？　怪我とかはない？　そう、よかったわ」
	KSTR:(K++) = マギサがぎゅーっと抱き締めてきた。顔が胸にうずもれ、幸福を感じる。
	KSTR:(K++) = ……それも束の間。やっぱり苦しいです、マギサさん……
ELSE
	KSTR:(K++) = 「わざとじゃないのでしょう？　なら気にすることはないわ」
	KSTR:(K++) = 「でも、もしこれが悪戯だったりしたら……わかってるわよね？」
ENDIF

CALL メッセージ欄表示用関数(@"探索用_{LOCAL:1}_顔", CALLNAME:LOCAL,,0)

;--------------------------------------------------
;「発情罠」時、陥落状態だと物陰でセックスする
;V挿入したことがない場合、V快楽は発生しない
;A挿入したことがない場合、A快楽は発生しない
;--------------------------------------------------
@KOJO_ハプニング_発情罠セックス_38
CALL 口上変数初期化
LOCAL = FINDCHARA(NO, 38)
LOCAL:1 = キャラ隊列検索(LOCAL)

IF TALENT:LOCAL:恋慕
	KSTR:(K++) = マギサはドレスから爆乳を露出させ、ショーツを脱ぎ捨て、%CALLNAME:MASTER%にのしかかってきた。
	KSTR:(K++) = それから、たった一小節の呪文。それだけで%CALLNAME:MASTER%は痛いほどの勃起に見舞われた。
	KSTR:(K++) = 「ふふふふっ_H_ごめんなさい、もう止まらないの_H_……さぁ、愛し合いましょ_H_」
ELSEIF TALENT:LOCAL:セフレ
	KSTR:(K++) = マギサは爆乳を露出させ、ショーツを脱ぎ捨て、%CALLNAME:MASTER%にのしかかってきた。
	KSTR:(K++) = それから、たった一小節の呪文。それだけで%CALLNAME:MASTER%は痛いほどの勃起に見舞われた。
	KSTR:(K++) = 「ふふふふっ_H_ごめんなさい、もう止まらないの_H_……じゃあ、一緒に気持ちよくなりましょ_H_」

ELSE
	KSTR:(K++) = 
	KSTR:(K++) = 
ENDIF

CALL メッセージ欄表示用関数(@"探索用_{LOCAL:1}_顔", CALLNAME:LOCAL,,0)

;--------------------------------------------------
;「発情罠」時、陥落状態だと物陰でオナニーする
;部位の決定方法は一日終了時オナニーと同様
;（全部位からランダム、ABLや敏感素質があると確率UP
;　V経験・A経験が無い場合はそれぞれV・Aは選択されない
;　男の場合、V・Bは選択されない）
;--------------------------------------------------
@KOJO_ハプニング_発情罠オナニー_38
CALL 口上変数初期化
LOCAL = FINDCHARA(NO, 38)
LOCAL:1 = キャラ隊列検索(LOCAL)

IF 知識素質:LOCAL:性知識 < 0 && EXP:LOCAL:自慰経験 <= 0
	;性知識と自慰経験が無い場合、あなたが自慰を教えてあげるシチュになる
	;接触ソースが発生し、キャラがオナニー覚えたて状態になる
	KSTR:(K++) = 「私としたことがこんな単純な罠に……くっ……」
ELSE
	KSTR:(K++) = 「私としたことがこんな単純な罠に……くっ……」
	KSTR:(K++) = 「いっそ%CALLNAME:MASTER%にでも手伝ってもらおうかしら……でも流石に……」
ENDIF

CALL メッセージ欄表示用関数(@"探索用_{LOCAL:1}_顔", CALLNAME:LOCAL,,0)

