
@固有アビ_92_1(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 消費ＭＰ
#DIM 効果数値
#DIM 効果数値２
#DIMS アビ名

IF 基礎BATTLE_STATE:キャラ番号:Lv >= 20
	アビ名 = 紅陣＋＋
	消費ＭＰ = 50
	効果数値 = 250
	効果数値２ = 40
ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 8
	アビ名 = 紅陣＋
	消費ＭＰ = 25
	効果数値 = 180
	効果数値２ = 30
ELSE
	アビ名 = 紅陣
	消費ＭＰ = 15
	効果数値 = 150
	効果数値２ = 20
ENDIF

SELECTCASE ARGS
	CASE "アビ名"
		TSTR:コマンド名受渡 = %アビ名%
	CASE "アビ説明文"
		詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}<br敵単体に自属性の［攻撃力✕{効果数値}％］ダメージを与える。
		詳細文文字列受け渡し変数 += @"<br>自身の奥義ゲージを{効果数値２}％上昇させる。"
		RETURN 消費ＭＰ
	CASE "アビ効果"
		CALL アビ対象選択テンプレート_敵単体
		アビ汎用変数:効果量 = 効果数値
		CALL アビテンプレート_ダメージ処理_自属性
		
		CALL アビ汎用変数文字列リセット
		アビ汎用変数:効果量 = 効果数値２
		CALL アビテンプレート_有利効果_奥義ゲージUP
ENDSELECT
RETURN RESULT


@固有アビ_92_2(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 消費ＭＰ
#DIM 効果数値
#DIM 効果回数
#DIMS アビ名

IF 基礎BATTLE_STATE:キャラ番号:Lv >= 28
	アビ名 = 陽炎＋＋
	効果数値 = 200
	効果回数 = 5
	消費ＭＰ = 50
ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 16
	アビ名 = 陽炎＋
	効果数値 = 150
	効果回数 = 4
	消費ＭＰ = 35
ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 4
	アビ名 = 陽炎
	効果数値 = 100
	効果回数 = 3
	消費ＭＰ = 20
ELSE
	アビ名 = 
ENDIF

SELECTCASE ARGS
	CASE "アビ名"
		TSTR:コマンド名受渡 = %アビ名%
	CASE "アビ説明文"
		IF 基礎BATTLE_STATE:キャラ番号:Lv >= 16
			詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}<br>自身に{効果回数}回の特殊カウンター効果を与える。
			詳細文文字列受け渡し変数 += @"<br>■特殊カウンター"
			詳細文文字列受け渡し変数 += @"<br>　自身の攻撃力を［10％/累積枠/上限100％］増加させ、自属性の［攻撃力✕{効果数値}％］ダメージを３回与える。"
		ELSE
			詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}<br>自身に{効果回数}回のカウンター［攻撃力✕{効果数値}％］効果を与える。
		ENDIF
		RETURN 消費ＭＰ
	CASE "アビ効果"
		IF 基礎BATTLE_STATE:キャラ番号:Lv >= 16
			CALL アビ対象選択テンプレート_自己のみ
			アビ汎用文字列:バフ・デバフ枠 = 炎鳴流・陽炎
			アビ汎用文字列:バフ・デバフ対象能力 = 特殊反応_被ダメ時
			アビ汎用変数:効果割合 = 効果数値
			アビ汎用変数:持続回数 = 効果回数
			CALL アビテンプレート_有利効果_バフ効果セット
		ELSE
			CALL アビ対象選択テンプレート_自己のみ
			アビ汎用文字列:バフ・デバフ枠 = カウンター
			アビ汎用文字列:バフ・デバフ対象能力 = カウンター
			アビ汎用変数:効果割合 = 効果数値
			アビ汎用変数:持続回数 = 効果回数
			CALL アビテンプレート_有利効果_バフ効果セット
		ENDIF
ENDSELECT
RETURN RESULT

@特殊反応_被ダメ時_炎鳴流・陽炎(攻撃者隊列)
#DIM 攻撃者隊列
#DIM ダメージ回数
#DIM レベル記録

アビテンプレート用_アビ名 = 炎鳴流・陽炎

CALL アビ対象選択テンプレート_自己のみ
アビ汎用文字列:バフ・デバフ枠 = 攻撃力_累積
アビ汎用文字列:バフ・デバフ対象能力 = 攻撃力
アビ汎用変数:効果割合 = 10
アビ汎用変数:持続ターン = -1
アビ汎用変数:累積上限_割合 = 100
CALL アビテンプレート_有利効果_累積バフ効果セット

CALL アビ汎用変数文字列リセット
VARSET アビテンプレート用_対象保存, -1
アビテンプレート用_対象保存:0 = 攻撃者隊列

レベル記録 = 基礎BATTLE_STATE:(BATTLE_STATE:戦闘行動キャラ:0):Lv

IF レベル記録 >= 28
	アビ汎用変数:効果割合 = 200
ELSE
	アビ汎用変数:効果割合 = 150
ENDIF
IF 戦闘中カウント:戦闘行動キャラ:自由枠１ >= 2
	IF レベル記録 >= 32
		アビ汎用変数:効果割合 += 100
	ELSEIF レベル記録 >= 24
		アビ汎用変数:効果割合 += 70
	ELSE
		アビ汎用変数:効果割合 += 50
	ENDIF
ENDIF
ダメージ回数 = 3
IF 戦闘中カウント:戦闘行動キャラ:自由枠１ >= 4
	IF レベル記録 >= 32
		ダメージ回数 += 3
	ELSEIF レベル記録 >= 24
		ダメージ回数 += 2
	ELSE
		ダメージ回数 += 1
	ENDIF
ENDIF
FOR LOCAL, 0, ダメージ回数
	CALL アビテンプレート_ダメージ処理_自属性
NEXT
戦闘中カウント:戦闘行動キャラ:自由枠１ = MIN(戦闘中カウント:戦闘行動キャラ:自由枠１ + 1, 5)
CALL 絶えない闘志効果更新

@固有アビ_92_3(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 消費ＭＰ
#DIMS アビ名
#DIM 効果数値
#DIM 効果数値２
#DIM 効果数値３
#DIM 効果回数

消費ＭＰ = 0
IF 基礎BATTLE_STATE:キャラ番号:Lv >= 32
	アビ名 = 絶えない闘志＋＋
	効果数値 = 50
	効果数値２ = 100
	効果数値３ = 100
	効果回数 = 3
ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 24
	アビ名 = 絶えない闘志＋
	効果数値 = 40
	効果数値２ = 80
	効果数値３ = 70
	効果回数 = 2
ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 16
	アビ名 = 絶えない闘志
	効果数値 = 30
	効果数値２ = 50
	効果数値３ = 50
	効果回数 = 1
ELSE
	アビ名 = 
ENDIF

アビテンプレート用_アビ封印用フラグ = 1

SELECTCASE ARGS
	CASE "アビ名"
		TSTR:コマンド名受渡 = %アビ名%
	CASE "アビ説明文"
		詳細文文字列受け渡し変数 = このアビリティは使用出来ない。
		詳細文文字列受け渡し変数 += @"<br>炎鳴流・陽炎発動時、絶えない闘志Lvを１増加させる。"
		詳細文文字列受け渡し変数 += @"<br>■絶えない闘志効果"
		詳細文文字列受け渡し変数 += @"<br>　Lv1：防御力{効果数値}％UP　Lv2：炎鳴流・陽炎のダメージ倍率+{効果数値３}％　Lv3：発動時ＨＰ回復［回復力✕{効果数値２}％］"
		詳細文文字列受け渡し変数 += @"<br>　Lv4：炎鳴流・陽炎のダメージ回数＋{効果回数}　Lv5：弱体耐性{効果数値３}％UP"
		RETURN 消費ＭＰ
	CASE "アビ効果"
ENDSELECT
RETURN RESULT

@絶えない闘志効果更新
#DIM レベル記録
#DIM 効果数値
#DIM 効果数値２
#DIM 効果数値３
レベル記録 = 基礎BATTLE_STATE:(BATTLE_STATE:戦闘行動キャラ:0):Lv

IF レベル記録 >= 32
	効果数値 = 50
	効果数値２ = 100
	効果数値３ = 100
ELSEIF レベル記録 >= 24
	効果数値 = 40
	効果数値２ = 70
	効果数値３ = 70
ELSEIF レベル記録 >= 16
	効果数値 = 30
	効果数値２ = 50
	効果数値３ = 50
ENDIF

;防御バフ
IF 戦闘中カウント:戦闘行動キャラ:自由枠１ >= 1
	IF バフ存在チェック_枠("炎鳴流・陽炎_防御力", 戦闘行動キャラ) < 0
		CALL アビ対象選択テンプレート_自己のみ
		アビ汎用文字列:バフ・デバフ枠 = 炎鳴流・陽炎_防御力
		アビ汎用文字列:バフ・デバフ対象能力 = 防御力
		アビ汎用変数:効果割合 = 効果数値
		アビ汎用変数:持続ターン = -1
		CALL アビテンプレート_有利効果_バフ効果セット
	ENDIF
ENDIF

;ダメ倍率は炎鳴流・陽炎処理の内部に記載

;全属性耐性バフ
IF 戦闘中カウント:戦闘行動キャラ:自由枠１ >= 3
	IF バフ存在チェック_枠("炎鳴流・陽炎_全耐性", 戦闘行動キャラ) < 0
		CALL アビ汎用変数文字列リセット
		CALL アビ対象選択テンプレート_自己のみ
		アビ汎用変数:効果割合 = 効果数値２
		CALL アビテンプレート_回復処理_MAXでも回復
	ENDIF
ENDIF

;ダメ回数は炎鳴流・陽炎処理の内部に記載

;弱体耐性バフ
IF 戦闘中カウント:戦闘行動キャラ:自由枠１ == 5
	IF バフ存在チェック_枠("炎鳴流・陽炎_弱体耐性", 戦闘行動キャラ) < 0
		CALL アビ汎用変数文字列リセット
		CALL アビ対象選択テンプレート_自己のみ
		アビ汎用文字列:バフ・デバフ枠 = 炎鳴流・陽炎_弱体耐性
		アビ汎用文字列:バフ・デバフ対象能力 = 弱体耐性
		アビ汎用変数:効果割合 = 効果数値３
		アビ汎用変数:持続ターン = -1
		CALL アビテンプレート_有利効果_バフ効果セット
	ENDIF
ENDIF
