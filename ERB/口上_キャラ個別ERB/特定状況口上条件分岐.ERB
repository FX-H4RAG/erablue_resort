;-------------------------------------------------
;@特定状況口上条件分岐
;処女喪失や初対面など、特定の状況に発動する口上の条件分岐をまとめるファイル
;-------------------------------------------------

;-------------------------------------------------
;遭遇時（TARGETを切り替えた時）に条件判定するもの
;-------------------------------------------------
@KOJO_遭遇時EVENT
	;-------------------------------------------------
	;初対面
	;-------------------------------------------------
	IF 初体験日:TARGET:初対面 == 0 && !CFLAG:PLAYER:隠密
		初体験日:TARGET:初対面 = DAY
		CALL メッセージ呼び出し用構文("初対面")
	ENDIF



;-------------------------------------------------
;コマンド実行後に条件判定するもの
;タイミングは射精・絶頂・EXP取得の後、刻印取得やPALAM上昇の前
;-------------------------------------------------
@KOJO_MESSAGE_PALAMCNG_AFTER
	;条件分岐を満たせばメッセージ呼び出し用構文が飛ぶ
	;上から順に呼び出し、条件を満たしたものは全て呼ぶ
	;初回のみの呼び出しなどは「特定状況口上用フラグ」や「初体験日」などの変数を使って記録すること、CFLAGなどは非推奨

	;-------------------------------------------------
	;処女
	;-------------------------------------------------
	IF TCVAR:TARGET:破瓜
		CALL メッセージ呼び出し用構文("処女喪失")
	ENDIF








@メッセージ呼び出し用構文(ARGS)
IF FLAG:汎用文章表示切り替えオプション > 0
	DRAWLINE
	TRYCALLFORM PALAM_MESSAGE_%ARGS%
	PRINTL
ENDIF
IF FLAG:口上表示切り替えオプション <= 0
	DRAWLINE
	RETURN 0
ENDIF

TRYCALLFORM KOJO_EVENT_%ARGS%_{NO:TARGET}
DRAWLINE

;-------------------------------------------------
;ここから汎用メッセージ表示関数
;-------------------------------------------------
@PALAM_MESSAGE_処女喪失
PRINTFORMW %CALLNAME:TARGET%の秘唇から、処女の証である赤い血が垂れ落ちていった……

@PALAM_MESSAGE_初対面
PRINTFORML %CALLNAME:PLAYER%は%CALLNAME:TARGET%と初めて出会った
FORCEWAIT
