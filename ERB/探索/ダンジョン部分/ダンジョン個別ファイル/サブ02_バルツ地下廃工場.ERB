

@ダンジョン初期処理_バルツ地下廃工場
;ダンジョン構造の読み込み
;0でない時、そのマスは存在する
#DIM 深度
#DIM 分岐

ダンジョンマス画像URL_伏せ状態 = 壁_工場
ダンジョン現在位置:0 = 3
ダンジョン現在位置:1 = 8
ダンジョン背景画像 = 背景_工場

;スタート地点は必ず存在
;初期からオープン済みなので3を入れる
;ビット0：存在するか　ビット1：移動できるか　ビット2：マスをオープンするか（ビット１をONにしないと無意味）　ビット3：入れないがオープンする場合に使用
;ビット4以降：自由枠。主に宝箱の開閉やイベント達成フラグなどに使用
IF GETVAR(@"ダンジョン構造配列_%ダンジョン名%:{ダンジョン現在位置:0}:{ダンジョン現在位置:1}") == 0
	SETVAR @"ダンジョン構造配列_%ダンジョン名%:{ダンジョン現在位置:0}:{ダンジョン現在位置:1}", 3
ENDIF

FOR 深度, 1, 100
	LOCAL = 0
	FOR 分岐, 0, 9
		IF GETVAR(@"ダンジョン構造配列_%ダンジョン名%:{深度}:{分岐}")
			;既にマス情報が入ってるなら飛ばす
			LOCAL = 1
			CONTINUE
		ELSEIF ENUMFUNCBEGINSWITH(@"ダンジョンマス情報_%ダンジョン名%_{深度}_{分岐}")
			LOCAL = 1
			SETVAR @"ダンジョン構造配列_%ダンジョン名%:深度:分岐", 1
		ENDIF
	NEXT
	IF LOCAL
		ダンジョン最大深度 = 深度
	ENDIF
NEXT

@ダンジョン解説文_バルツ地下廃工場

詳細文文字列受け渡し変数 = 
詳細文文字列受け渡し変数 += "バルツ地下に存在する廃工場。時折コロッサスの同型機が出てくることがある。<br>"
詳細文文字列受け渡し変数 += "内部には火属性の魔物が住み着いており、腕の立つ騎空士でなければ入るのは危険。<br>"
詳細文文字列受け渡し変数 += "しかし、回収されていない古代の部品など役立つ素材も多く残っている。<br>"

;推奨レベルを返す
RETURN 12



@敵討伐後処理_ダンジョン固有_バルツ地下廃工場(討伐エネミー数)
;ダンジョン内で戦闘した後に呼ばれる関数、主にダンジョンごとのドロップアイテム取得に使用
;まだ敵データはリセットしていないので敵BATTLE_STATEで色々情報は取得可能
#DIM 討伐エネミー数
#DIM ドロップ確率
#DIMS ドロップアイテム

ドロップ確率 = 10 * 討伐エネミー数
ドロップアイテム = 鉄鉱石
CALL ドロップ判定処理(ドロップ確率, ドロップアイテム)

ドロップ確率 = 5 * 討伐エネミー数
ドロップアイテム = 赤熱鉱
CALL ドロップ判定処理(ドロップ確率, ドロップアイテム)

ドロップ確率 = 10 * 討伐エネミー数
ドロップアイテム = 古びた歯車
CALL ドロップ判定処理(ドロップ確率, ドロップアイテム)

ドロップ確率 = 5 * 討伐エネミー数
ドロップアイテム = 星晶の破片
CALL ドロップ判定処理(ドロップ確率, ドロップアイテム)

ドロップ確率 = 1 * 討伐エネミー数
ドロップアイテム = 赤銅の古紋
CALL ドロップ判定処理(ドロップ確率, ドロップアイテム)

;---------------------------------------------------------------------
;マップ構造
;---------------------------------------------------------------------
;右ルートと左ルートに分岐するが、右ルートは封印してあり左ルートを進まないと解除されない
;解除するとそのまま奥に進んでコロッサスがいる
;---------------------------------------------------------------------
@ダンジョンマス情報_バルツ地下廃工場_0_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 0
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
		ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱_開
	CASE "接続先"
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 道を脇に逸れると、鉱石類が雑多に散らばる部屋を見つけた。
			WSTR:(K++) = 資材の仕分けを行う場所だろうか。形がバラバラで規格外のものという印象を受ける。
			WSTR:(K++) = ほとんどは酸化や風化してしまって使い物にならないが……幾つか無事の物を貰っていこう。
			WSTR:(K++) = %CALLNAME:PLAYER%は鉄鉱石を３つ手に入れた！
			CALL 素材入手処理("鉄鉱石", 3)
		ELSE
			KSTR:(K++) = もうめぼしいものはなにもない。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_バルツ地下廃工場_0_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 0
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
		SIF GETBIT(ダンジョン構造配列_名前を亡くした遺跡:マス深度:マス分岐, 4) == 0
			ダンジョンマス画像URL_重ね表示 = 会話アイコン
	CASE "接続先"
	CASE "マスイベント"
		IF GETBIT(ダンジョン構造配列_名前を亡くした遺跡:マス深度:マス分岐, 4)
			KSTR:(K++) = 機械は工場内に冷気を供給している。
		ELSE
			;最初に訪れた時
			WSTR:(K++) = 部屋の中には大型の機械が鎮座している。
			WSTR:(K++) = 壁の全面を覆い尽くし、更に無数のパイプを生やした機械は電源が切れているようだ。_PAGE
			KSTR:(K++) = 機械の電源を入れますか？
			KSTR:(K++) = BUTTON_[入れる]
			KSTR:(K++) = BUTTON_[入れない]
			CALL 知識技能所持者検索("機械知識", 1)
			LOCAL:1 = RESULT
			SIF LOCAL:1 > -1
				KSTR:(K++) = BUTTON_[内部を覗いてみる]
			$LOOP_MESSAGE
			CALL メッセージ欄表示用関数(,,,0)
			BINPUTS
			SELECTCASE RESULTS
				CASE "[入れる]"
					CALL 口上変数初期化
					WSTR:(K++) = %CALLNAME:PLAYER%がスイッチを入れると、轟音を立てながら機械が起動する。
					WSTR:(K++) = 機械からは強い冷気が吹き出し、君たちを直撃する！
					WSTR:(K++) = 全員のＭＰが５０減少した！
					CALL メッセージ欄表示用関数(,,,0)
					CALL 口上変数初期化
					FOR LOCAL, 0, 4
						SIF BATTLE_STATE:LOCAL:0 < 1
							CONTINUE
						BATTLE_STATE:LOCAL:ＭＰ = MAX(BATTLE_STATE:LOCAL:ＭＰ - 50, 0)
					NEXT
					WSTR:(K++) = 凍死しかねない寒さに、君たちは慌てて部屋の外へと逃げ出した。
					WSTR:(K++) = どうやら機械の設定がおかしくなっていたらしい。
					WSTR:(K++) = 機械知識があれば正しく動かせたかもしれないが……ともあれ、これで移動出来る範囲が増えたはずだ。
					SETBIT ダンジョン構造配列_名前を亡くした遺跡:マス深度:マス分岐, 4
				CASE "[入れない]"
					CALL 口上変数初期化
					WSTR:(K++) = 一旦そのままにしておこう。
				CASE "[内部を覗いてみる]"
					WSTR:(K++) = 機械の構造を覗いてみる。
					WSTR:(K++) = どうやら内部のギアを組み替えることで、冷気の噴出先を設定することが出来るようだ。
					WSTR:(K++) = 今の設定では、この部屋そのものにも冷気が吹き出してしまうだろう。
					WSTR:(K++) = %CALLNAME:(LOCAL:1)%はギアを組み換え、この部屋を対象外に設定し機械を動かした。_PAGE
					WSTR:(K++) = …………どうやら正しく動いているようだ。
					WSTR:(K++) = これで移動出来る範囲が増えただろう。今まで通れなかった場所に行ってみよう。
					SETBIT ダンジョン構造配列_名前を亡くした遺跡:マス深度:マス分岐, 4
				CASEELSE
					CLEARLINE 1
					GOTO LOOP_MESSAGE
			ENDSELECT
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_バルツ地下廃工場_1_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 1
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
		ダンジョンマス画像URL_重ね表示 = 上アイコン
	CASE "接続先"
	CASE "マスイベント"
		;13_8へ
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = ベルトコンベアは奥へと続いている。
			WSTR:(K++) = 奥からは金属製のものが動く音が、遠くに聞こえる……。
			WSTR:(K++) = 暴走機械はまだ出てくるようだ。用心して進もう
			;移動直後はマスイベント発動しないので、移動先のルート開放をここで行う
			CALL 接続ルート全開放処理(13, 8)
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
		ENDIF
		ダンジョン現在位置:0 = 13
		ダンジョン現在位置:1 = 8
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_バルツ地下廃工場_1_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 1
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "0_2")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "1_0")
	CASE "マスイベント"
		IF GETBIT(ダンジョン構造配列_バルツ地下廃工場:マス深度:マス分岐, 4) == 0
			;最初に訪れた時
			WSTR:(K++) = ベルトコンベアの先には、荷物を右から左へ、左から右へと移動させている機械たちがいた。
			WSTR:(K++) = どうやら暴走し、無意味なことをずっと繰り返してしまっているようだ。
			WSTR:(K++) = 君たちが姿を見せると、暴走機械たちは新しい仕事を見つけたと言わんばかりに襲いかかってくる！
			CALL メッセージ欄表示用関数(,,,0)
			敵BATTLE_STATE_STR:0:エネミー名 = Lv12_暴走機械B
			敵BATTLE_STATE_STR:2:エネミー名 = Lv12_暴走機械B
			敵BATTLE_STATE_STR:4:エネミー名 = Lv12_暴走機械B
			敵BATTLE_STATE_STR:3:エネミー名 = Lv12_暴走機械A
			CALL 雑魚敵遭遇汎用処理
			IF RESULT == 0
				;勝利時のみ先へ進む
				CALL 口上変数初期化
				WSTR:(K++) = %CALLNAME:PLAYER%たちは暴走機械を鎮圧した。
				WSTR:(K++) = 運んでいた荷物はただの瓦礫で、特に使えそうなものはない。
				WSTR:(K++) = むしろ暴走機械から鉄鉱石や赤熱鉱を剥ぎ取る方が役立ちそうだ。
				WSTR:(K++) = 倒した際に無事な鉱石を見かけたら回収していこう。
				CALL メッセージ欄表示用関数(,,,0)
				CALL 接続ルート全開放処理(マス深度, マス分岐)
				SETBIT ダンジョン構造配列_バルツ地下廃工場:マス深度:マス分岐, 4
			ENDIF
		ELSE
			敵BATTLE_STATE_STR:0:エネミー名 = Lv12_暴走機械B
			敵BATTLE_STATE_STR:2:エネミー名 = Lv12_暴走機械B
			敵BATTLE_STATE_STR:4:エネミー名 = Lv12_暴走機械B
			敵BATTLE_STATE_STR:3:エネミー名 = Lv12_暴走機械A
			CALL 雑魚敵繰り返し戦闘処理
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_バルツ地下廃工場_1_5(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 1
マス分岐 = 5

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "1_2")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 通路を進むと、壊れたベルトコンベアを見つけた。
			WSTR:(K++) = どうやらこの奥が資材の仕分け場所になっており、このベルトコンベアを通じて資材を運んでいく仕組みらしい。
			WSTR:(K++) = この先に進めば残った鉱石類を拾えるかもしれない。
			WSTR:(K++) = 使えるアイテムを見逃さないように進もう。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 壊れたベルトコンベアが続いている。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_バルツ地下廃工場_2_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 2
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
		ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱_開
	CASE "接続先"
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 魔力が滞留し、星晶になって部屋の壁で結晶化している。
			WSTR:(K++) = 魔力の多い土地でたまに見かける現象だが、手つかずで残っているのを見つけるのは珍しい。
			WSTR:(K++) = 大きい欠片を少し貰っていこう。_PAGE
			WSTR:(K++) = %CALLNAME:PLAYER%は星晶の欠片を１つ手に入れた！
			CALL 素材入手処理("星晶の欠片", 1)
		ELSE
			KSTR:(K++) = 壁を結晶化した星晶がうっすらと覆っている。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_バルツ地下廃工場_2_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 2
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
		SIF GETBIT(ダンジョン構造配列_名前を亡くした遺跡:マス深度:マス分岐, 4) == 0
			ダンジョンマス画像URL_重ね表示 = 会話アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "0_7")
	CASE "マスイベント"
		IF GETBIT(ダンジョン構造配列_名前を亡くした遺跡:マス深度:マス分岐, 4) == 0 && GETBIT(ダンジョン構造配列_名前を亡くした遺跡:10:7, 4)
			;開くパターン
			WSTR:(K++) = %CALLNAME:PLAYER%は手に入れたカードキーで扉を開いた。
			SETBIT ダンジョン構造配列_名前を亡くした遺跡:マス深度:マス分岐, 4
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSEIF GETBIT(ダンジョン構造配列_名前を亡くした遺跡:マス深度:マス分岐, 4)
			KSTR:(K++) = 既にカードキーの扉は開いている。
		ELSEIF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 道の先には、つるりとした扉が道を塞いでいる。
			WSTR:(K++) = 扉には持ち手がなく、開こうとしてもびくともしない。
			WSTR:(K++) = 扉の横には細長い穴が一つ開いていた。
			WSTR:(K++) = これが鍵穴だろうか……？　どこかで板状の物を見つけたら試してみよう。
		ELSE
			KSTR:(K++) = 扉は開きそうにない。
			KSTR:(K++) = 扉の横には細長い穴が一つ開いている。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_バルツ地下廃工場_3_5(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 3
マス分岐 = 5

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "1_5")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "5_5")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = この工場は古代に星の民が作り、ドラフが反乱の末に奪った施設らしい。
			WSTR:(K++) = 年数が経っているにも関わらず通路や壁に目立った劣化が無いのは流石星の民と言ったところか。
			WSTR:(K++) = しかし流石に紙類はその限りではないようだ。
			WSTR:(K++) = 壁には「工場内施設図」と刻印されているが、その下に貼られていた紙はボロボロに崩れてしまっている。
			WSTR:(K++) = これではまともに読み取ることは出来ないだろう。自らの足で探索するしかなさそうだ。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 工場のマップはボロボロにくずれてしまっている。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_バルツ地下廃工場_3_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 3
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "2_7")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "3_5")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "4_7")
	CASE "マスイベント"
		IF GETBIT(ダンジョン構造配列_バルツ地下廃工場:マス深度:マス分岐, 4) == 0
			;最初に訪れた時
			WSTR:(K++) = 工場の中に入ると、大きな警報音が響き渡る！
			WSTR:(K++) = どうやら工場の機械が%CALLNAME:PLAYER%たちを侵入者と見なしたようだ。
			WSTR:(K++) = 問答無用で暴走した機械が襲いかかってくる！
			CALL メッセージ欄表示用関数(,,,0)
			敵BATTLE_STATE_STR:0:エネミー名 = Lv12_暴走機械A
			敵BATTLE_STATE_STR:2:エネミー名 = Lv12_暴走機械A
			敵BATTLE_STATE_STR:5:エネミー名 = Lv12_暴走機械B
			敵BATTLE_STATE_STR:7:エネミー名 = Lv12_暴走機械B
			CALL 雑魚敵遭遇汎用処理
			IF RESULT == 0
				;勝利時のみ先へ進む
				CALL 口上変数初期化
				WSTR:(K++) = %CALLNAME:PLAYER%たちは暴走機械を鎮圧した。
				WSTR:(K++) = 長い時間が経っても動き続けることは脅威だが、対処出来ない程ではないようだ。
				WSTR:(K++) = しかし油断が出来るほどでもない。警戒しながら進もう。
				CALL メッセージ欄表示用関数(,,,0)
				CALL 接続ルート全開放処理(マス深度, マス分岐)
				SETBIT ダンジョン構造配列_バルツ地下廃工場:マス深度:マス分岐, 4
			ENDIF
		ELSE
			敵BATTLE_STATE_STR:0:エネミー名 = Lv12_暴走機械A
			敵BATTLE_STATE_STR:2:エネミー名 = Lv12_暴走機械A
			敵BATTLE_STATE_STR:5:エネミー名 = Lv12_暴走機械B
			敵BATTLE_STATE_STR:7:エネミー名 = Lv12_暴走機械B
			CALL 雑魚敵繰り返し戦闘処理
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_バルツ地下廃工場_3_8(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 3
マス分岐 = 8

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "3_7")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = %CALLNAME:PLAYER%はバルツ地下の廃工場へと足を踏み入れた。
			WSTR:(K++) = 以前に起こった事件以来、この工場からたまに機械型星晶獣が出現するらしい。
			WSTR:(K++) = 普段は腕の立つ騎空士に対処を依頼しているようだが、今回はよろず屋の伝手で依頼に割り込ませてもらった。_PAGE
			IF 鍛冶場作成許可フラグ
				WSTR:(K++) = ここにいる星晶獣は、古代のドラフが開発したと聞く。
				WSTR:(K++) = ならば乗機開発に役立つ知識や素材が残っていても不思議ではない。
				WSTR:(K++) = 見逃さないよう、くまなく探索していこう。
			ELSE
				WSTR:(K++) = ここにいる星晶獣は、古代のドラフが開発したと聞く。
				WSTR:(K++) = 鍛冶・開発という概念に非常に近しい存在だ。鍛冶場の作成にはぴったりだろう。
			ENDIF
			WSTR:(K++) = %CALLNAME:PLAYER%は無骨な鉄と火に囲まれた工場へと足を踏み入れる。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 無骨な鉄と火が目立つ廃工場だ。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_バルツ地下廃工場_4_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 4
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
		ダンジョンマス画像URL_重ね表示 = 上アイコン
	CASE "接続先"
	CASE "マスイベント"
		;17_8へ
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = ところどころが溶けた通路はまだ先に続いている。
			WSTR:(K++) = 火の魔力は未だ濃密に周囲を満たしている。
			WSTR:(K++) = この先ではやはり、火の精霊が多く出てくるようだ。気をつけて進もう。
			;移動直後はマスイベント発動しないので、移動先のルート開放をここで行う
			CALL 接続ルート全開放処理(17, 8)
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
		ENDIF
		ダンジョン現在位置:0 = 17
		ダンジョン現在位置:1 = 8
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_バルツ地下廃工場_4_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 4
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "4_0")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "2_3")
	CASE "マスイベント"
		IF GETBIT(ダンジョン構造配列_バルツ地下廃工場:マス深度:マス分岐, 4) == 0
			;最初に訪れた時
			WSTR:(K++) = ;炎の精霊的な
			WSTR:(K++) = 通路の先に動く光が見える。
			WSTR:(K++) = それは赤く揺れ動く炎のように見えるが、しかし自らの意思で動いているようにも思える。
			WSTR:(K++) = …………あれは火の精霊だ！　住処に侵入した%CALLNAME:PLAYER%たちに襲いかかってくる！
			CALL メッセージ欄表示用関数(,,,0)
			敵BATTLE_STATE_STR:0:エネミー名 = Lv13_火のエレメンタル
			敵BATTLE_STATE_STR:3:エネミー名 = Lv13_火のエレメンタル
			敵BATTLE_STATE_STR:4:エネミー名 = Lv13_火のエレメンタル
			CALL 雑魚敵遭遇汎用処理
			IF RESULT == 0
				;勝利時のみ先へ進む
				CALL 口上変数初期化
				WSTR:(K++) = なんとか火の精霊たちを撃退することに成功した。
				WSTR:(K++) = このタイプの精霊は比較的防御が薄い代わりに攻撃力に長けている。
				WSTR:(K++) = 防御や回復、攻撃デバフなどの手段を用意すると安全に戦えるだろう。
				WSTR:(K++) = %CALLNAME:PLAYER%たちは更に先の通路に進む。
				CALL メッセージ欄表示用関数(,,,0)
				CALL 接続ルート全開放処理(マス深度, マス分岐)
				SETBIT ダンジョン構造配列_バルツ地下廃工場:マス深度:マス分岐, 4
			ENDIF
		ELSE
			敵BATTLE_STATE_STR:0:エネミー名 = Lv13_火のエレメンタル
			敵BATTLE_STATE_STR:3:エネミー名 = Lv13_火のエレメンタル
			敵BATTLE_STATE_STR:4:エネミー名 = Lv13_火のエレメンタル
			CALL 雑魚敵繰り返し戦闘処理
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_バルツ地下廃工場_4_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 4
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
		ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱_開
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "6_7")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 通路横の部屋に入ってみると、そこはロッカールームのようだった。
			WSTR:(K++) = 工場でかつて働いていた者たちが着替えるための場所らしい。
			WSTR:(K++) = 調べてみると、一着の作業着のようなものが見つかる。_PAGE
			WSTR:(K++) = これも星の民の技術で作られたものだろうか。長い時間放置されていたはずなのに損傷は見当たらない。
			WSTR:(K++) = 調べてみれば似たような服が作れるかもしれない。帰ったら試してみよう。
			WSTR:(K++) = 衣装「メカニックの服」を手に入れた！
			CALL 汎用衣装取得処理("メカニックの服")
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = もうめぼしいものはなにもない。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_バルツ地下廃工場_5_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 5
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "4_3")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "6_3")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = ;罠マス。機械知識か魔法知識がないと滞留してる火にあぶられてHPダメージ
			WSTR:(K++) = 通路を進むと、ほんのりと気温が高くなったような気がした。
			CALL 知識技能所持者検索("機械知識", 1)
			LOCAL = RESULT
			IF LOCAL < 0
				CALL 知識技能所持者検索("魔法知識", 1)
				LOCAL = RESULT
			ENDIF
			IF LOCAL > -1
				WSTR:(K++) = %CALLNAME:LOCAL%は少し先の天井がおかしいと気づいた。
				WSTR:(K++) = 天井にはスリット状の穴が幾つも空いた換気口のようなものがある。
				KSTR:(K++) = 試しにそこへ向けて石ころを投げてみると、換気口から熱風が凄い勢いで吹き出した！！_PAGE
				WSTR:(K++) = どうやら火の魔力がダクトに溜まっていて、刺激と同時に吹き出したようだった。
				WSTR:(K++) = %CALLNAME:PLAYER%たちは油断していては危ないと、気を引き締めて探索を再開する。
			ELSE
				WSTR:(K++) = %CALLNAME:PLAYER%たちが不思議に思いながら通路を進むと、突然天井から熱風が吹き出してきた！
				WSTR:(K++) = 全員のＨＰが１５０減少した！
				CALL メッセージ欄表示用関数(,,,0)
				CALL 口上変数初期化
				FOR LOCAL, 0, 4
					SIF BATTLE_STATE:LOCAL:0 < 1
						CONTINUE
					BATTLE_STATE:LOCAL:ＨＰ = MAX(BATTLE_STATE:LOCAL:ＨＰ - 150, 0)
				NEXT
				WSTR:(K++) = どうやら火の魔力が換気口の奥に滞留し、通路を通った振動で刺激され吹き出してきたらしい。
				WSTR:(K++) = 機械か魔法の知識があれば防げたかもしれないが……。
				WSTR:(K++) = %CALLNAME:PLAYER%たちは火傷へ応急手当をしてから探索を再開する。
			ENDIF
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = もう熱気は吹き出してこないようだ。
			CALL メッセージ欄表示用関数(,,,0)
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_バルツ地下廃工場_5_5(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 5
マス分岐 = 5

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "5_3")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = ;ドアがぶっ壊れてる。融解してる。火の魔力の暴走で廃棄されたよ的なもの
			WSTR:(K++) = 通路を進むと、壁と床が歪な形に変形していた。
			WSTR:(K++) = 頑丈に作られただろう扉もどろどろに融解した形で固まっている。
			WSTR:(K++) = どうにも、想定されていない超高熱に晒されたように見える……。_PAGE
			WSTR:(K++) = 古代に起きた事故の痕跡だろうか？　ともあれ、この先には火の魔力が強く渦巻いている。
			WSTR:(K++) = 火の精霊が多く出現するかもしれない。水属性の耳飾りを準備しておくと楽になるだろう。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 壁と床が歪な形に変形している。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_バルツ地下廃工場_6_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 6
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
		ダンジョンマス画像URL_重ね表示 = 会話アイコン
	CASE "接続先"
	CASE "マスイベント"
		;えっちイベ
		IF ダンジョン内一時変数:1
		ELSE
			CALL ダンジョンハプニング基本処理()
			IF RESULT
				ダンジョン内一時変数:1 = 1
			ENDIF
			CALL 口上変数初期化
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_バルツ地下廃工場_6_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 6
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "6_1")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 融解した壁や床がずっと続いている。
			WSTR:(K++) = 既に固まっているため進むことに支障はないが、どんな火力があればここまで破壊されるのだろうか。
			WSTR:(K++) = もうこの工場に動力は繋がっていないため、同じ事故が起きることが無いとはいえ……
			WSTR:(K++) = あまり長居したい空間じゃないな、と%CALLNAME:PLAYER%は思った。
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 融解した壁や床がずっと続いている。
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_バルツ地下廃工場_6_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 6
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
		IF ダンジョン内一時変数:0 == 0
			ダンジョンマス画像URL_重ね表示 = 回復アビ
		ENDIF
	CASE "接続先"
	CASE "マスイベント"
		IF ダンジョン内一時変数:0
		ELSE
			KSTR:(K++) = ロッカールームの奥に仮眠室があった。施錠可能で安全そうだ。
			KSTR:(K++) = 少し休憩していきますか？
			KSTR:(K++) = （PTメンバー全回復・ダンジョンを一度出るまで消滅）
			KSTR:(K++) = BUTTON_[はい]
			KSTR:(K++) = BUTTON_[いいえ]
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			$LOOP_MESSAGE
			INPUTS
			SELECTCASE RESULTS
				CASE "[はい]"
					KSTR:(K++) = 君たちは仮眠室で十分な休息を取り、体力を回復した！
					CALL メッセージ欄表示用関数()
					ダンジョン内一時変数:0 = 1
					FOR LOCAL, 0, 4
						IF BATTLE_STATE:LOCAL:0 < 1
							BREAK
						ENDIF
						BATTLE_STATE:LOCAL:ＨＰ = BATTLE_STATE:LOCAL:最大ＨＰ
						BATTLE_STATE:LOCAL:ＭＰ = BATTLE_STATE:LOCAL:最大ＭＰ
					NEXT
				CASE "[いいえ]"
					KSTR:(K++) = まだ休憩するほど疲れてはいない。先に進もう。
					CALL メッセージ欄表示用関数()
				CASEELSE
					CLEARLINE 1
					GOTO LOOP_MESSAGE
			ENDSELECT
		ENDIF
		CALL 画面再描画
ENDSELECT



@ダンジョンマス情報_バルツ地下廃工場_8_5(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 8
マス分岐 = 5

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
	CASE "接続先"
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = ;冷却装置の情報、入り口近くにあるよ！
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_バルツ地下廃工場_8_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 8
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
		ダンジョンマス画像URL_重ね表示 = 会話アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "8_5")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = ;扉、カードキー
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT



@ダンジョンマス情報_バルツ地下廃工場_10_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 10
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
		ダンジョンマス画像URL_重ね表示 = 会話アイコン
	CASE "接続先"
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = ;ベルトコンベアを動かすスイッチ、１３－５を開けてると動かせる。色々変化する
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_バルツ地下廃工場_10_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 10
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
		ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱_開
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "11_3")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "10_5")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "10_1")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = ;ベルトコンベア後に来ると魔石がたくさんある
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_バルツ地下廃工場_10_5(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 10
マス分岐 = 5

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
		ダンジョンマス画像URL_重ね表示 = 会話アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "10_3")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "10_7")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = ;ベルトコンベア後だと図面が出てくる。回収すると乗機「コロッサス・レプリカ」ゲット
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_バルツ地下廃工場_10_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 10
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン_赤
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "10_5")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "12_7")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "8_7")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = ;デカい機械が陣取っている、倒すとカードキー
			SETBIT ダンジョン構造配列_名前を亡くした遺跡:マス深度:マス分岐, 4
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_バルツ地下廃工場_11_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 11
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "13_3")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "10_3")
	CASE "マスイベント"
		IF GETBIT(ダンジョン構造配列_バルツ地下廃工場:マス深度:マス分岐, 4) == 0
			;最初に訪れた時
			WSTR:(K++) = ;ベルトコンベア後にエネミー
			CALL メッセージ欄表示用関数(,,,0)
			敵BATTLE_STATE_STR:0:エネミー名 = 
			CALL 雑魚敵遭遇汎用処理
			IF RESULT == 0
				;勝利時のみ先へ進む
				CALL 口上変数初期化
				WSTR:(K++) = 
				CALL メッセージ欄表示用関数(,,,0)
				CALL 接続ルート全開放処理(マス深度, マス分岐)
				SETBIT ダンジョン構造配列_バルツ地下廃工場:マス深度:マス分岐, 4
			ENDIF
		ELSE
			敵BATTLE_STATE_STR:0:エネミー名 = 
			CALL 雑魚敵繰り返し戦闘処理
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_バルツ地下廃工場_12_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 12
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "10_7")
	CASE "マスイベント"
		IF GETBIT(ダンジョン構造配列_バルツ地下廃工場:マス深度:マス分岐, 4) == 0
			;最初に訪れた時
			WSTR:(K++) = ;暴走機械
			CALL メッセージ欄表示用関数(,,,0)
			敵BATTLE_STATE_STR:0:エネミー名 = 
			CALL 雑魚敵遭遇汎用処理
			IF RESULT == 0
				;勝利時のみ先へ進む
				CALL 口上変数初期化
				WSTR:(K++) = 
				CALL メッセージ欄表示用関数(,,,0)
				CALL 接続ルート全開放処理(マス深度, マス分岐)
				SETBIT ダンジョン構造配列_バルツ地下廃工場:マス深度:マス分岐, 4
			ENDIF
		ELSE
			敵BATTLE_STATE_STR:0:エネミー名 = 
			CALL 雑魚敵繰り返し戦闘処理
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_バルツ地下廃工場_13_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 13
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "11_3")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "13_5")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = ;ベルトコンベア後だと図面っぽいのがあるけど焼けたり古くてなんもわからん
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_バルツ地下廃工場_13_5(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 13
マス分岐 = 5

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
		ダンジョンマス画像URL_重ね表示 = 会話アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "15_5")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "13_3")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = ;カードキー扉
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_バルツ地下廃工場_13_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 13
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "13_5")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "12_7")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = ;ベルトコンベアは続いてるよ、でも上の扉しまってて動かないよ
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_バルツ地下廃工場_13_8(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 13
マス分岐 = 8

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
		ダンジョンマス画像URL_重ね表示 = 左アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "13_7")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = ;下へ移動、１－０へ
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT



@ダンジョンマス情報_バルツ地下廃工場_15_5(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 15
マス分岐 = 5

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
		ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱_開
	CASE "接続先"
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = ;大量の金属系原料
		;最初の乗機が作れるくらい
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_バルツ地下廃工場_16_5(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 16
マス分岐 = 5

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
	CASE "接続先"
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = ;瓦礫で崩れてるが向こう側から原料を受け取るルートのようだ
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_バルツ地下廃工場_17_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 17
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "18_1")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = ;この先に強敵いるよ警告
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_バルツ地下廃工場_17_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 17
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "17_1")
	CASE "マスイベント"
		IF GETBIT(ダンジョン構造配列_バルツ地下廃工場:マス深度:マス分岐, 4) == 0
			;最初に訪れた時
			WSTR:(K++) = ;炎精霊
			CALL メッセージ欄表示用関数(,,,0)
			敵BATTLE_STATE_STR:0:エネミー名 = 
			CALL 雑魚敵遭遇汎用処理
			IF RESULT == 0
				;勝利時のみ先へ進む
				CALL 口上変数初期化
				WSTR:(K++) = 
				CALL メッセージ欄表示用関数(,,,0)
				CALL 接続ルート全開放処理(マス深度, マス分岐)
				SETBIT ダンジョン構造配列_バルツ地下廃工場:マス深度:マス分岐, 4
			ENDIF
		ELSE
			敵BATTLE_STATE_STR:0:エネミー名 = 
			CALL 雑魚敵繰り返し戦闘処理
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_バルツ地下廃工場_17_5(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 17
マス分岐 = 5

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
		ダンジョンマス画像URL_重ね表示 = 会話アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "17_3")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "20_5")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "16_5")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = ;溶岩と熱気が溢れて進むことが出来ない、冷却装置で進行可能に
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_バルツ地下廃工場_17_8(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 17
マス分岐 = 8

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
		ダンジョンマス画像URL_重ね表示 = 左アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "17_5")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = ;下へ移動、４－０へ
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_バルツ地下廃工場_18_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 18
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン_赤
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "18_4")
	CASE "マスイベント"
		IF GETBIT(ダンジョン構造配列_バルツ地下廃工場:マス深度:マス分岐, 4) == 0
			;最初に訪れた時
			WSTR:(K++) = ;強敵、炎の巨大精霊。勝利で指輪と耳飾りGET
			CALL メッセージ欄表示用関数(,,,0)
			敵BATTLE_STATE_STR:0:エネミー名 = 
			CALL 雑魚敵遭遇汎用処理
			IF RESULT == 0
				;勝利時のみ先へ進む
				CALL 口上変数初期化
				WSTR:(K++) = 
				CALL メッセージ欄表示用関数(,,,0)
				CALL 接続ルート全開放処理(マス深度, マス分岐)
				SETBIT ダンジョン構造配列_バルツ地下廃工場:マス深度:マス分岐, 4
			ENDIF
		ELSE
			敵BATTLE_STATE_STR:0:エネミー名 = 
			CALL 雑魚敵繰り返し戦闘処理
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_バルツ地下廃工場_18_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 18
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
		ダンジョンマス画像URL_重ね表示 = 会話アイコン
	CASE "接続先"
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = ;精霊を使役して門番させてた存在をリゾートに誘う。暫定ヘカテー
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT



@ダンジョンマス情報_バルツ地下廃工場_20_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 20
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "22_1")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = ;道めっちゃ広いぜ！　コロッサスの格納庫かな　でも道溶けてんなぁ
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_バルツ地下廃工場_20_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 20
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "20_1")
	CASE "マスイベント"
		IF GETBIT(ダンジョン構造配列_バルツ地下廃工場:マス深度:マス分岐, 4) == 0
			;最初に訪れた時
			WSTR:(K++) = ;炎精霊
			CALL メッセージ欄表示用関数(,,,0)
			敵BATTLE_STATE_STR:0:エネミー名 = 
			CALL 雑魚敵遭遇汎用処理
			IF RESULT == 0
				;勝利時のみ先へ進む
				CALL 口上変数初期化
				WSTR:(K++) = 
				CALL メッセージ欄表示用関数(,,,0)
				CALL 接続ルート全開放処理(マス深度, マス分岐)
				SETBIT ダンジョン構造配列_バルツ地下廃工場:マス深度:マス分岐, 4
			ENDIF
		ELSE
			敵BATTLE_STATE_STR:0:エネミー名 = 
			CALL 雑魚敵繰り返し戦闘処理
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_バルツ地下廃工場_20_5(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 20
マス分岐 = 5

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "20_3")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "20_7")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = ;冷却装置済みでもまだ熱いぜ！
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_バルツ地下廃工場_20_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 20
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "22_7")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = ;こっちはあんま熱くないぜ！設計室かな？
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT



@ダンジョンマス情報_バルツ地下廃工場_22_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 22
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
		ダンジョンマス画像URL_重ね表示 = 会話アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "22_3")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "23_1")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = ;罠、撤退時に仕掛けていたブービートラップ。機械知識で看破
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_バルツ地下廃工場_22_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 22
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "23_3")
	CASE "マスイベント"
		IF GETBIT(ダンジョン構造配列_バルツ地下廃工場:マス深度:マス分岐, 4) == 0
			;最初に訪れた時
			WSTR:(K++) = ;炎精霊
			CALL メッセージ欄表示用関数(,,,0)
			敵BATTLE_STATE_STR:0:エネミー名 = 
			CALL 雑魚敵遭遇汎用処理
			IF RESULT == 0
				;勝利時のみ先へ進む
				CALL 口上変数初期化
				WSTR:(K++) = 
				CALL メッセージ欄表示用関数(,,,0)
				CALL 接続ルート全開放処理(マス深度, マス分岐)
				SETBIT ダンジョン構造配列_バルツ地下廃工場:マス深度:マス分岐, 4
			ENDIF
		ELSE
			敵BATTLE_STATE_STR:0:エネミー名 = 
			CALL 雑魚敵繰り返し戦闘処理
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_バルツ地下廃工場_22_6(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 22
マス分岐 = 6

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
		ダンジョンマス画像URL_重ね表示 = 会話アイコン
	CASE "接続先"
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = ;えっちいべ
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_バルツ地下廃工場_22_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 22
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "22_6")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "23_7")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = ;脱出時に回収したのかめぼしいもんはなさそう
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_バルツ地下廃工場_23_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 23
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
		ダンジョンマス画像URL_重ね表示 = 右アイコン
	CASE "接続先"
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = ;右移動、２４－１へ
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_バルツ地下廃工場_23_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 23
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
	CASE "接続先"
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = ;外に射出するための発射口、当然瓦礫で埋まってる
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_バルツ地下廃工場_23_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 23
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
		ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱_開
	CASE "接続先"
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = ;回収しきれなかった冊子などが残ってた、売ったら結構金になるぞ。５万ルピ入手
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_バルツ地下廃工場_24_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 24
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
		ダンジョンマス画像URL_重ね表示 = 左アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "26_1")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = ;左へ移動、２３－１へ
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_バルツ地下廃工場_25_5(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 25
マス分岐 = 5

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン_赤
	CASE "接続先"
	CASE "マスイベント"
		IF GETBIT(ダンジョン構造配列_バルツ地下廃工場:マス深度:マス分岐, 4) == 0
			;最初に訪れた時
			WSTR:(K++) = ;コロッサスボス
			CALL メッセージ欄表示用関数(,,,0)
			敵BATTLE_STATE_STR:0:エネミー名 = 
			CALL 雑魚敵遭遇汎用処理
			IF RESULT == 0
				;勝利時のみ先へ進む
				CALL 口上変数初期化
				WSTR:(K++) = 
				CALL メッセージ欄表示用関数(,,,0)
				CALL 接続ルート全開放処理(マス深度, マス分岐)
				SETBIT ダンジョン構造配列_バルツ地下廃工場:マス深度:マス分岐, 4
			ENDIF
		ELSE
			敵BATTLE_STATE_STR:0:エネミー名 = 
			CALL 雑魚敵繰り返し戦闘処理
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_バルツ地下廃工場_25_8(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 25
マス分岐 = 8

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "25_5")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = ;この先にコロッサスいそうみたいな
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_バルツ地下廃工場_26_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 26
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "26_4")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "28_1")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = ;炎の精霊が壊れたコロッサスに集っている
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_バルツ地下廃工場_26_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 26
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "28_4")
	CASE "マスイベント"
		IF GETBIT(ダンジョン構造配列_バルツ地下廃工場:マス深度:マス分岐, 4) == 0
			;最初に訪れた時
			WSTR:(K++) = ;炎精霊たくさん
			CALL メッセージ欄表示用関数(,,,0)
			敵BATTLE_STATE_STR:0:エネミー名 = 
			CALL 雑魚敵遭遇汎用処理
			IF RESULT == 0
				;勝利時のみ先へ進む
				CALL 口上変数初期化
				WSTR:(K++) = 
				CALL メッセージ欄表示用関数(,,,0)
				CALL 接続ルート全開放処理(マス深度, マス分岐)
				SETBIT ダンジョン構造配列_バルツ地下廃工場:マス深度:マス分岐, 4
			ENDIF
		ELSE
			敵BATTLE_STATE_STR:0:エネミー名 = 
			CALL 雑魚敵繰り返し戦闘処理
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_バルツ地下廃工場_27_6(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 27
マス分岐 = 6

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "27_7")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = ;どれもこれも壊れてて使い物にならねぇ！
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_バルツ地下廃工場_27_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 27
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
		ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱_開
	CASE "接続先"
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = ;載せ替え用兵器
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_バルツ地下廃工場_28_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 28
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
		ダンジョンマス画像URL_重ね表示 = 会話アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "28_3")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = ;壊れた機体めっちゃ多いね
		;機械知識で罠、兵器が暴発してHPダメージ
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_バルツ地下廃工場_28_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 28
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "31_3")
	CASE "マスイベント"
		IF GETBIT(ダンジョン構造配列_バルツ地下廃工場:マス深度:マス分岐, 4) == 0
			;最初に訪れた時
			WSTR:(K++) = ;武装と炎精霊の共生体
			CALL メッセージ欄表示用関数(,,,0)
			敵BATTLE_STATE_STR:0:エネミー名 = 
			CALL 雑魚敵遭遇汎用処理
			IF RESULT == 0
				;勝利時のみ先へ進む
				CALL 口上変数初期化
				WSTR:(K++) = 
				CALL メッセージ欄表示用関数(,,,0)
				CALL 接続ルート全開放処理(マス深度, マス分岐)
				SETBIT ダンジョン構造配列_バルツ地下廃工場:マス深度:マス分岐, 4
			ENDIF
		ELSE
			敵BATTLE_STATE_STR:0:エネミー名 = 
			CALL 雑魚敵繰り返し戦闘処理
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_バルツ地下廃工場_28_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 28
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "28_6")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "30_4")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = ;通路の床があっちゅい
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_バルツ地下廃工場_28_6(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 28
マス分岐 = 6

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "27_6")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "30_6")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = ;兵器管理庫と書かれている
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT



@ダンジョンマス情報_バルツ地下廃工場_30_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 30
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
		ダンジョンマス画像URL_重ね表示 = 会話アイコン
	CASE "接続先"
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = ;シャッターの開閉ボタン
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_バルツ地下廃工場_30_6(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 30
マス分岐 = 6

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "30_7")
	CASE "マスイベント"
		IF GETBIT(ダンジョン構造配列_バルツ地下廃工場:マス深度:マス分岐, 4) == 0
			;最初に訪れた時
			WSTR:(K++) = ;武装と炎精霊の共生体
			CALL メッセージ欄表示用関数(,,,0)
			敵BATTLE_STATE_STR:0:エネミー名 = 
			CALL 雑魚敵遭遇汎用処理
			IF RESULT == 0
				;勝利時のみ先へ進む
				CALL 口上変数初期化
				WSTR:(K++) = 
				CALL メッセージ欄表示用関数(,,,0)
				CALL 接続ルート全開放処理(マス深度, マス分岐)
				SETBIT ダンジョン構造配列_バルツ地下廃工場:マス深度:マス分岐, 4
			ENDIF
		ELSE
			敵BATTLE_STATE_STR:0:エネミー名 = 
			CALL 雑魚敵繰り返し戦闘処理
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_バルツ地下廃工場_30_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 30
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
		ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱_開
	CASE "接続先"
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = ;炎魔力のなんかいい素材
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_バルツ地下廃工場_31_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 31
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
		ダンジョンマス画像URL_重ね表示 = 会話アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "31_8")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = ;シャッターが閉められてる。この奥は無事っぽいがどこで開けるのだか
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_バルツ地下廃工場_31_8(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 31
マス分岐 = 8

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_工場
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "25_8")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = ;シャッター奥は綺麗に整ってて溶けてたり精霊がいたりしない
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT




