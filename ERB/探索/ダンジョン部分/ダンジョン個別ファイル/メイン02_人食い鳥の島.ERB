

@ダンジョン初期処理_人食い鳥の島
;ダンジョン構造の読み込み
;0でない時、そのマスは存在する
#DIM 深度
#DIM 分岐

ダンジョンマス画像URL_伏せ状態 = 壁_岩
ダンジョン現在位置:0 = 0
ダンジョン現在位置:1 = 0
ダンジョン背景画像 = 背景_荒野

;スタート地点は必ず存在し、同深度に分岐無し
;初期からオープン済みなので3を入れるb ++
;ビット0：存在するか　ビット1：移動できるか　ビット2：マスをオープンするか（ビット１をONにしないと無意味）　ビット3：入れないがオープンする場合に使用
;ビット4以降：自由枠。主に宝箱の開閉やイベント達成フラグなどに使用
IF GETVAR(@"ダンジョン構造配列_%ダンジョン名%:0:0") == 0
	SETVAR @"ダンジョン構造配列_%ダンジョン名%:0:0", 3
	;巣の数を最初だけセット
	残り巣の数_人食い鳥の島 = 5
ENDIF

FOR 深度, 1, 100
	LOCAL = 0
	FOR 分岐, 0, 9
		IF GETVAR(@"ダンジョン構造配列_%ダンジョン名%:{深度}:{分岐}")
			;既にマス情報が入ってるなら飛ばす
			LOCAL = 1
			CONTINUE
		ELSEIF ENUMFUNCBEGINSWITH(@"ダンジョンマス情報_%ダンジョン名%_{深度}_{分岐}")
			LOCAL = 1
			SETVAR @"ダンジョン構造配列_%ダンジョン名%:深度:分岐", 1
		ENDIF
	NEXT
	IF LOCAL
		ダンジョン最大深度 = 深度
	ENDIF
NEXT


@敵討伐後処理_ダンジョン固有_人食い鳥の島(討伐エネミー数)
;ダンジョン内で戦闘した後に呼ばれる関数、主にダンジョンごとのドロップアイテム取得に使用
;まだ敵データはリセットしていないので敵BATTLE_STATEで色々情報は取得可能
#DIM 討伐エネミー数
#DIM ドロップ確率
#DIMS ドロップアイテム

ドロップ確率 = 10 * 討伐エネミー数
ドロップアイテム = 荒野の石材
CALL ドロップ判定処理(ドロップ確率, ドロップアイテム)

ドロップ確率 = 5 * 討伐エネミー数
ドロップアイテム = 星晶の破片
CALL ドロップ判定処理(ドロップ確率, ドロップアイテム)

ドロップ確率 = 1 * 討伐エネミー数
ドロップアイテム = 赤銅の古紋
CALL ドロップ判定処理(ドロップ確率, ドロップアイテム)


@ダンジョンマス情報_人食い鳥の島_0_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 0
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "1_1")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			IF 残り巣の数_人食い鳥の島 > 0
				KSTR:(K++) = まだ巣は{残り巣の数_人食い鳥の島}つほど残っているようだ。
			ELSE
				KSTR:(K++) = 人食い鳥の群れはもうどこか別の島へと移動したようだ。
			ENDIF
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = %CALLNAME:PLAYER%は人食い鳥の島へと足を踏み入れた。
			WSTR:(K++) = 空を見上げてみれば、大きな鳥が君たちを監視するように近くを飛んでいる。
			WSTR:(K++) = かなり統率の取れた手ごわい群れのようだ。
			WSTR:(K++) = COLOR_C0C070_探索メンバー全員に指輪を装備させておいた方がいいかもしれない。
			KSTR:(K++) = 指輪は空き店舗を装飾品店に改装して購入するか、ストーンイーターを討伐することで手に入る。_PAGE
			WSTR:(K++) = 事前に仕入れた情報によると、この島には少なくとも大型の巣が_COLOR_c07070_５つ_は存在するらしい。
			WSTR:(K++) = 全て潰せば島から人食い鳥たちは去っていくだろう。
			KSTR:(K++) = 島はそれなりに広く、探索するにも手間が掛かりそうだ。地道に進めていこう。
			CALL メッセージ欄表示用関数()
			CALL 口上変数初期化
			SETBIT ダンジョン構造配列_人食い鳥の島:1:1, 1
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_1_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 1
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "2_0")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "2_2")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "2_4")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			KSTR:(K++) = 島の内部は荒野が広がっている。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 島の内部は荒野が広がっている。
			WSTR:(K++) = 草や木々は殆ど無く、土や風の魔力を含む魔物が多い。
			WSTR:(K++) = この島に住む人食い鳥たちは魔物や人間を集団で狩る習性を持つ厄介な魔物だ。
			WSTR:(K++) = COLOR_0xc0c070_戦闘が長引くと仲間を呼ぶことがあるかもしれない。
			KSTR:(K++) = 多少無理してでも早めに戦闘を終わらせた方がいいだろう。
			CALL メッセージ欄表示用関数()
			SETBIT ダンジョン構造配列_人食い鳥の島:2:0, 1
			SETBIT ダンジョン構造配列_人食い鳥の島:2:2, 1
			SETBIT ダンジョン構造配列_人食い鳥の島:2:4, 1
		ENDIF
		CALL 画面再描画
ENDSELECT

;---------------------------------------------------------------------------
;上ルート（巣一個）
;洞窟＋門＋魔物使い宝石
;---------------------------------------------------------------------------


@ダンジョンマス情報_人食い鳥の島_2_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 2
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "3_0")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			KSTR:(K++) = 敵を探しますか？
			KSTR:(K++) = BUTTON_[はい]
			KSTR:(K++) = BUTTON_[いいえ]
			CALL メッセージ欄表示用関数(,,,0)
			$LOOP_MESSAGE
			INPUTS
			SELECTCASE RESULTS
				CASE "[はい]"
					敵BATTLE_STATE_STR:0:エネミー名 = Lv4_人食い鳥
					敵BATTLE_STATE_STR:1:エネミー名 = Lv4_人食い鳥
					CALL 雑魚敵遭遇汎用処理
				CASE "[いいえ]"
					CALL 口上変数初期化
				CASEELSE
					CLEARLINE 1
					GOTO LOOP_MESSAGE
			ENDSELECT
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			KSTR:(K++) = 荒野を進んでいると、空から人食い鳥が君たちに襲い掛かってきた！
			CALL メッセージ欄表示用関数()

			敵BATTLE_STATE_STR:0:エネミー名 = Lv4_人食い鳥
			敵BATTLE_STATE_STR:1:エネミー名 = Lv4_人食い鳥
			CALL 雑魚敵遭遇汎用処理
			
			SETBIT ダンジョン構造配列_人食い鳥の島:3:0, 1
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_3_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 3
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "4_0")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			KSTR:(K++) = 荒野の北側には幾つもの岩山、それに空いた洞穴が見える。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			WSTR:(K++) = 荒野を北の方へと進む。
			WSTR:(K++) = 岩山が幾つも並んでおり、山肌には僅かな緑と多くの洞穴が見える。
			WSTR:(K++) = 人食い鳥がそのうちの一つに入っていく姿が見えた……。
			KSTR:(K++) = どうやらこちら側の巣は、洞窟の中にあるらしい。
			CALL メッセージ欄表示用関数()

			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			SETBIT ダンジョン構造配列_人食い鳥の島:4:0, 1
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_4_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 4
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
		ダンジョンマス画像URL_重ね表示 = 右アイコン
	CASE "接続先"
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 岩山を登り、人食い鳥が入っていった洞窟にたどり着く。
			WSTR:(K++) = 幸いにも穴は広く、普通に歩いて内部を探索することが出来るだろう。
			CALL 知識技能所持者検索("魔法知識", 1)
			LOCAL = RESULT
			IF LOCAL > -1
				WSTR:(K++) = %CALLNAME:LOCAL%は魔術で明かりを付けた。
			ELSE
				WSTR:(K++) = %CALLNAME:PLAYER%は持ってきたたいまつに火を付けた。
			ENDIF
			KSTR:(K++) = 油断せずに探索を進めよう。
			CALL メッセージ欄表示用関数()

			SETBIT ダンジョン構造配列_人食い鳥の島:8:0, 1
			SETBIT ダンジョン構造配列_人食い鳥の島:8:0, 2
			SETBIT ダンジョン構造配列_人食い鳥の島:9:0, 1
			SETBIT ダンジョン構造配列_人食い鳥の島:9:3, 1
		ENDIF
		ダンジョンマス画像URL_伏せ状態 = 壁_洞窟
		ダンジョン現在位置:0 = 8
		ダンジョン現在位置:1 = 0
		ダンジョン背景画像 = 背景_洞窟
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_8_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 8
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_洞窟
		ダンジョンマス画像URL_重ね表示 = 左アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "9_0")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "9_3")
	CASE "マスイベント"
		ダンジョンマス画像URL_伏せ状態 = 壁_岩
		ダンジョン背景画像 = 背景_荒野
		ダンジョン現在位置:0 = 4
		ダンジョン現在位置:1 = 0
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_9_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 9
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_洞窟
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "10_0")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "10_1")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			KSTR:(K++) = 洞窟の中は肌寒い。水属性の魔物が住んでいるかもしれない。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 洞窟の中は肌寒い。どこからか水が流れる音も聞こえてくる。
			WSTR:(K++) = 近くに地下水の川があるようで、洞窟内部にも水の魔力を多く感じる。
			WSTR:(K++) = COLOR_c0c070_洞窟の中には水属性の魔物が住んでいるかもしれない。
			KSTR:(K++) = 耳飾りで属性を変更すると楽に戦えるだろう。
			CALL メッセージ欄表示用関数()

			SETBIT ダンジョン構造配列_人食い鳥の島:10:1, 1
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_10_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 10
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_洞窟
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4)
			ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱_開
		ELSE
			ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱
		ENDIF
	CASE "接続先"
	CASE "マスイベント"
		CALL 口上変数初期化
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4)
			KSTR:(K++) = もう何もない。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 洞窟の奥に、土の魔力が溜まった鉱石を見つけた。
			WSTR:(K++) = 地下水の川で水の魔力が増えた分、押しのけられた土の魔力が堆積したらしい。
			WSTR:(K++) = 簡単に削って金具を付ければ耳飾りになるだろう。
			KSTR:(K++) = %CALLNAME:PLAYER%は土の耳飾りを手に入れた！
			CALL メッセージ欄表示用関数()
			CALL 汎用耳飾り取得処理("土の耳飾り")

			CALL 口上変数初期化
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_10_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 10
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_洞窟
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4) == 0
			ダンジョンマス画像URL_重ね表示 = エネミーアイコン
		ENDIF
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "14_0")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "11_2")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4)
			KSTR:(K++) = 魔物の姿はもうない。川は安全に渡ることが出来る。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			SETBIT ダンジョン構造配列_人食い鳥の島:11:2, 1
			WSTR:(K++) = 洞窟を進むと地下水の川に行き当たった。川の中には多くの魔物の姿が見える……。
			WSTR:(K++) = COLOR_c0c070_複数回の戦闘になるだろう_が、すべて倒さなければ向こう側に渡ることは難しい。
			KSTR:(K++) = しかし下流に沿って進めば、回り道だが戦いを避けて奥に進むことができるかもしれない。_PAGE
			KSTR:(K++) = 魔物の群れと戦いますか？（３連戦）
			KSTR:(K++) = BUTTON_[はい]
			KSTR:(K++) = BUTTON_[いいえ]
			CALL メッセージ欄表示用関数(,,,0)
			$LOOP_MESSAGE
			INPUTS
			SELECTCASE RESULTS
				CASE "[はい]"
					敵BATTLE_STATE_STR:1:エネミー名 = Lv4_水のエレメンタル
					敵BATTLE_STATE_STR:2:エネミー名 = Lv3_スニッパー
					敵BATTLE_STATE_STR:3:エネミー名 = Lv4_水のエレメンタル
					CALL 雑魚敵遭遇汎用処理
					IF RESULT == 0
						敵BATTLE_STATE_STR:1:エネミー名 = Lv4_水のエレメンタル
						敵BATTLE_STATE_STR:3:エネミー名 = Lv4_水のエレメンタル
						敵BATTLE_STATE_STR:5:エネミー名 = Lv4_水のエレメンタル
						CALL 雑魚敵遭遇汎用処理
						IF RESULT == 0
							敵BATTLE_STATE_STR:1:エネミー名 = Lv4_水のエレメンタル
							敵BATTLE_STATE_STR:2:エネミー名 = Lv3_スニッパー
							敵BATTLE_STATE_STR:3:エネミー名 = Lv4_水のエレメンタル
							敵BATTLE_STATE_STR:4:エネミー名 = Lv3_スニッパー
							敵BATTLE_STATE_STR:5:エネミー名 = Lv4_水のエレメンタル
							CALL 雑魚敵遭遇汎用処理
							IF RESULT == 0
								SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4
								SETBIT ダンジョン構造配列_人食い鳥の島:14:0, 1
								CALL 口上変数初期化
								WSTR:(K++) = 君たちは魔物を追い払い、無事に川を渡ることが出来た。
								KSTR:(K++) = あれだけ倒せばしばらくここに魔物の群れが戻ってくることはないだろう。
								CALL メッセージ欄表示用関数()
							ENDIF
						ENDIF
					ENDIF
					CALL 口上変数初期化
				CASE "[いいえ]"
					CALL 口上変数初期化
				CASEELSE
					CLEARLINE 1
					GOTO LOOP_MESSAGE
			ENDSELECT

		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_11_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 11
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_洞窟
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4) == 0
			ダンジョンマス画像URL_重ね表示 = 会話アイコン
		ENDIF
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "12_1")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4) == 0
				CALL 知識技能所持者検索("調合知識", 1)
				IF RESULT > -1
					WSTR:(K++) = %CALLNAME:RESULT%は、ここに生えているキノコが爆発物の原料になることに気づいた。
					WSTR:(K++) = 簡単な調合をすれば魔物相手に使えるアイテムになる。少し採取していこう。
					WSTR:(K++) = 手投げ爆弾を３個手に入れた！
					SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4
					CALL アイテム増減汎用処理("手投げ爆弾", 3)
				ELSE
					KSTR:(K++) = 淡く光るキノコが生えている。
				ENDIF
				CALL メッセージ欄表示用関数(,,,0)
			ELSE
				KSTR:(K++) = これ以上キノコを採取すると乱獲になる。そっとしておこう。
				CALL メッセージ欄表示用関数(,,,0)
			ENDIF
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 川に沿って下流へ進んでいくと、魔物の姿がない浅瀬に出た。
			WSTR:(K++) = 周囲には淡く光るキノコが生えており、幻想的な風景を作り出している。
			CALL 知識技能所持者検索("調合知識", 1)
			LOCAL = RESULT
			IF LOCAL > -1
				WSTR:(K++) = %CALLNAME:LOCAL%は、そのキノコが爆発物の原料になることに気づいた。
				KSTR:(K++) = 簡単な調合をすれば魔物相手に使えるアイテムになる。少し採取していこう。_PAGE
				KSTR:(K++) = 手投げ爆弾を３個手に入れた！
				SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4
				CALL アイテム増減汎用処理("手投げ爆弾", 3)
			ELSE
				KSTR:(K++) = 他は特に変わった様子はないようだ。先に進もう。
			ENDIF
			CALL メッセージ欄表示用関数()
			SETBIT ダンジョン構造配列_人食い鳥の島:12:1, 1
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_12_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 12
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_洞窟
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "13_1")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "13_2")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			KSTR:(K++) = 敵を探しますか？
			KSTR:(K++) = BUTTON_[はい]
			KSTR:(K++) = BUTTON_[いいえ]
			CALL メッセージ欄表示用関数(,,,0)
			$LOOP_MESSAGE
			INPUTS
			SELECTCASE RESULTS
				CASE "[はい]"
					敵BATTLE_STATE_STR:0:エネミー名 = Lv4_ジェリー
					敵BATTLE_STATE_STR:3:エネミー名 = Lv4_水のエレメンタル
					敵BATTLE_STATE_STR:4:エネミー名 = Lv4_ジェリー
					CALL 雑魚敵遭遇汎用処理
				CASE "[いいえ]"
					CALL 口上変数初期化
				CASEELSE
					CLEARLINE 1
					GOTO LOOP_MESSAGE
			ENDSELECT
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 洞窟は奥に進むにつれ、じめじめと湿気が増してきている。
			WSTR:(K++) = 同時に、湿気を好む魔物がうろついている姿も増えてきた。
			KSTR:(K++) = 退路をふさがれても面倒だ。ここで倒してしまおう。
			CALL メッセージ欄表示用関数()

			敵BATTLE_STATE_STR:0:エネミー名 = Lv4_ジェリー
			敵BATTLE_STATE_STR:3:エネミー名 = Lv4_水のエレメンタル
			敵BATTLE_STATE_STR:4:エネミー名 = Lv4_ジェリー
			CALL 雑魚敵遭遇汎用処理

			SETBIT ダンジョン構造配列_人食い鳥の島:13:1, 1
			SETBIT ダンジョン構造配列_人食い鳥の島:13:2, 1
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_13_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 13
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_洞窟
		IF ダンジョン内一時変数:0 == 0
			ダンジョンマス画像URL_重ね表示 = えっちハート
		ENDIF
	CASE "接続先"
	CASE "マスイベント"
		CALL 口上変数初期化
		SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
		IF ダンジョン内一時変数:0
		ELSE
			CALL ダンジョンハプニング_スカート捲れ()
			IF RESULT
				ダンジョン内一時変数:0 = 1
			ENDIF
			CALL 口上変数初期化
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_13_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 13
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_洞窟
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "14_0")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			KSTR:(K++) = 洞窟の隅に砕けた骨が落ちている。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 洞窟の隅に砕けた骨が落ちている。
			WSTR:(K++) = 何の骨かはわからないが、人食い鳥の犠牲になった魔物か人間のどちらかだろう。
			KSTR:(K++) = 君たちは短く犠牲者の冥福を祈り、先に進む。
			CALL メッセージ欄表示用関数()

			SETBIT ダンジョン構造配列_人食い鳥の島:14:0, 1
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_14_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 14
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_洞窟
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4) == 0
			ダンジョンマス画像URL_重ね表示 = エネミーアイコン
		ENDIF
	CASE "接続先"
	CASE "マスイベント"
		CALL 口上変数初期化
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4)
			KSTR:(K++) = もう人食い鳥はどこかへと去っていった後だ。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 洞窟の奥には、天井が高く開けた部屋があった。
			WSTR:(K++) = その部屋には大きな鳥の巣が幾つも並んでおり、人食い鳥が何羽も屯している。
			KSTR:(K++) = 巣を駆除するには鳥たちとの連戦になるだろう。準備はいいだろうか。_PAGE
			KSTR:(K++) = 魔物の群れと戦いますか？（２連戦）
			KSTR:(K++) = BUTTON_[はい]
			KSTR:(K++) = BUTTON_[いいえ]
			CALL メッセージ欄表示用関数(,,,0)
			$LOOP_MESSAGE
			INPUTS
			SELECTCASE RESULTS
				CASE "[はい]"
					敵BATTLE_STATE_STR:1:エネミー名 = Lv4_人食い鳥
					敵BATTLE_STATE_STR:2:エネミー名 = Lv4_人食い鳥
					敵BATTLE_STATE_STR:4:エネミー名 = Lv4_人食い鳥
					CALL 雑魚敵遭遇汎用処理
					IF RESULT == 0
						敵BATTLE_STATE_STR:1:エネミー名 = Lv4_人食い鳥
						敵BATTLE_STATE_STR:3:エネミー名 = Lv6_人食い鳥
						敵BATTLE_STATE_STR:5:エネミー名 = Lv4_人食い鳥
						敵BATTLE_STATE_STR:7:エネミー名 = Lv4_人食い鳥
						CALL 雑魚敵遭遇汎用処理
						IF RESULT == 0
							SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4
							残り巣の数_人食い鳥の島 -= 1
							CALL 口上変数初期化
							WSTR:(K++) = 君たちは人食い鳥を倒し、巣を破壊した。
							WSTR:(K++) = 危険を知った人食い鳥たちはもうこの場所に戻ってくることはないだろう。
							KSTR:(K++) = 残りの巣の数：{残り巣の数_人食い鳥の島}つ
							CALL メッセージ欄表示用関数()
						ENDIF
					ENDIF
					CALL 口上変数初期化
				CASE "[いいえ]"
					CALL 口上変数初期化
				CASEELSE
					CLEARLINE 1
					GOTO LOOP_MESSAGE
			ENDSELECT
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_9_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 9
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_洞窟
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "10_3")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			KSTR:(K++) = 敵を探しますか？
			KSTR:(K++) = BUTTON_[はい]
			KSTR:(K++) = BUTTON_[いいえ]
			CALL メッセージ欄表示用関数(,,,0)
			$LOOP_MESSAGE
			INPUTS
			SELECTCASE RESULTS
				CASE "[はい]"
					敵BATTLE_STATE_STR:0:エネミー名 = Lv4_水のエレメンタル
					敵BATTLE_STATE_STR:1:エネミー名 = Lv4_水のエレメンタル
					敵BATTLE_STATE_STR:3:エネミー名 = Lv4_水のエレメンタル
					CALL 雑魚敵遭遇汎用処理
				CASE "[いいえ]"
					CALL 口上変数初期化
				CASEELSE
					CLEARLINE 1
					GOTO LOOP_MESSAGE
			ENDSELECT
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 洞窟の中を進むうち、水音と共に何かが近づいてくる気配がする……！
			KSTR:(K++) = 精霊型のエネミーだ！　それらは侵入者である君たちへと襲い掛かってくる！
			CALL メッセージ欄表示用関数()

			敵BATTLE_STATE_STR:0:エネミー名 = Lv4_水のエレメンタル
			敵BATTLE_STATE_STR:1:エネミー名 = Lv4_水のエレメンタル
			敵BATTLE_STATE_STR:3:エネミー名 = Lv4_水のエレメンタル
			CALL 雑魚敵遭遇汎用処理
			
			SETBIT ダンジョン構造配列_人食い鳥の島:10:3, 1
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_10_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 10
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_洞窟
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "11_4")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "11_5")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			KSTR:(K++) = 道は滑らかに整えられ、人工的な通路になっている。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 精霊の群れがいた先の道は滑らかに整えられ、明らかに人工的な通路になっていた。
			WSTR:(K++) = この島は記録上、５０年以上は無人島のはずだが……。
			KSTR:(K++) = 過去の採掘路か何かだろうか？
			CALL メッセージ欄表示用関数()
			
			SETBIT ダンジョン構造配列_人食い鳥の島:11:4, 1
			SETBIT ダンジョン構造配列_人食い鳥の島:11:5, 1
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_11_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 11
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_洞窟
	CASE "接続先"
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			KSTR:(K++) = 巨大な門が開く気配はない。
			KSTR:(K++) = ※ダンジョンクリア後、門を調査するイベントが発生します。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 通路を進んでいった先には、宗教的装飾が施された巨大な門が鎮座していた。
			WSTR:(K++) = 取っ手や鍵穴などは見当たらず、押しても引いても開く気配はない。
			WSTR:(K++) = かなり古いもののようだが……eraに聞けばわかるだろうか？
			KSTR:(K++) = ※ダンジョンクリア後、門を調査するイベントが発生します。
			CALL メッセージ欄表示用関数()
			
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_11_5(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 11
マス分岐 = 5

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_洞窟
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4) == 0
			ダンジョンマス画像URL_重ね表示 = 会話アイコン
		ENDIF
	CASE "接続先"
	CASE "マスイベント"
		CALL 口上変数初期化
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4)
			KSTR:(K++) = 宝石は外されている。もう何もない。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 道の突き当りには不思議な輝きを放つ宝石が壁に埋め込まれていた。
			CALL 知識技能所持者検索("錬金知識", 1)
			LOCAL = RESULT
			IF LOCAL > -1
				WSTR:(K++) = %CALLNAME:LOCAL%は、その宝石が魔物を操る力を持っていることに気づく。
				WSTR:(K++) = この洞窟にいる水のエレメンタルたちは宝石に引き寄せられて集まったのだろう。
				WSTR:(K++) = これを使えば、魔物を手懐けることが出来るかもしれない……。（※未実装です）
				KSTR:(K++) = %CALLNAME:PLAYER%は宝石を持ち帰り、研究してみることにした。_PAGE
				KSTR:(K++) = %CALLNAME:PLAYER%は魔物使いの宝石・ランクEを手に入れた！
				ITEM:魔物使いの宝石・ランクE = 1
				SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4
			ELSE
				WSTR:(K++) = お宝のように思えるが、こういった宝石に迂闊に触るのは危険だ。
				WSTR:(K++) = 少なくとも、どんな力を秘めているかわからないと近づくべきではないだろう。
				KSTR:(K++) = 錬金術の知識があれば解析出来そうだが……。
			ENDIF
			CALL メッセージ欄表示用関数()
		ENDIF
		CALL 画面再描画
ENDSELECT

;---------------------------------------------------------------------------
;真ん中ルート（巣一個＋ボス巣）
;砂漠
;---------------------------------------------------------------------------

@ダンジョンマス情報_人食い鳥の島_2_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 2
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "4_2")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			KSTR:(K++) = 島全体に風と土の魔力を感じる。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 島全体に風と土の魔力を感じる。
			WSTR:(K++) = 荒野のように緑が少ない地形が広がっているのも、乾燥した土で育つ植物が少ないからだろう。
			KSTR:(K++) = この荒れ様では鳥を追い払っても、この島をなにかに利用するのは難しいかもしれない。
			KSTR:(K++) = 島の性質をまるごと変えるような手段があれば別だが……今はどうやっても無理だろう。
			CALL メッセージ欄表示用関数()
			SETBIT ダンジョン構造配列_人食い鳥の島:4:2, 1
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_4_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 4
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "6_3")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ == 0
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			SETBIT ダンジョン構造配列_人食い鳥の島:6:3, 1
		ENDIF
		CALL 口上変数初期化
		KSTR:(K++) = 荒野はただ広がっている。もう少し進めばなにか変化がありそうだ。
		CALL メッセージ欄表示用関数(,,,0)
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_6_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 6
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
		ダンジョンマス画像URL_重ね表示 = 右アイコン
	CASE "接続先"
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 君たちは荒野を東へと進む。
			WSTR:(K++) = 進むたびに岩は少なくなり、地面は更に乾燥し、粒が小さくなっていく。
			KSTR:(K++) = 丘を一つ越える頃には、周囲の地形は砂漠へと様変わりしていた。_PAGE
			WSTR:(K++) = 君たちの真上を人食い鳥が悠々と飛んでいく。
			KSTR:(K++) = 砂漠のどこかに巣があるのだろう。すぐに見つかればいいのだが……
			CALL メッセージ欄表示用関数()

			SETBIT ダンジョン構造配列_人食い鳥の島:16:3, 1
			SETBIT ダンジョン構造配列_人食い鳥の島:16:3, 2
			SETBIT ダンジョン構造配列_人食い鳥の島:17:2, 1
			SETBIT ダンジョン構造配列_人食い鳥の島:17:3, 1
			SETBIT ダンジョン構造配列_人食い鳥の島:17:4, 1
		ENDIF
		ダンジョンマス画像URL_伏せ状態 = 壁_砂漠
		ダンジョン現在位置:0 = 16
		ダンジョン現在位置:1 = 3
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_16_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 16
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_砂漠
		ダンジョンマス画像URL_重ね表示 = 左アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "17_2")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "17_3")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "17_4")
	CASE "マスイベント"
		CALL 口上変数初期化
		ダンジョンマス画像URL_伏せ状態 = 壁_岩
		ダンジョン現在位置:0 = 6
		ダンジョン現在位置:1 = 3
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_17_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 17
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_砂漠
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "18_1")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			KSTR:(K++) = 敵を探しますか？
			KSTR:(K++) = BUTTON_[はい]
			KSTR:(K++) = BUTTON_[いいえ]
			CALL メッセージ欄表示用関数(,,,0)
			$LOOP_MESSAGE
			INPUTS
			SELECTCASE RESULTS
				CASE "[はい]"
					敵BATTLE_STATE_STR:0:エネミー名 = Lv5_サンドフィッシュ
					敵BATTLE_STATE_STR:3:エネミー名 = Lv5_サンドフィッシュ
					CALL 雑魚敵遭遇汎用処理
				CASE "[いいえ]"
					CALL 口上変数初期化
				CASEELSE
					CLEARLINE 1
					GOTO LOOP_MESSAGE
			ENDSELECT
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 砂漠は一見何もない死の世界のように見えるが、実際には独自の生態系が存在する。
			WSTR:(K++) = それは例えば夜露で育つサボテンなどの植物だったり、砂のミネラルを食べる虫だったり。
			KSTR:(K++) = あるいは……今君たちに襲いかかってきたような、砂漠を泳ぐ獰猛な魚もいる！
			CALL メッセージ欄表示用関数()

			敵BATTLE_STATE_STR:0:エネミー名 = Lv5_サンドフィッシュ
			敵BATTLE_STATE_STR:3:エネミー名 = Lv5_サンドフィッシュ
			CALL 雑魚敵遭遇汎用処理
			
			SETBIT ダンジョン構造配列_人食い鳥の島:18:1, 1
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_18_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 18
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_砂漠
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4) == 0 && GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 5) == 0
			ダンジョンマス画像URL_重ね表示 = 会話アイコン
		ENDIF
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "19_0")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4)
			KSTR:(K++) = 君たちを惑わす蜃気楼は消え去っている。
			CALL メッセージ欄表示用関数(,,,0)
		ELSEIF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 5)
			KSTR:(K++) = 君たちは既に正しい順路を知っている。迷うことはない。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 歩けども歩けども、周囲の景色は代わり映えしない。
			WSTR:(K++) = とにかく巣を見つけようと奥に向かって歩くが……
			KSTR:(K++) = いつの間にか同じ場所へと戻ってきてしまったようだ。
			CALL メッセージ欄表示用関数()

			CALL 知識技能所持者検索("魔法知識", 1)
			LOCAL = RESULT
			IF LOCAL > -1
				CALL 口上変数初期化
				WSTR:(K++) = 周囲に妙な魔力を感じる……。
				WSTR:(K++) = %CALLNAME:LOCAL%は砂漠の魔力がここに溜まり、ここを通る者に幻を見せているのだと気づいた。
				WSTR:(K++) = 砂漠にはたまにある自然現象らしい。
				WSTR:(K++) = 簡単な解呪の魔法を幾度か唱えると、周囲の幻は空気に溶けて消えていく。
				KSTR:(K++) = これでもう迷うことは無いだろう。君たちは先に進む。
				CALL メッセージ欄表示用関数()
				SETBIT ダンジョン構造配列_人食い鳥の島:19:0, 1
				SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4
			ELSE
				CALL 口上変数初期化
				WSTR:(K++) = 周囲に妙な魔力を感じる……。
				WSTR:(K++) = 魔法の知識があれば看破出来るかもしれないが、今の君たちにはわからなかった。
				KSTR:(K++) = 無理やり先に進んでみようか？
				KSTR:(K++) = BUTTON_[はい]
				KSTR:(K++) = BUTTON_[いいえ]
				CALL メッセージ欄表示用関数(,,,0)
				CALL 口上変数初期化
				$LOOP_MESSAGE
				INPUTS
				SELECTCASE RESULTS
					CASE "[はい]"
						WSTR:(K++) = 君たちはひたすらに歩き、虱潰しに砂漠のルートを確認する。
						WSTR:(K++) = 体力を大きく消耗したが何とか先に進む手順を見つけることが出来た。
						KSTR:(K++) = 全員の体力が１００減少する。
						CALL メッセージ欄表示用関数()
						SETBIT ダンジョン構造配列_人食い鳥の島:19:0, 1
						SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 5
						FOR LOCAL, 0, 4
							IF BATTLE_STATE:LOCAL:0 < 1
								BREAK
							ENDIF
							BATTLE_STATE:LOCAL:ＨＰ = MAX(BATTLE_STATE:LOCAL:ＨＰ - 100, 1)
						NEXT
					CASE "[いいえ]"
						WSTR:(K++) = 無駄に体力を浪費することはない。
						KSTR:(K++) = 一度戻り、突破手段を整えてから来よう。
						CALL メッセージ欄表示用関数()
					CASEELSE
						CLEARLINE 1
						GOTO LOOP_MESSAGE
				ENDSELECT
			ENDIF
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_19_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 19
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_砂漠
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "21_0")
	CASE "マスイベント"
		CALL 口上変数初期化
		SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
		SETBIT ダンジョン構造配列_人食い鳥の島:21:0, 1
		KSTR:(K++) = じっとしているだけでも汗が吹き出てくる。
		KSTR:(K++) = 水分補給は怠らないようにしよう。
		CALL メッセージ欄表示用関数(,,,0)
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_21_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 21
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_砂漠
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4) == 0
			ダンジョンマス画像URL_重ね表示 = 会話アイコン
		ENDIF
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "22_0")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "22_2")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4)
			KSTR:(K++) = オアシスが近くにあるようだ。
			CALL メッセージ欄表示用関数(,,,0)
		ELSEIF 初来訪マス判定用フラグ == 0
			CALL 知識技能所持者検索("魔物知識", 1)
			LOCAL = RESULT
			IF LOCAL > -1
				WSTR:(K++) = 君たちの足元を、小さなトカゲ型の魔物がちょろちょろと走っていく。
				WSTR:(K++) = それを見た%CALLNAME:LOCAL%が、あの魔物は水場の近くにしか住まないはずだと思い出す。
				WSTR:(K++) = トカゲを見失わないように後を追うと、砂に囲まれた低地にオアシスを見つけた。
				KSTR:(K++) = 普通に進んでいては見落としてしまっていただろう。君たちは喜び、オアシスへと近づいていく。
				CALL メッセージ欄表示用関数()
				SETBIT ダンジョン構造配列_人食い鳥の島:22:0, 1
				SETBIT ダンジョン構造配列_人食い鳥の島:22:0, 2
				SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4
			ELSE
				KSTR:(K++) = 君たちの足元を、小さなトカゲ型の魔物がちょろちょろと走っていく。
				CALL メッセージ欄表示用関数(,,,0)
			ENDIF
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 君たちの足元を、小さなトカゲ型の魔物がちょろちょろと走っていく。

			CALL 知識技能所持者検索("魔物知識", 1)
			LOCAL = RESULT
			IF LOCAL > -1
				WSTR:(K++) = それを見た%CALLNAME:LOCAL%が、あの魔物は水場の近くにしか住まないはずだと思い出す。
				WSTR:(K++) = トカゲを見失わないように後を追うと、砂に囲まれた低地にオアシスを見つけた。
				KSTR:(K++) = 普通に進んでいては見落としてしまっていただろう。君たちは喜び、オアシスへと近づいていく。
				CALL メッセージ欄表示用関数()
				SETBIT ダンジョン構造配列_人食い鳥の島:22:0, 1
				SETBIT ダンジョン構造配列_人食い鳥の島:22:0, 2
				SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4
			ELSE
				WSTR:(K++) = あのくらいの魔物ならほっといても害はないだろう。
				KSTR:(K++) = 君たちは小さなトカゲを見送り、先へと進む。
				CALL メッセージ欄表示用関数()
			ENDIF
			SETBIT ダンジョン構造配列_人食い鳥の島:22:2, 1
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_人食い鳥の島_22_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 22
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_砂漠
		IF ダンジョン内一時変数:1 == 0
			ダンジョンマス画像URL_重ね表示 = 回復アビ
		ENDIF
	CASE "接続先"
	CASE "マスイベント"
		CALL 口上変数初期化
		IF ダンジョン内一時変数:1
		ELSE
			KSTR:(K++) = 砂漠の中に泉があり、狭い範囲ながら周りには草木が育っている。
			KSTR:(K++) = 少し休憩していきますか？
			KSTR:(K++) = （PTメンバー全回復・ダンジョンを一度出るまで消滅）
			KSTR:(K++) = BUTTON_[はい]
			KSTR:(K++) = BUTTON_[いいえ]
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			$LOOP_MESSAGE
			INPUTS
			SELECTCASE RESULTS
				CASE "[はい]"
					KSTR:(K++) = 君たちはオアシスで十分な休息を取り、体力を回復した！
					CALL メッセージ欄表示用関数()
					ダンジョン内一時変数:1 = 1
					FOR LOCAL, 0, 4
						IF BATTLE_STATE:LOCAL:0 < 1
							BREAK
						ENDIF
						BATTLE_STATE:LOCAL:ＨＰ = BATTLE_STATE:LOCAL:最大ＨＰ
						BATTLE_STATE:LOCAL:ＭＰ = BATTLE_STATE:LOCAL:最大ＭＰ
					NEXT
				CASE "[いいえ]"
					KSTR:(K++) = まだ休憩するほど疲れてはいない。先に進もう。
					CALL メッセージ欄表示用関数()
				CASEELSE
					CLEARLINE 1
					GOTO LOOP_MESSAGE
			ENDSELECT
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_22_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 22
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_砂漠
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "23_3")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			KSTR:(K++) = 敵を探しますか？
			KSTR:(K++) = BUTTON_[はい]
			KSTR:(K++) = BUTTON_[いいえ]
			CALL メッセージ欄表示用関数(,,,0)
			$LOOP_MESSAGE
			INPUTS
			SELECTCASE RESULTS
				CASE "[はい]"
					敵BATTLE_STATE_STR:0:エネミー名 = Lv5_サンドフィッシュ
					敵BATTLE_STATE_STR:3:エネミー名 = Lv5_サンドフィッシュ
					敵BATTLE_STATE_STR:4:エネミー名 = Lv4_人食い鳥
					敵BATTLE_STATE_STR:5:エネミー名 = Lv4_人食い鳥
					CALL 雑魚敵遭遇汎用処理
				CASE "[いいえ]"
					CALL 口上変数初期化
				CASEELSE
					CLEARLINE 1
					GOTO LOOP_MESSAGE
			ENDSELECT
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 君たちは砂漠の奥地へと歩を進める。
			WSTR:(K++) = 頭上には人食い鳥が数羽飛び交っている。恐らく、巣に近づく君たちを威嚇しているのだろう。
			KSTR:(K++) = それでも構わず歩を進めると、鳥や魚が君たちへと襲いかかってきた！
			CALL メッセージ欄表示用関数()

			敵BATTLE_STATE_STR:0:エネミー名 = Lv5_サンドフィッシュ
			敵BATTLE_STATE_STR:3:エネミー名 = Lv5_サンドフィッシュ
			敵BATTLE_STATE_STR:4:エネミー名 = Lv4_人食い鳥
			敵BATTLE_STATE_STR:5:エネミー名 = Lv4_人食い鳥
			CALL 雑魚敵遭遇汎用処理
			
			WSTR:(K++) = ここまで厳重に警戒しているとなると、この先に群れのボスが巣を作っているのかもしれない。
			KSTR:(K++) = COLOR_c07070_十分に準備を整えてから先に進もう。
			CALL メッセージ欄表示用関数()
			
			SETBIT ダンジョン構造配列_人食い鳥の島:23:3, 1
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_23_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 23
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_砂漠
		IF 残り巣の数_人食い鳥の島 == 1 || ダンジョン内一時変数:4 == 0
			ダンジョンマス画像URL_重ね表示 = エネミーアイコン_赤
		ENDIF
	CASE "接続先"
	CASE "マスイベント"
		CALL 口上変数初期化
		SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
		IF 残り巣の数_人食い鳥の島 > 1
			WSTR:(K++) = 君たちの前にひときわ大きな人食い鳥の巣がある。しかし巣の主は不在のようだ。
			WSTR:(K++) = 他の巣を先に回ってから、後で戻って来てみよう。
			CALL メッセージ欄表示用関数()
		ELSEIF 残り巣の数_人食い鳥の島 == 1
			WSTR:(K++) = 君たちの前に、ひときわ大きな人食い鳥の巣がある。
			WSTR:(K++) = 更に、巣の大きさに相応しい巨大な人食い鳥が陣取っている姿も見えた。
			KSTR:(K++) = 巣を駆除するには鳥たちとの連戦になるだろう。準備はいいだろうか。_PAGE
			KSTR:(K++) = 人食い鳥のボスと戦いますか？（２連戦＋ボス戦）
			KSTR:(K++) = BUTTON_[はい]
			KSTR:(K++) = BUTTON_[いいえ]
			CALL メッセージ欄表示用関数(,,,0)
			$LOOP_MESSAGE
			INPUTS
			SELECTCASE RESULTS
				CASE "[はい]"
					敵BATTLE_STATE_STR:1:エネミー名 = Lv6_人食い鳥
					敵BATTLE_STATE_STR:2:エネミー名 = Lv6_人食い鳥
					敵BATTLE_STATE_STR:4:エネミー名 = Lv6_人食い鳥
					CALL 雑魚敵遭遇汎用処理
					IF RESULT == 0
						敵BATTLE_STATE_STR:1:エネミー名 = Lv4_人食い鳥
						敵BATTLE_STATE_STR:3:エネミー名 = Lv6_人食い鳥
						敵BATTLE_STATE_STR:5:エネミー名 = Lv6_人食い鳥
						敵BATTLE_STATE_STR:7:エネミー名 = Lv4_人食い鳥
						CALL 雑魚敵遭遇汎用処理
						IF RESULT == 0
							敵BATTLE_STATE_STR:0:エネミー名 = Lv10_ボス人食い鳥
							敵BATTLE_STATE_STR:4:エネミー名 = Lv6_人食い鳥
							敵BATTLE_STATE_STR:5:エネミー名 = Lv6_人食い鳥
							CALL BATTLE_MAIN_LOOP
							IF RESULT == 0
								;勝利時
								ダンジョン表示モード = マップ画面
								CALL 口上変数初期化
								WSTR:(K++) = %CALLNAME:PLAYER%はボス人食い鳥の討伐に成功した！！
								WSTR:(K++) = ・航路開放により人気度の上限が上昇した！
								WSTR:(K++) = ・航路開放により道具屋・装飾品店の品揃えが増加した！（未実装）
								WSTR:(K++) = ・新たなイベントが解放された！
								WSTR:(K++) = ・ボス人食い鳥から「飛翔の指輪」を手に入れた！
								WSTR:(K++) = ・ボス人食い鳥から「猛禽の耳飾り」を手に入れた！
								CALL 汎用指輪取得処理("飛翔の指輪", 2)
								CALL 汎用耳飾り取得処理("猛禽の耳飾り")
								KSTR:(K++) = ダンジョンから脱出します。
								CALL メッセージ欄表示用関数()
								探索中全体カウント:追加信頼度 += 1000
								ダンジョン終了フラグ = 1
								ダンジョンクリアフラグ_人食い鳥の島 = 1
								残り巣の数_人食い鳥の島 = 0
							ELSEIF RESULT == 1
								;全滅時
								ダンジョン表示モード = マップ画面
								CALL 口上変数初期化
								KSTR:(K++) = %CALLNAME:PLAYER%は力尽きた仲間たちを連れ、なんとか逃げ出した…
								CALL メッセージ欄表示用関数()
								ダンジョン終了フラグ = 1
							ELSEIF RESULT == -1
								;逃走時
								ダンジョン表示モード = マップ画面
							ENDIF
						ENDIF
					ENDIF
					CALL 口上変数初期化
				CASE "[いいえ]"
					CALL 口上変数初期化
				CASEELSE
					CLEARLINE 1
					GOTO LOOP_MESSAGE
			ENDSELECT
		ELSEIF ダンジョンクリアフラグ_人食い鳥の島
			IF ダンジョン内一時変数:4 == 0
				KSTR:(K++) = ボス人食い鳥との戦いの記憶を思い起こしますか？
				KSTR:(K++) = （ボスと再戦、２連戦＋ボス戦）
				KSTR:(K++) = BUTTON_[はい]
				KSTR:(K++) = BUTTON_[いいえ]
				CALL メッセージ欄表示用関数(,,,0)
				$LOOP_MESSAGE2
				INPUTS
				SELECTCASE RESULTS
					CASE "[はい]"
						敵BATTLE_STATE_STR:1:エネミー名 = Lv6_人食い鳥
						敵BATTLE_STATE_STR:2:エネミー名 = Lv6_人食い鳥
						敵BATTLE_STATE_STR:4:エネミー名 = Lv6_人食い鳥
						CALL 雑魚敵遭遇汎用処理
						IF RESULT == 0
							敵BATTLE_STATE_STR:1:エネミー名 = Lv4_人食い鳥
							敵BATTLE_STATE_STR:3:エネミー名 = Lv6_人食い鳥
							敵BATTLE_STATE_STR:5:エネミー名 = Lv6_人食い鳥
							敵BATTLE_STATE_STR:7:エネミー名 = Lv4_人食い鳥
							CALL 雑魚敵遭遇汎用処理
							IF RESULT == 0
								敵BATTLE_STATE_STR:0:エネミー名 = Lv10_ボス人食い鳥
								敵BATTLE_STATE_STR:4:エネミー名 = Lv6_人食い鳥
								敵BATTLE_STATE_STR:5:エネミー名 = Lv6_人食い鳥
								CALL BATTLE_MAIN_LOOP
								IF RESULT == 0
									;勝利時
									ダンジョン表示モード = マップ画面
									CALL 口上変数初期化
									WSTR:(K++) = %CALLNAME:PLAYER%はボス人食い鳥の討伐に成功した！！
									WSTR:(K++) = ボス人食い鳥から「飛翔の指輪」を手に入れた！
									WSTR:(K++) = ボス人食い鳥から「猛禽の耳飾り」を手に入れた！
									CALL 汎用指輪取得処理("飛翔の指輪", 2)
									CALL 汎用耳飾り取得処理("猛禽の耳飾り")
									CALL メッセージ欄表示用関数()
									探索中全体カウント:追加信頼度 += 1000
									ダンジョン内一時変数:4 = 1
								ELSEIF RESULT == 1
									;全滅時
									ダンジョン表示モード = マップ画面
									CALL 口上変数初期化
									KSTR:(K++) = %CALLNAME:PLAYER%は力尽きた仲間たちを連れ、なんとか逃げ出した…
									CALL メッセージ欄表示用関数()
									ダンジョン終了フラグ = 1
								ELSEIF RESULT == -1
									;逃走時
									ダンジョン表示モード = マップ画面
								ENDIF
							ENDIF
						ENDIF
						CALL 口上変数初期化
					CASE "[いいえ]"
						CALL 口上変数初期化
					CASEELSE
						CLEARLINE 1
						GOTO LOOP_MESSAGE2
				ENDSELECT
			ENDIF
		ENDIF
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_17_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 17
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_砂漠
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4) == 0
			ダンジョンマス画像URL_重ね表示 = 会話アイコン
		ENDIF
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "18_3")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4)
			KSTR:(K++) = トゲだらけのサボテンがある。近づかないようにしよう。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 砂漠にはところどころにサボテンが生えている。
			WSTR:(K++) = 方向すらわからなくなってしまいそうなこの地においては、貴重な目印だ。
			KSTR:(K++) = そんな中、一本だけ異様にトゲの多いサボテンを見つけた。_PAGE
			WSTR:(K++) = 他には見当たらない、非常に変わったサボテンだが……。
			KSTR:(K++) = 近づいてみますか？
			KSTR:(K++) = BUTTON_[はい]
			KSTR:(K++) = BUTTON_[いいえ]
			CALL メッセージ欄表示用関数(,,,0)
			$LOOP_MESSAGE
			INPUTS
			CALL 口上変数初期化
			SELECTCASE RESULTS
				CASE "[はい]"
					WSTR:(K++) = 君たちが近づくと、いきなりサボテンの表面が破裂した！
					WSTR:(K++) = トゲには種子がついており、こういう繁殖をするサボテンの習性らしい。
					WSTR:(K++) = 君たちは痛みをこらえながら刺さったトゲを抜いていく。次は迂闊に近づかないようにしよう……
					KSTR:(K++) = 全員のＨＰを５０減少。
					CALL メッセージ欄表示用関数()
					FOR LOCAL, 0, 4
						IF BATTLE_STATE:LOCAL:0 < 1
							BREAK
						ENDIF
						BATTLE_STATE:LOCAL:ＨＰ = MAX(BATTLE_STATE:LOCAL:ＨＰ - 50, 1)
					NEXT
				CASE "[いいえ]"
					WSTR:(K++) = なんとなく危険な気がする。近づくのはやめておこう。
					KSTR:(K++) = 君たちは先を急ぐことにした。
					CALL メッセージ欄表示用関数()
				CASEELSE
					CLEARLINE 1
					GOTO LOOP_MESSAGE
			ENDSELECT
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4
			SETBIT ダンジョン構造配列_人食い鳥の島:18:3, 1
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_18_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 18
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_砂漠
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "19_2")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "19_4")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			KSTR:(K++) = 巨大な砂丘がある。左右のどちらかに回り込んで進もう。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 砂漠は何もないように見えて、意外と視界が通らない場所が多い。
			WSTR:(K++) = 砂丘などの地形で高低差が出来るからである。
			WSTR:(K++) = 今、君たちの前には特に巨大な砂丘がそびえ立っている。
			KSTR:(K++) = 登るのは骨が折れそうだ。左右のどちらかに回り込んで進もう。
			CALL メッセージ欄表示用関数()
			SETBIT ダンジョン構造配列_人食い鳥の島:19:2, 1
			SETBIT ダンジョン構造配列_人食い鳥の島:19:4, 1
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_19_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 19
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_砂漠
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4)
			ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱_開
		ELSE
			ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱
		ENDIF
	CASE "接続先"
	CASE "マスイベント"
		CALL 口上変数初期化
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4)
			KSTR:(K++) = もう何もない。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 砂丘の裏には、砂が魔力を吸って固まった石が幾つか転がっていた。
			KSTR:(K++) = ほとんどは手に持つとサラサラと崩れて砂に戻ってしまったが、
			WSTR:(K++) = 幾つかは完全に固まっており、魔石として使うことが出来そうだ。
			KSTR:(K++) = %CALLNAME:PLAYER%は魔石を３個を手に入れた！
			CALL メッセージ欄表示用関数()
			CALL アイテム増減汎用処理("魔石", 3)
			CALL 口上変数初期化
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_19_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 19
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_砂漠
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "20_2")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "20_4")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			KSTR:(K++) = 敵を探しますか？
			KSTR:(K++) = BUTTON_[はい]
			KSTR:(K++) = BUTTON_[いいえ]
			CALL メッセージ欄表示用関数(,,,0)
			$LOOP_MESSAGE
			INPUTS
			SELECTCASE RESULTS
				CASE "[はい]"
					敵BATTLE_STATE_STR:0:エネミー名 = Lv5_サンドフィッシュ
					敵BATTLE_STATE_STR:2:エネミー名 = Lv4_人食い鳥
					敵BATTLE_STATE_STR:4:エネミー名 = Lv6_人食い鳥
					CALL 雑魚敵遭遇汎用処理
				CASE "[いいえ]"
					CALL 口上変数初期化
				CASEELSE
					CLEARLINE 1
					GOTO LOOP_MESSAGE
			ENDSELECT
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 砂丘の裏に回ると、砂魚と人食い鳥が一緒にいる場面に出くわしてしまった！
			KSTR:(K++) = 二種は共生状態にあるのだろう。魚と鳥は協力して君たちへと襲いかかってくる！
			CALL メッセージ欄表示用関数()

			敵BATTLE_STATE_STR:0:エネミー名 = Lv5_サンドフィッシュ
			敵BATTLE_STATE_STR:2:エネミー名 = Lv4_人食い鳥
			敵BATTLE_STATE_STR:4:エネミー名 = Lv6_人食い鳥
			CALL 雑魚敵遭遇汎用処理
			
			CALL 口上変数初期化
			WSTR:(K++) = 魚も鳥も、遠出して狩りをしているような様子ではなかった。
			KSTR:(K++) = となると付近に巣があるのだろう。周囲を探してみよう。
			CALL メッセージ欄表示用関数()
			SETBIT ダンジョン構造配列_人食い鳥の島:20:2, 1
			SETBIT ダンジョン構造配列_人食い鳥の島:20:4, 1
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_20_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 20
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_砂漠
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "21_3")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:21:3, 4)
			KSTR:(K++) = この先の巣は既に追い払った後だ。
			CALL メッセージ欄表示用関数(,,,0)
		ELSEIF 初来訪マス判定用フラグ == 0
			KSTR:(K++) = この先に人食い鳥の巣があるはずだ。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 少し先にある砂丘の影に、人食い鳥が降りていく姿が見えた。
			KSTR:(K++) = 恐らくはあそこに巣があるのだろう。
			WSTR:(K++) = 巣には当然多くの人食い鳥が詰めているはずだ。
			KSTR:(K++) = 鳥との戦いは連戦になる。十分な準備をしてから進もう。
			CALL メッセージ欄表示用関数()
			SETBIT ダンジョン構造配列_人食い鳥の島:21:3, 1
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_20_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 20
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_砂漠
	CASE "接続先"
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			KSTR:(K++) = 一旦引き返して別の道を行こう。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 君たちは砂丘に囲まれた地形に迷い込んでしまった。
			KSTR:(K++) = ここから登って移動するのは骨が折れそうだ。
			KSTR:(K++) = 一旦引き返して別の道を行こう。
			CALL メッセージ欄表示用関数()
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_21_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 21
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_砂漠
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4) == 0
			ダンジョンマス画像URL_重ね表示 = エネミーアイコン
		ENDIF
	CASE "接続先"
	CASE "マスイベント"
		CALL 口上変数初期化
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4)
			KSTR:(K++) = もう人食い鳥はどこかへと去っていった後だ。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 砂丘の影になり、昼間でもあまり気温が上がらない場所に人食い鳥の巣があった。
			WSTR:(K++) = 鳥の巣は同じようなものが幾つも並んでおり、多くの人食い鳥の姿が見える。
			KSTR:(K++) = 巣を駆除するには鳥たちとの連戦になるだろう。準備はいいだろうか。_PAGE
			KSTR:(K++) = 魔物の群れと戦いますか？（２連戦）
			KSTR:(K++) = BUTTON_[はい]
			KSTR:(K++) = BUTTON_[いいえ]
			CALL メッセージ欄表示用関数(,,,0)
			$LOOP_MESSAGE
			INPUTS
			SELECTCASE RESULTS
				CASE "[はい]"
					敵BATTLE_STATE_STR:1:エネミー名 = Lv4_人食い鳥
					敵BATTLE_STATE_STR:2:エネミー名 = Lv4_人食い鳥
					敵BATTLE_STATE_STR:4:エネミー名 = Lv4_人食い鳥
					CALL 雑魚敵遭遇汎用処理
					IF RESULT == 0
						敵BATTLE_STATE_STR:1:エネミー名 = Lv4_人食い鳥
						敵BATTLE_STATE_STR:3:エネミー名 = Lv4_人食い鳥
						敵BATTLE_STATE_STR:5:エネミー名 = Lv6_人食い鳥
						敵BATTLE_STATE_STR:7:エネミー名 = Lv4_人食い鳥
						CALL 雑魚敵遭遇汎用処理
						IF RESULT == 0
							SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4
							残り巣の数_人食い鳥の島 -= 1
							CALL 口上変数初期化
							WSTR:(K++) = 君たちは人食い鳥を倒し、巣を破壊した。
							WSTR:(K++) = 危険を知った人食い鳥たちはもうこの場所に戻ってくることはないだろう。
							KSTR:(K++) = 残りの巣の数：{残り巣の数_人食い鳥の島}つ
							CALL メッセージ欄表示用関数()
						ENDIF
					ENDIF
					CALL 口上変数初期化
				CASE "[いいえ]"
					CALL 口上変数初期化
				CASEELSE
					CLEARLINE 1
					GOTO LOOP_MESSAGE
			ENDSELECT
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_17_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 17
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_砂漠
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "18_5")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			KSTR:(K++) = 太陽が強く照りつけ、歩いているだけでも酷い汗が吹き出てくる。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 太陽が強く照りつけ、歩いているだけでも酷い汗が吹き出てくる。
			WSTR:(K++) = この島は少なくとも５０年は誰も住んでいないらしいが……
			WSTR:(K++) = これほど厳しい環境ならばそれも頷ける。
			KSTR:(K++) = 君たちは汗を拭い、先へと歩みを進める。
			CALL メッセージ欄表示用関数()
			SETBIT ダンジョン構造配列_人食い鳥の島:18:5, 1
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_18_5(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 18
マス分岐 = 5

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_砂漠
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4)
			ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱_開
		ELSE
			ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱
		ENDIF
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "19_6")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4)
			KSTR:(K++) = もう何もない。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 砂漠を歩いていると、なにか硬いものが足に当たった。
			WSTR:(K++) = 拾い上げてみるとそれはサボテンの樹液が固まった琥珀の一種だった。
			WSTR:(K++) = 小さくて形は悪いが、それなりの額で売れるだろう。帰還したら換金しておこう。
			KSTR:(K++) = %CALLNAME:PLAYER%は5000ルピを手に入れた！
			CALL メッセージ欄表示用関数()
			MONEY += 5000
			CALL 口上変数初期化
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4
			SETBIT ダンジョン構造配列_人食い鳥の島:19:6, 1
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_19_6(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 19
マス分岐 = 6

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_砂漠
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "21_6")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			KSTR:(K++) = 敵を探しますか？
			KSTR:(K++) = BUTTON_[はい]
			KSTR:(K++) = BUTTON_[いいえ]
			CALL メッセージ欄表示用関数(,,,0)
			$LOOP_MESSAGE
			INPUTS
			SELECTCASE RESULTS
				CASE "[はい]"
					敵BATTLE_STATE_STR:0:エネミー名 = Lv4_人食い鳥
					敵BATTLE_STATE_STR:3:エネミー名 = Lv4_人食い鳥
					敵BATTLE_STATE_STR:4:エネミー名 = Lv4_人食い鳥
					CALL 雑魚敵遭遇汎用処理
				CASE "[いいえ]"
					CALL 口上変数初期化
				CASEELSE
					CLEARLINE 1
					GOTO LOOP_MESSAGE
			ENDSELECT
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			KSTR:(K++) = 君たちの姿を見た人食い鳥の群れが、空から襲いかかってきた！
			CALL メッセージ欄表示用関数()

			敵BATTLE_STATE_STR:0:エネミー名 = Lv4_人食い鳥
			敵BATTLE_STATE_STR:3:エネミー名 = Lv4_人食い鳥
			敵BATTLE_STATE_STR:4:エネミー名 = Lv4_人食い鳥
			CALL 雑魚敵遭遇汎用処理
			
			SETBIT ダンジョン構造配列_人食い鳥の島:21:6, 1
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_21_6(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 21
マス分岐 = 6

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_砂漠
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "22_4")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "22_7")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			KSTR:(K++) = 砂に埋れた大きな骨がある。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 砂に埋れた大きな骨がある。大部分は風化していて、何の動物かはわからない。
			WSTR:(K++) = この島を探索していて、これほどの巨体を持つ魔物は見かけなかった。
			WSTR:(K++) = 恐らくは既に滅びたか、他の島に移動してしまった種の死体だろう。
			KSTR:(K++) = 君たちは昔に思いを馳せながら先へと進む。
			CALL メッセージ欄表示用関数()
			SETBIT ダンジョン構造配列_人食い鳥の島:22:4, 1
			SETBIT ダンジョン構造配列_人食い鳥の島:22:7, 1
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_22_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 22
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_砂漠
		IF ダンジョン内一時変数:2 == 0
			ダンジョンマス画像URL_重ね表示 = えっちハート
		ENDIF
	CASE "接続先"
	CASE "マスイベント"
		CALL 口上変数初期化
		IF ダンジョン内一時変数:2
		ELSE
			CALL ダンジョンハプニング_乳タッチ()
			IF RESULT
				ダンジョン内一時変数:2 = 1
			ENDIF
			CALL 口上変数初期化
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_22_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 22
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_砂漠
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4)
			ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱_開
		ELSE
			ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱
		ENDIF
	CASE "接続先"
	CASE "マスイベント"
		CALL 口上変数初期化
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4)
			KSTR:(K++) = もう何もない。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 巨大な骨の下、日陰になっている場所に野草の群生地を見つけた。
			WSTR:(K++) = 少し水分を含んだ砂を土台にして多くの植物が繁栄している。
			WSTR:(K++) = 幾つか傷に効く植物を見つけた。取り尽くさない程度に摘んでいこう。
			KSTR:(K++) = %CALLNAME:PLAYER%は薬草を３個手に入れた！
			CALL メッセージ欄表示用関数()
			CALL アイテム増減汎用処理("薬草", 3)
			CALL 口上変数初期化
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4
		ENDIF
		CALL 画面再描画
ENDSELECT



;---------------------------------------------------------------------------
;下ルート（巣２個）
;断崖
;---------------------------------------------------------------------------

@ダンジョンマス情報_人食い鳥の島_2_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 2
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "3_5")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			KSTR:(K++) = 人食い鳥が思い思いの方向に空を飛んでいく姿が見える。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 荒野を南に進んでいく。
			WSTR:(K++) = 人食い鳥が思い思いの方向に空を飛んでいく姿が見える。
			WSTR:(K++) = 彼らは島と島の間すら移動するほど飛行に長けた魔物だ。
			WSTR:(K++) = 手懐ければ非常に役立ちそうだが……気性が荒すぎて無理だろう。
			KSTR:(K++) = 君たちは空を見上げるのをやめ、先へと進む。
			CALL メッセージ欄表示用関数()
			SETBIT ダンジョン構造配列_人食い鳥の島:3:5, 1
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_人食い鳥の島_3_5(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 3
マス分岐 = 5

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "4_7")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ == 0
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			SETBIT ダンジョン構造配列_人食い鳥の島:4:7, 1
		ENDIF
		CALL 口上変数初期化
		KSTR:(K++) = 荒野はただ広がっている。もう少し進めばなにか変化がありそうだ。
		CALL メッセージ欄表示用関数(,,,0)
ENDSELECT

@ダンジョンマス情報_人食い鳥の島_4_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 4
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
		ダンジョンマス画像URL_重ね表示 = 右アイコン
	CASE "接続先"
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 荒野を進むうち、大地が大きく裂けた谷に行き当たった。
			WSTR:(K++) = 人食い鳥が空を飛んで谷底へ降りていく姿が見える。
			WSTR:(K++) = 下に降りられないかと周囲を調べてみると、なんとか進めそうな道を見つけた。
			KSTR:(K++) = 足を滑らせて落ちたりしないよう、気をつけて進もう
			CALL メッセージ欄表示用関数()
			SETBIT ダンジョン構造配列_人食い鳥の島:24:7, 1
			SETBIT ダンジョン構造配列_人食い鳥の島:24:7, 2
			SETBIT ダンジョン構造配列_人食い鳥の島:26:6, 1
			SETBIT ダンジョン構造配列_人食い鳥の島:26:7, 1
		ENDIF
		ダンジョン現在位置:0 = 24
		ダンジョン現在位置:1 = 7
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_24_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 24
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
		ダンジョンマス画像URL_重ね表示 = 左アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "26_6")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "26_7")
	CASE "マスイベント"
		CALL 口上変数初期化
		ダンジョン現在位置:0 = 4
		ダンジョン現在位置:1 = 7
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_人食い鳥の島_26_6(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 26
マス分岐 = 6

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "27_4")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			KSTR:(K++) = ゆっくりと崖沿いの道を下へと降りていく。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 君たちはゆっくりと崖沿いの道を下へと降りていく。
			WSTR:(K++) = 上の方では頼りなかった足場も、降りるにつれて少しずつ広くなっていく。
			WSTR:(K++) = 敵に襲われた時が不安だったが、この調子なら気をつければ戦闘も可能だろう。
			KSTR:(K++) = だがあまり長居したい場所ではない。さっさと巣を見つけよう。
			CALL メッセージ欄表示用関数()
			SETBIT ダンジョン構造配列_人食い鳥の島:27:4, 1
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_人食い鳥の島_27_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 27
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
		IF !GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4)
			ダンジョンマス画像URL_重ね表示 = 会話アイコン
		ENDIF
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "28_1")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "28_3")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4)
			KSTR:(K++) = しっかりとした蔦のロープが掛かっている。
			CALL メッセージ欄表示用関数(,,,0)
		ELSEIF 初来訪マス判定用フラグ == 0
			KSTR:(K++) = 崖下に人食い鳥の巣がある。
			CALL メッセージ欄表示用関数(,,,0)
			IF GETBIT(ダンジョン構造配列_人食い鳥の島:30:8, 4)
				WAIT
				CALL 口上変数初期化
				WSTR:(K++) = 君たちは回収した蔦を岩に結びつけ、即席のロープを作る。
				WSTR:(K++) = 蔦はしっかりとしていて、上り下りしてもちぎれたりはしないだろう。
				KSTR:(K++) = 君たちは一人ずつ谷底へと降りていく。
				CALL メッセージ欄表示用関数(,,,0)
				SETBIT ダンジョン構造配列_人食い鳥の島:28:1, 1
				CLEARBIT ダンジョン構造配列_人食い鳥の島:28:1, 3
				SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4
			ENDIF
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			SETBIT ダンジョン構造配列_人食い鳥の島:28:3, 1
			SETBIT ダンジョン構造配列_人食い鳥の島:28:1, 3
			CALL 口上変数初期化
			WSTR:(K++) = 道の途中で、崖下に人食い鳥の巣を見つけた。
			WSTR:(K++) = しかしそこは絶壁に囲まれており、降りられる道は見当たらない。
			KSTR:(K++) = どうにかして降りる手段があればいいのだが……
			CALL メッセージ欄表示用関数()
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_28_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 28
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "30_0")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "30_1")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			KSTR:(K++) = 上から見えた巣は少し離れたところにある。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 君たちは谷底に降りた。上から見えた巣は少し離れたところにある。
			WSTR:(K++) = 谷底には人食い鳥がどこからか集めてきたらしい物が散らばっていた。
			WSTR:(K++) = ほとんどはガラクタだが、中には使えるものが埋もれてるかもしれない。
			KSTR:(K++) = 少し周りを探索してみてもいいだろう。
			CALL メッセージ欄表示用関数()
			SETBIT ダンジョン構造配列_人食い鳥の島:30:0, 1
			SETBIT ダンジョン構造配列_人食い鳥の島:30:1, 1
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_30_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 30
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4) == 0
			ダンジョンマス画像URL_重ね表示 = 会話アイコン
		ENDIF
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "31_1")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			KSTR:(K++) = 上から見えた巣は少し離れたところにある。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 君たちが巣に向かって進んでいると、どこからか声が聞こえてきた。
			WSTR:(K++) = 「こっちこっち！　こっちです！」
			KSTR:(K++) = 呼ばれた方へ目線を向けると、大きな荷物を背負った青年が岩影に隠れていた。_PAGE
			WSTR:(K++) = 「あなた達も鳥に攫われたんですか？　それとも……」
			WSTR:(K++) = 君たちは首を横に振る。人食い鳥を追い払うために自ら訪れたのだ、と青年に説明した。
			KSTR:(K++) = 「あぁ、やっぱり！　強そうですもんね！」_PAGE
			WSTR:(K++) = 「ところで、僕は人食い鳥にいきなり攫われて連れて来られてしまいまして……」
			WSTR:(K++) = 「どうか助けてくれませんか？　お礼はしますから！」
			KSTR:(K++) = 青年はどうかこの通り！　と君たちに頭を下げる。
			CALL メッセージ欄表示用関数()
			$LOOP_MESSAGE_2
			CALL 口上変数初期化
			KSTR:(K++) = 青年を助けますか？
			KSTR:(K++) = BUTTON_[はい]
			KSTR:(K++) = BUTTON_[いいえ]
			CALL メッセージ欄表示用関数(,,,0)
			$LOOP_MESSAGE
			INPUTS
			SELECTCASE RESULTS
				CASE "[はい]"
					CALL 口上変数初期化
					WSTR:(K++) = 大した手間でもないし、見捨てるのは目覚めが悪い。
					WSTR:(K++) = 近くの港まで送るだけなら、と君たちは救助を了承した。
					KSTR:(K++) = 「ありがとうございます！」_PAGE
					WSTR:(K++) = 「早速お礼をさせてください！　こちらを差し上げます！」
					WSTR:(K++) = 青年は背負っていた巨大なリュックを開き、君たちに中を見せる。
					KSTR:(K++) = 一部に鉄甲が縫い付けられた戦士服や、神官の祭服などが詰め込まれていた。_PAGE
					WSTR:(K++) = 「私、服売りをしてまして。荷物は全部服なんです」
					WSTR:(K++) = 「助けてもらうだけでなく港まで送っていただけるのに、代金が足りないかもしれませんが……」
					KSTR:(K++) = 「品質には自信があります！　どうかもらってやってください！」_PAGE
					WSTR:(K++) = 青年の言う通り、服は丈夫で縫い目も丁寧な良い品のようだ。
					WSTR:(K++) = 断っても押し付けてきそうな雰囲気を感じたので、君たちは素直にお礼を受け取る。
					WSTR:(K++) = 服を変えれば気分も変わり、_COLOR_c0c070_新しいアビリティを扱えるようになる_かもしれない。
					WSTR:(K++) = 同じ服がサイズ違いでたくさんあるので_COLOR_c0c070_複数人が同じ服を着ることも可能_だ。
					KSTR:(K++) = 仲間に色々と着せて試してみるのもいいだろう。_PAGE
					WSTR:(K++) = お礼を受け取った君たちは一旦船に戻り、青年を乗せる。
					KSTR:(K++) = 探索が終わったら近くの港に降ろすとしよう。_PAGE
					WSTR:(K++) = 衣装「ファイターの服」を手に入れた！
					WSTR:(K++) = 衣装「ナイトの服」を手に入れた！
					WSTR:(K++) = 衣装「プリーストの服」を手に入れた！
					KSTR:(K++) = 衣装「ウィザードの服」を手に入れた！
					CALL 汎用衣装取得処理("ファイターの服")
					CALL 汎用衣装取得処理("ナイトの服")
					CALL 汎用衣装取得処理("プリーストの服")
					CALL 汎用衣装取得処理("ウィザードの服")
				CASE "[いいえ]"
					CALL 口上変数初期化
					KSTR:(K++) = 「そんなこと言わないでください！　どうかお願いします！」
					CALL メッセージ欄表示用関数()
					GOTO LOOP_MESSAGE_2
				CASEELSE
					CLEARLINE 1
					GOTO LOOP_MESSAGE
			ENDSELECT
			CALL メッセージ欄表示用関数()
			SETBIT ダンジョン構造配列_人食い鳥の島:31:1, 1
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_30_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 30
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4)
			ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱_開
		ELSE
			ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱
		ENDIF
	CASE "接続先"
	CASE "マスイベント"
		CALL 口上変数初期化
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4)
			KSTR:(K++) = もう何もない。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 谷底には様々なガラクタが落ちている。布の端切れや木箱の残骸、折れた剣など……
			WSTR:(K++) = 君たちはその中に、きらりと光る指輪を見つけた。
			WSTR:(K++) = 子鬼の顔が刻まれた少し珍しい指輪だ。
			WSTR:(K++) = 持ち主への手がかりは見当たらない。取得物として貰っていこう。
			KSTR:(K++) = %CALLNAME:PLAYER%はゴブリン殺しの指輪を手に入れた！
			CALL メッセージ欄表示用関数()
			CALL 汎用指輪取得処理("ゴブリン殺しの指輪")
			CALL 口上変数初期化
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_31_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 31
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4) == 0
			ダンジョンマス画像URL_重ね表示 = エネミーアイコン
		ENDIF
	CASE "接続先"
	CASE "マスイベント"
		CALL 口上変数初期化
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4)
			KSTR:(K++) = もう人食い鳥はどこかへと去っていった後だ。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 谷底の奥まった場所に、人食い鳥の巣がある。
			WSTR:(K++) = 鳥の巣は同じようなものが幾つも並んでおり、多くの人食い鳥の姿が見えた。
			KSTR:(K++) = 巣を駆除するには鳥たちとの連戦になるだろう。準備はいいだろうか。_PAGE
			KSTR:(K++) = 魔物の群れと戦いますか？（３連戦）
			KSTR:(K++) = BUTTON_[はい]
			KSTR:(K++) = BUTTON_[いいえ]
			CALL メッセージ欄表示用関数(,,,0)
			$LOOP_MESSAGE
			INPUTS
			SELECTCASE RESULTS
				CASE "[はい]"
					敵BATTLE_STATE_STR:1:エネミー名 = Lv4_人食い鳥
					敵BATTLE_STATE_STR:2:エネミー名 = Lv4_人食い鳥
					敵BATTLE_STATE_STR:4:エネミー名 = Lv4_人食い鳥
					敵BATTLE_STATE_STR:7:エネミー名 = Lv4_人食い鳥
					CALL 雑魚敵遭遇汎用処理
					IF RESULT == 0
						敵BATTLE_STATE_STR:0:エネミー名 = Lv4_人食い鳥
						敵BATTLE_STATE_STR:3:エネミー名 = Lv4_人食い鳥
						敵BATTLE_STATE_STR:4:エネミー名 = Lv4_人食い鳥
						CALL 雑魚敵遭遇汎用処理
						IF RESULT == 0
							敵BATTLE_STATE_STR:1:エネミー名 = Lv4_人食い鳥
							敵BATTLE_STATE_STR:3:エネミー名 = Lv4_人食い鳥
							敵BATTLE_STATE_STR:5:エネミー名 = Lv4_人食い鳥
							敵BATTLE_STATE_STR:7:エネミー名 = Lv4_人食い鳥
							CALL 雑魚敵遭遇汎用処理
							IF RESULT == 0
								SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4
								残り巣の数_人食い鳥の島 -= 1
								CALL 口上変数初期化
								WSTR:(K++) = 君たちは人食い鳥を倒し、巣を破壊した。
								WSTR:(K++) = 危険を知った人食い鳥たちはもうこの場所に戻ってくることはないだろう。
								KSTR:(K++) = 残りの巣の数：{残り巣の数_人食い鳥の島}つ
								CALL メッセージ欄表示用関数()
							ENDIF
						ENDIF
					ENDIF
					CALL 口上変数初期化
				CASE "[いいえ]"
					CALL 口上変数初期化
				CASEELSE
					CLEARLINE 1
					GOTO LOOP_MESSAGE
			ENDSELECT
		ENDIF
		CALL 画面再描画
ENDSELECT



@ダンジョンマス情報_人食い鳥の島_28_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 28
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "29_3")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "30_4")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			KSTR:(K++) = 敵を探しますか？
			KSTR:(K++) = BUTTON_[はい]
			KSTR:(K++) = BUTTON_[いいえ]
			CALL メッセージ欄表示用関数(,,,0)
			$LOOP_MESSAGE
			INPUTS
			SELECTCASE RESULTS
				CASE "[はい]"
					敵BATTLE_STATE_STR:0:エネミー名 = Lv5_マンイータープラント
					敵BATTLE_STATE_STR:1:エネミー名 = Lv5_マンイータープラント
					CALL 雑魚敵遭遇汎用処理
				CASE "[いいえ]"
					CALL 口上変数初期化
				CASEELSE
					CLEARLINE 1
					GOTO LOOP_MESSAGE
			ENDSELECT
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 崖沿いの道を進んでいると、岩壁に生えている蔦が少し動いた気がした……
			KSTR:(K++) = ……いや、これは蔦ではなく植物の魔物だ！
			CALL メッセージ欄表示用関数()

			敵BATTLE_STATE_STR:0:エネミー名 = Lv5_マンイータープラント
			敵BATTLE_STATE_STR:1:エネミー名 = Lv5_マンイータープラント
			CALL 雑魚敵遭遇汎用処理
			
			SETBIT ダンジョン構造配列_人食い鳥の島:29:3, 1
			SETBIT ダンジョン構造配列_人食い鳥の島:30:4, 1
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_29_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 29
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "30_2")
	CASE "マスイベント"
		CALL 口上変数初期化
		KSTR:(K++) = 崖沿いの道はまだ先に続いている。
		CALL メッセージ欄表示用関数(,,,0)
		IF 初来訪マス判定用フラグ == 0
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			SETBIT ダンジョン構造配列_人食い鳥の島:30:2, 1
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_30_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 30
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "31_3")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			KSTR:(K++) = 敵を探しますか？
			KSTR:(K++) = BUTTON_[はい]
			KSTR:(K++) = BUTTON_[いいえ]
			CALL メッセージ欄表示用関数(,,,0)
			$LOOP_MESSAGE
			INPUTS
			SELECTCASE RESULTS
				CASE "[はい]"
					敵BATTLE_STATE_STR:0:エネミー名 = Lv5_マンイータープラント
					敵BATTLE_STATE_STR:1:エネミー名 = Lv5_マンイータープラント
					敵BATTLE_STATE_STR:2:エネミー名 = Lv5_マンイータープラント
					CALL 雑魚敵遭遇汎用処理
				CASE "[いいえ]"
					CALL 口上変数初期化
				CASEELSE
					CLEARLINE 1
					GOTO LOOP_MESSAGE
			ENDSELECT
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 崖沿いの道を複数の蔦の魔物が塞いでいる。
			WSTR:(K++) = 近づけば戦闘になるだろうが、道を塞いでいるのなら仕方がない。
			KSTR:(K++) = 君たちは武器を構え、戦闘に入る。
			CALL メッセージ欄表示用関数()

			敵BATTLE_STATE_STR:0:エネミー名 = Lv5_マンイータープラント
			敵BATTLE_STATE_STR:1:エネミー名 = Lv5_マンイータープラント
			敵BATTLE_STATE_STR:2:エネミー名 = Lv5_マンイータープラント
			CALL 雑魚敵遭遇汎用処理
			
			SETBIT ダンジョン構造配列_人食い鳥の島:31:3, 1
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_31_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 31
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4)
			ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱_開
		ELSE
			ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱
		ENDIF
	CASE "接続先"
	CASE "マスイベント"
		CALL 口上変数初期化
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4)
			KSTR:(K++) = もう何もない。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 植物で塞がれた道の奥へ行くと、青い鉱石が地面に落ちていた。
			WSTR:(K++) = 鉱石の表面は常に濡れており、拭き取ってもじわりと水が染み出してくる。
			WSTR:(K++) = 周囲に活力を与えるという「癒やしの石」だろう。
			WSTR:(K++) = 売り物にはならない大きさだが、少し加工すれば耳飾りに出来そうだ。
			KSTR:(K++) = %CALLNAME:PLAYER%は癒やしの耳飾りを手に入れた！
			CALL メッセージ欄表示用関数()
			CALL 汎用耳飾り取得処理("癒やしの耳飾り")
			CALL 口上変数初期化
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_30_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 30
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
		IF ダンジョン内一時変数:3 == 0
			ダンジョンマス画像URL_重ね表示 = 回復アビ
		ENDIF
	CASE "接続先"
	CASE "マスイベント"
		CALL 口上変数初期化
		IF ダンジョン内一時変数:3
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 道の途中に、短い洞窟を見つけた。
			KSTR:(K++) = 覗き込めばすぐ奥が見える程度の洞穴だが、良い休憩場になるだろう。_PAGE
			KSTR:(K++) = 少し休憩していきますか？
			KSTR:(K++) = （PTメンバー全回復・ダンジョンを一度出るまで消滅）
			KSTR:(K++) = BUTTON_[はい]
			KSTR:(K++) = BUTTON_[いいえ]
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			$LOOP_MESSAGE
			INPUTS
			SELECTCASE RESULTS
				CASE "[はい]"
					KSTR:(K++) = 君たちは洞穴で十分な休息を取り、体力を回復した！
					CALL メッセージ欄表示用関数()
					ダンジョン内一時変数:3 = 1
					FOR LOCAL, 0, 4
						IF BATTLE_STATE:LOCAL:0 < 1
							BREAK
						ENDIF
						BATTLE_STATE:LOCAL:ＨＰ = BATTLE_STATE:LOCAL:最大ＨＰ
						BATTLE_STATE:LOCAL:ＭＰ = BATTLE_STATE:LOCAL:最大ＭＰ
					NEXT
				CASE "[いいえ]"
					KSTR:(K++) = まだ休憩するほど疲れてはいない。先に進もう。
					CALL メッセージ欄表示用関数()
				CASEELSE
					CLEARLINE 1
					GOTO LOOP_MESSAGE
			ENDSELECT
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_26_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 26
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "27_7")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			KSTR:(K++) = 敵を探しますか？
			KSTR:(K++) = BUTTON_[はい]
			KSTR:(K++) = BUTTON_[いいえ]
			CALL メッセージ欄表示用関数(,,,0)
			$LOOP_MESSAGE
			INPUTS
			SELECTCASE RESULTS
				CASE "[はい]"
					敵BATTLE_STATE_STR:1:エネミー名 = Lv4_人食い鳥
					敵BATTLE_STATE_STR:2:エネミー名 = Lv4_人食い鳥
					敵BATTLE_STATE_STR:5:エネミー名 = Lv4_人食い鳥
					敵BATTLE_STATE_STR:6:エネミー名 = Lv6_人食い鳥
					CALL 雑魚敵遭遇汎用処理
				CASE "[いいえ]"
					CALL 口上変数初期化
				CASEELSE
					CLEARLINE 1
					GOTO LOOP_MESSAGE
			ENDSELECT
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 谷底へ降りず、崖の周りを探索してみる。
			WSTR:(K++) = 楽に降りられる道が他にあればいいが……。
			KSTR:(K++) = ……しかし、探索するうちに人食い鳥の群れに見つかってしまった！
			CALL メッセージ欄表示用関数()

			敵BATTLE_STATE_STR:1:エネミー名 = Lv4_人食い鳥
			敵BATTLE_STATE_STR:2:エネミー名 = Lv4_人食い鳥
			敵BATTLE_STATE_STR:5:エネミー名 = Lv4_人食い鳥
			敵BATTLE_STATE_STR:6:エネミー名 = Lv6_人食い鳥
			CALL 雑魚敵遭遇汎用処理
			
			SETBIT ダンジョン構造配列_人食い鳥の島:27:7, 1
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_27_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 27
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "29_6")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "29_8")
	CASE "マスイベント"
		CALL 口上変数初期化
		KSTR:(K++) = 崩れた地面や岩などで見通しが悪い。
		CALL メッセージ欄表示用関数(,,,0)
		IF 初来訪マス判定用フラグ == 0
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			SETBIT ダンジョン構造配列_人食い鳥の島:29:6, 1
			SETBIT ダンジョン構造配列_人食い鳥の島:29:8, 1
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_29_6(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 29
マス分岐 = 6

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "30_5")
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "30_6")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			KSTR:(K++) = 近くに人食い鳥の巣がある。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			SETBIT ダンジョン構造配列_人食い鳥の島:30:5, 1
			SETBIT ダンジョン構造配列_人食い鳥の島:30:5, 2
			WSTR:(K++) = すぐ近くからぎゃあぎゃあと人食い鳥の鳴き声が聞こえてくる。
			WSTR:(K++) = 岩に隠れて覗いてみると、人食い鳥の巣が見えた。
			KSTR:(K++) = 鳥の群れはまだ君たちに気がついていない。近づくのは容易だろう。
			CALL メッセージ欄表示用関数()
		ENDIF
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4) == 0 && GETBIT(ダンジョン構造配列_人食い鳥の島:30:5, 4) == 0
			CALL 知識技能所持者検索("錬金知識", 1)
			LOCAL = RESULT
			IF LOCAL > -1
				CALL 口上変数初期化
				WSTR:(K++) = %CALLNAME:LOCAL%は、近くの地層に砂岩が含まれていることに気づいた。
				WSTR:(K++) = 簡単な錬金術で砂岩を砂に戻し、巣を崖崩れに巻き込むことができるだろう。
				KSTR:(K++) = 崖崩れを起こしますか？
				KSTR:(K++) = BUTTON_[はい]
				KSTR:(K++) = BUTTON_[いいえ]
				CALL メッセージ欄表示用関数(,,,0)
				$LOOP_MESSAGE
				INPUTS
				SELECTCASE RESULTS
					CASE "[はい]"
						CALL 口上変数初期化
						WSTR:(K++) = %CALLNAME:LOCAL%は錬金術を使い、崖崩れを起こした！
						WSTR:(K++) = 土砂はすぐそばの鳥の巣を襲い、砂と土に埋めていく。
						WSTR:(K++) = 鳥のほとんどは慌てて土砂から逃れ、どこかへと飛んでいった。
						KSTR:(K++) = あの様子ならもうここには戻ってこないだろう。_PAGE
						WSTR:(K++) = 更に砂岩を崩したことで、岩の向こうに進む道が出来た。
						KSTR:(K++) = 何か良いものがあるかもしれない。進んでみよう。
						KSTR:(K++) = 残りの巣の数：{残り巣の数_人食い鳥の島}つ
						残り巣の数_人食い鳥の島 -= 1
						CALL メッセージ欄表示用関数()
						SETBIT ダンジョン構造配列_人食い鳥の島:30:6, 1
						SETBIT ダンジョン構造配列_人食い鳥の島:30:5, 4
					CASE "[いいえ]"
						CALL 口上変数初期化
						WSTR:(K++) = 自分たちがいるところまで崩れたら危ない。
						KSTR:(K++) = 鳥の巣は正攻法で駆除することにしよう。
						CALL メッセージ欄表示用関数()
					CASEELSE
						CLEARLINE 1
						GOTO LOOP_MESSAGE
				ENDSELECT
				SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4
			ENDIF
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_30_5(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 30
マス分岐 = 5

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4) == 0
			ダンジョンマス画像URL_重ね表示 = エネミーアイコン
		ENDIF
	CASE "接続先"
	CASE "マスイベント"
		CALL 口上変数初期化
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4)
			KSTR:(K++) = もう人食い鳥はどこかへと去っていった後だ。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 崖沿いの平地に、人食い鳥の巣がある。
			WSTR:(K++) = 鳥の巣は同じようなものが幾つも並んでおり、多くの人食い鳥の姿が見えた。
			KSTR:(K++) = 巣を駆除するには鳥たちとの連戦になるだろう。準備はいいだろうか。_PAGE
			KSTR:(K++) = 魔物の群れと戦いますか？（３連戦）
			KSTR:(K++) = BUTTON_[はい]
			KSTR:(K++) = BUTTON_[いいえ]
			CALL メッセージ欄表示用関数(,,,0)
			$LOOP_MESSAGE
			INPUTS
			SELECTCASE RESULTS
				CASE "[はい]"
					敵BATTLE_STATE_STR:1:エネミー名 = Lv4_人食い鳥
					敵BATTLE_STATE_STR:2:エネミー名 = Lv4_人食い鳥
					敵BATTLE_STATE_STR:4:エネミー名 = Lv4_人食い鳥
					敵BATTLE_STATE_STR:7:エネミー名 = Lv4_人食い鳥
					CALL 雑魚敵遭遇汎用処理
					IF RESULT == 0
						敵BATTLE_STATE_STR:0:エネミー名 = Lv4_人食い鳥
						敵BATTLE_STATE_STR:3:エネミー名 = Lv4_人食い鳥
						敵BATTLE_STATE_STR:4:エネミー名 = Lv4_人食い鳥
						CALL 雑魚敵遭遇汎用処理
						IF RESULT == 0
							敵BATTLE_STATE_STR:1:エネミー名 = Lv4_人食い鳥
							敵BATTLE_STATE_STR:3:エネミー名 = Lv4_人食い鳥
							敵BATTLE_STATE_STR:5:エネミー名 = Lv4_人食い鳥
							敵BATTLE_STATE_STR:7:エネミー名 = Lv4_人食い鳥
							CALL 雑魚敵遭遇汎用処理
							IF RESULT == 0
								SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4
								残り巣の数_人食い鳥の島 -= 1
								CALL 口上変数初期化
								WSTR:(K++) = 君たちは人食い鳥を倒し、巣を破壊した。
								WSTR:(K++) = 危険を知った人食い鳥たちはもうこの場所に戻ってくることはないだろう。
								KSTR:(K++) = 残りの巣の数：{残り巣の数_人食い鳥の島}つ
								CALL メッセージ欄表示用関数()
							ENDIF
						ENDIF
					ENDIF
					CALL 口上変数初期化
				CASE "[いいえ]"
					CALL 口上変数初期化
				CASEELSE
					CLEARLINE 1
					GOTO LOOP_MESSAGE
			ENDSELECT
		ENDIF
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_人食い鳥の島_30_6(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 30
マス分岐 = 6

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4)
			ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱_開
		ELSE
			ダンジョンマス画像URL_重ね表示 = 宝箱アイコン_木箱
		ENDIF
	CASE "接続先"
	CASE "マスイベント"
		CALL 口上変数初期化
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4)
			KSTR:(K++) = もう何もない。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 砂岩を崩した土砂の上を歩く。
			WSTR:(K++) = ふと、君たちは土砂の中に変わった色の石があることに気づく。
			WSTR:(K++) = 砕くと周囲に魔力をバラ撒く鉱石だ。一部では「胆力の薬」と呼ばれている。
			WSTR:(K++) = 戦闘中に使えば全員の奥義ゲージを増やす効果があるらしい。
			WSTR:(K++) = 今後の戦闘に役立つだろう。拾って持っていこう。
			KSTR:(K++) = %CALLNAME:PLAYER%は胆力の薬を手に入れた！
			CALL メッセージ欄表示用関数()
			CALL アイテム増減汎用処理("胆力の薬", 1)
			CALL 口上変数初期化
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_人食い鳥の島_29_8(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 29
マス分岐 = 8

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "30_8")
	CASE "マスイベント"
		CALL 口上変数初期化
		IF 初来訪マス判定用フラグ == 0
			KSTR:(K++) = 敵を探しますか？
			KSTR:(K++) = BUTTON_[はい]
			KSTR:(K++) = BUTTON_[いいえ]
			CALL メッセージ欄表示用関数(,,,0)
			$LOOP_MESSAGE
			INPUTS
			SELECTCASE RESULTS
				CASE "[はい]"
					敵BATTLE_STATE_STR:1:エネミー名 = Lv5_マンイータープラント
					敵BATTLE_STATE_STR:3:エネミー名 = Lv5_マンイータープラント
					敵BATTLE_STATE_STR:5:エネミー名 = Lv5_マンイータープラント
					CALL 雑魚敵遭遇汎用処理
				CASE "[いいえ]"
					CALL 口上変数初期化
				CASEELSE
					CLEARLINE 1
					GOTO LOOP_MESSAGE
			ENDSELECT
		ELSE
			;最初に訪れた時
			SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
			WSTR:(K++) = 崖の周りに巨大な植物の玉を見つけた。
			WSTR:(K++) = ただの蔦の塊にも見えるが、これは植物系魔物の一種だ。
			KSTR:(K++) = 目標の人食い鳥ではないが撤退時に絡まれても困る。先に駆除しておこう。
			CALL メッセージ欄表示用関数()

			敵BATTLE_STATE_STR:1:エネミー名 = Lv5_マンイータープラント
			敵BATTLE_STATE_STR:3:エネミー名 = Lv5_マンイータープラント
			敵BATTLE_STATE_STR:5:エネミー名 = Lv5_マンイータープラント
			CALL 雑魚敵遭遇汎用処理
			
			SETBIT ダンジョン構造配列_人食い鳥の島:30:8, 1
		ENDIF
		CALL 画面再描画
ENDSELECT

@ダンジョンマス情報_人食い鳥の島_30_8(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 30
マス分岐 = 8

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_荒野
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4) == 0
			ダンジョンマス画像URL_重ね表示 = 会話アイコン
		ENDIF
	CASE "接続先"
	CASE "マスイベント"
		CALL 口上変数初期化
		IF GETBIT(ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4)
			KSTR:(K++) = もう何もない。
			CALL メッセージ欄表示用関数(,,,0)
		ELSE
			IF 初来訪マス判定用フラグ == 0
				KSTR:(K++) = 無数の蔦が転がっている。
				CALL メッセージ欄表示用関数(,,,0)
			ELSE
				;最初に訪れた時
				SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 2
				WSTR:(K++) = 植物系魔物がいた奥には、無数の蔦が転がっている。
				WSTR:(K++) = これは先程の魔物と同じ種の死体のようだ。
				WSTR:(K++) = 死んだ仲間の体が土を肥やし、新たな仲間が生まれる土壌となる。
				KSTR:(K++) = 植物系の魔物にはよくある生態だ。
				CALL メッセージ欄表示用関数()
			ENDIF
			IF GETBIT(ダンジョン構造配列_人食い鳥の島:27:4, 2)
				CALL 口上変数初期化
				WSTR:(K++) = 君たちはこの蔦が崖下に降りるのに使えるのではないかと思いついた。
				WSTR:(K++) = 試しに引っ張ってみるが、蔦はとても丈夫で体重を支えるのに十分そうに思える。
				KSTR:(K++) = 巣が見えていた崖に戻り、ロープ代わりに使ってみよう。
				CALL メッセージ欄表示用関数()
				SETBIT ダンジョン構造配列_人食い鳥の島:マス深度:マス分岐, 4
			ENDIF
		ENDIF
		CALL 画面再描画
ENDSELECT



