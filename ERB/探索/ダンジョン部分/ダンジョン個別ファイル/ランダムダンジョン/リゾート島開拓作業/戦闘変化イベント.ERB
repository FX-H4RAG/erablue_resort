
@イベント_リゾート島開拓作業_ランダム_属性エレメントの強化
#DIM 属性番号

CALL 口上変数初期化
IF ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 == "イベント完了"
	KSTR:(K++) = 特に変わった様子はない。
	CALL メッセージ欄表示用関数(,,,0)
ELSE
	;最初に訪れた時
	属性番号 = RAND:6
	WSTR:(K++) = %CALLNAME:MASTER%たちが探索していると、地面から強い魔力が吹き出している穴を見つけた。
	WSTR:(K++) = どうやら地脈の流れが集まり、%属性数値文字列変換(属性番号)%属性の魔力として表出しているようだ。
	KSTR:(K++) = この魔力を使えば、この探索中だけだが%属性数値文字列変換(属性番号)%属性のダメージを上げることが出来るだろう。_PAGE
	
	KSTR:(K++) = どうしますか？
	KSTR:(K++) = 取得できる探索中加護：%属性数値文字列変換(属性番号)%属性ダメージUP（20％）
	IF ランダムダンジョン中加護 != ""
		KSTR:(K++) = 現在の探索中加護：なし
		KSTR:(K++) = BUTTON_[加護を取得する]
	ELSE
		KSTR:(K++) = 現在の探索中加護：%ランダムダンジョン中加護%
		KSTR:(K++) = BUTTON_[加護を入れ替える]
	ENDIF
	KSTR:(K++) = BUTTON_[何もしない]
	CALL メッセージ欄表示用関数(,,,0)
	CALL 口上変数初期化
	$LOOP_MESSAGE
	BINPUTS
	SELECTCASE RESULTS
		CASE "加護を取得する", "加護を入れ替える"
			WSTR:(K++) = 探索の助けになりそうだ。
			WSTR:(K++) = %CALLNAME:MASTER%たちは溢れ出す魔力を利用し、%属性数値文字列変換(属性番号)%属性のダメージを上げる加護を取得した！
			ランダムダンジョン中加護 = %属性数値文字列変換(属性番号)%属性ダメージUP_20％
			WSTR:(K++) = %CALLNAME:MASTER%たちは加護を取得したことを確認すると、満足げに探索に戻った。
		CASE "何もしない"
			WSTR:(K++) = 今回は必要なさそうだ。
			WSTR:(K++) = %CALLNAME:MASTER%たちは何もせずに探索に戻った。
	ENDSELECT
	CALL メッセージ欄表示用関数(,,,0)
	CALL 接続ルート全開放処理((ダンジョン現在位置:0), (ダンジョン現在位置:1))
	ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 = イベント完了
	CALL 口上変数初期化
ENDIF
CALL 画面再描画

@固有戦闘開始時処理_特殊_火属性ダメージUP_20％
;味方全体へのバフを貼る
{
DT_ROW_ADD "戦闘効果データベース", "効果名", "ランダムダンジョン加護", "バフ・デバフフラグ", "バフ", "適用範囲", "味方全体",
	"効果枠", "火強化_ランダム加護", "対象能力", "火強化", "効果量_割合", 0, "効果量_固定値", 20,
	"持続ターン", -1, "持続回数", -1, "持続行動回数", -1, "持続被ダメ回数", -1, "消去不可フラグ", 1, "特殊表示オプション", 0
}

@固有戦闘開始時処理_特殊_水属性ダメージUP_20％
;味方全体へのバフを貼る
{
DT_ROW_ADD "戦闘効果データベース", "効果名", "ランダムダンジョン加護", "バフ・デバフフラグ", "バフ", "適用範囲", "味方全体",
	"効果枠", "水強化_ランダム加護", "対象能力", "水強化", "効果量_割合", 0, "効果量_固定値", 20,
	"持続ターン", -1, "持続回数", -1, "持続行動回数", -1, "持続被ダメ回数", -1, "消去不可フラグ", 1, "特殊表示オプション", 0
}

@固有戦闘開始時処理_特殊_風属性ダメージUP_20％
;味方全体へのバフを貼る
{
DT_ROW_ADD "戦闘効果データベース", "効果名", "ランダムダンジョン加護", "バフ・デバフフラグ", "バフ", "適用範囲", "味方全体",
	"効果枠", "風強化_ランダム加護", "対象能力", "風強化", "効果量_割合", 0, "効果量_固定値", 20,
	"持続ターン", -1, "持続回数", -1, "持続行動回数", -1, "持続被ダメ回数", -1, "消去不可フラグ", 1, "特殊表示オプション", 0
}

@固有戦闘開始時処理_特殊_土属性ダメージUP_20％
;味方全体へのバフを貼る
{
DT_ROW_ADD "戦闘効果データベース", "効果名", "ランダムダンジョン加護", "バフ・デバフフラグ", "バフ", "適用範囲", "味方全体",
	"効果枠", "土強化_ランダム加護", "対象能力", "土強化", "効果量_割合", 0, "効果量_固定値", 20,
	"持続ターン", -1, "持続回数", -1, "持続行動回数", -1, "持続被ダメ回数", -1, "消去不可フラグ", 1, "特殊表示オプション", 0
}

@固有戦闘開始時処理_特殊_光属性ダメージUP_20％
;味方全体へのバフを貼る
{
DT_ROW_ADD "戦闘効果データベース", "効果名", "ランダムダンジョン加護", "バフ・デバフフラグ", "バフ", "適用範囲", "味方全体",
	"効果枠", "光強化_ランダム加護", "対象能力", "光強化", "効果量_割合", 0, "効果量_固定値", 20,
	"持続ターン", -1, "持続回数", -1, "持続行動回数", -1, "持続被ダメ回数", -1, "消去不可フラグ", 1, "特殊表示オプション", 0
}

@固有戦闘開始時処理_特殊_闇属性ダメージUP_20％
;味方全体へのバフを貼る
{
DT_ROW_ADD "戦闘効果データベース", "効果名", "ランダムダンジョン加護", "バフ・デバフフラグ", "バフ", "適用範囲", "味方全体",
	"効果枠", "闇強化_ランダム加護", "対象能力", "闇強化", "効果量_割合", 0, "効果量_固定値", 20,
	"持続ターン", -1, "持続回数", -1, "持続行動回数", -1, "持続被ダメ回数", -1, "消去不可フラグ", 1, "特殊表示オプション", 0
}


@イベント_リゾート島開拓作業_ランダム_奇妙な学者
#DIM 属性番号

CALL 口上変数初期化
IF ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 == "イベント完了"
	KSTR:(K++) = 特に変わった様子はない。
	CALL メッセージ欄表示用関数(,,,0)
ELSE
	;最初に訪れた時
	属性番号 = RAND:3
	WSTR:(K++) = %CALLNAME:MASTER%たちが探索していると、島の開拓依頼を受けた騎空士と出会った。
	WSTR:(K++) = 騎空士は普段は学者をしており、フィールドワークのついでに研究費を稼ぐために騎空士業を行っているらしい。
	SELECTCASE 属性番号
		CASE 0
			WSTR:(K++) = 研究している題材は「通常攻撃の性能について」だそうだ。
			KSTR:(K++) = 学者は、この探索中だけだが通常攻撃ダメージを上げる魔法を掛けようかと提案してきた。_PAGE
		CASE 1
			WSTR:(K++) = 研究している題材は「ダメージアビリティの性能について」だそうだ。
			KSTR:(K++) = 学者は、この探索中だけだがアビリティダメージを上げる魔法を掛けようかと提案してきた。_PAGE
		CASE 2
			WSTR:(K++) = 研究している題材は「奥義の性能について」だそうだ。
			KSTR:(K++) = 学者は、この探索中だけだが奥義ダメージを上げる魔法を掛けようかと提案してきた。_PAGE
	ENDSELECT
	
	KSTR:(K++) = どうしますか？
	SELECTCASE 属性番号
		CASE 0
			KSTR:(K++) = 取得できる探索中加護：通常攻撃ダメージUP（30％）
		CASE 1
			KSTR:(K++) = 取得できる探索中加護：アビリティダメージUP（25％）
		CASE 2
			KSTR:(K++) = 取得できる探索中加護：奥義ダメージUP（20％）
	ENDSELECT
	IF ランダムダンジョン中加護 != ""
		KSTR:(K++) = 現在の探索中加護：なし
		KSTR:(K++) = BUTTON_[加護を取得する]
	ELSE
		KSTR:(K++) = 現在の探索中加護：%ランダムダンジョン中加護%
		KSTR:(K++) = BUTTON_[加護を入れ替える]
	ENDIF
	KSTR:(K++) = BUTTON_[何もしない]
	CALL メッセージ欄表示用関数(,,,0)
	CALL 口上変数初期化
	$LOOP_MESSAGE
	BINPUTS
	SELECTCASE RESULTS
		CASE "加護を取得する", "加護を入れ替える"
			WSTR:(K++) = 探索の助けになりそうだ。
			SELECTCASE 属性番号
				CASE 0
					WSTR:(K++) = %CALLNAME:MASTER%たちは学者の厚意に甘え、通常攻撃のダメージを上げる加護を取得した！
					ランダムダンジョン中加護 = 通常攻撃ダメージUP_30％
				CASE 1
					WSTR:(K++) = %CALLNAME:MASTER%たちは学者の厚意に甘え、アビリティのダメージを上げる加護を取得した！
					ランダムダンジョン中加護 = アビリティダメージUP_25％
				CASE 2
					WSTR:(K++) = %CALLNAME:MASTER%たちは学者の厚意に甘え、奥義のダメージを上げる加護を取得した！
					ランダムダンジョン中加護 = 奥義ダメージUP_20％
			ENDSELECT
			WSTR:(K++) = %CALLNAME:MASTER%たちは学者にお礼を述べ、満足げに探索に戻った。
		CASE "何もしない"
			WSTR:(K++) = 今回は必要なさそうだ。
			WSTR:(K++) = %CALLNAME:MASTER%たちは学者に断りを入れて別れ、そのまま探索に戻った。
	ENDSELECT
	CALL メッセージ欄表示用関数(,,,0)
	CALL 接続ルート全開放処理((ダンジョン現在位置:0), (ダンジョン現在位置:1))
	ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 = イベント完了
	CALL 口上変数初期化
ENDIF
CALL 画面再描画

@固有戦闘開始時処理_特殊_通常攻撃ダメージUP_30％
;味方全体へのバフを貼る
{
DT_ROW_ADD "戦闘効果データベース", "効果名", "ランダムダンジョン加護", "バフ・デバフフラグ", "バフ", "適用範囲", "味方全体",
	"効果枠", "通常攻撃強化_ランダム加護", "対象能力", "ダメージ補正_通常攻撃ダメージ", "効果量_割合", 30, "効果量_固定値", 0,
	"持続ターン", -1, "持続回数", -1, "持続行動回数", -1, "持続被ダメ回数", -1, "消去不可フラグ", 1, "特殊表示オプション", 0
}

@固有戦闘開始時処理_特殊_アビリティダメージUP_25％
;味方全体へのバフを貼る
{
DT_ROW_ADD "戦闘効果データベース", "効果名", "ランダムダンジョン加護", "バフ・デバフフラグ", "バフ", "適用範囲", "味方全体",
	"効果枠", "アビリティ攻撃強化_ランダム加護", "対象能力", "ダメージ補正_アビリティダメージ", "効果量_割合", 25, "効果量_固定値", 0,
	"持続ターン", -1, "持続回数", -1, "持続行動回数", -1, "持続被ダメ回数", -1, "消去不可フラグ", 1, "特殊表示オプション", 0
}

@固有戦闘開始時処理_特殊_奥義ダメージUP_20％
;味方全体へのバフを貼る
{
DT_ROW_ADD "戦闘効果データベース", "効果名", "ランダムダンジョン加護", "バフ・デバフフラグ", "バフ", "適用範囲", "味方全体",
	"効果枠", "奥義強化_ランダム加護", "対象能力", "ダメージ補正_奥義ダメージ", "効果量_割合", 20, "効果量_固定値", 0,
	"持続ターン", -1, "持続回数", -1, "持続行動回数", -1, "持続被ダメ回数", -1, "消去不可フラグ", 1, "特殊表示オプション", 0
}



