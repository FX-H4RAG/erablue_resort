
@イベント_リゾート島開拓作業_ランダム_調合知識イベ１
CALL 口上変数初期化
IF ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):0 == "イベント完了"
	KSTR:(K++) = 特に変わった様子はない。
	CALL メッセージ欄表示用関数(,,,0)
ELSE
	;最初に訪れた時
	WSTR:(K++) = 妙な形の葉っぱを付けた低木の群生地を見つけた。
	CALL 知識技能所持者検索("調合知識", 1)
	LOCAL = RESULT
	IF LOCAL > -1
		WSTR:(K++) = %CALLNAME:LOCAL%はその葉っぱがポーションに使われる薬草になることに気づいた。
		WSTR:(K++) = この場で調合すれば即席のポーションとして使えるだろう。
		WSTR:(K++) = 日持ちしない薬草のためこの探索中にしか持たないが、十分役立つはずだ。
		LOCAL:1 = RAND:3 + 1
		KSTR:(K++) = %CALLNAME:PLAYER%たちは「即席オールポーション」を{LOCAL:1}個に手に入れた！
		CALL アイテム増減汎用処理("即席オールポーション", LOCAL:1)
		ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):0 = イベント完了
	ELSE
		WSTR:(K++) = %CALLNAME:PLAYER%たちにはそれ以上のことはわからなかった。
		KSTR:(K++) = 調合知識があればどんな樹木かわかったかもしれないが……。
	ENDIF
	CALL メッセージ欄表示用関数()
	CALL 接続ルート全開放処理((ダンジョン現在位置:0), (ダンジョン現在位置:1))
	CALL 口上変数初期化
ENDIF
CALL 画面再描画

@イベント_リゾート島開拓作業_ランダム_調合知識イベ２
CALL 口上変数初期化
IF ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):0 == "イベント完了"
	KSTR:(K++) = 特に変わった様子はない。
	CALL メッセージ欄表示用関数(,,,0)
ELSE
	;最初に訪れた時
	WSTR:(K++) = 妙な形の葉っぱを付けた低木の群生地を見つけた。
	CALL 知識技能所持者検索("調合知識", 1)
	LOCAL = RESULT
	IF LOCAL > -1
		WSTR:(K++) = %CALLNAME:LOCAL%はその木が魔力を貯蔵する実を付けていることに気づいた。
		WSTR:(K++) = 収穫してしまうとすぐに魔力は霧散してしまうが、この場で回復するには問題ない。
		LOCAL:1 = RAND:3 + 1
		KSTR:(K++) = %CALLNAME:PLAYER%たちのＭＰが{LOCAL:1 * 50}回復した！
		CALL 探索中全体回復_ＭＰ(LOCAL:1 * 50)
		ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):0 = イベント完了
	ELSE
		WSTR:(K++) = %CALLNAME:PLAYER%たちにはそれ以上のことはわからなかった。
		KSTR:(K++) = 調合知識があればどんな樹木かわかったかもしれないが……。
	ENDIF
	CALL メッセージ欄表示用関数()
	CALL 接続ルート全開放処理((ダンジョン現在位置:0), (ダンジョン現在位置:1))
	CALL 口上変数初期化
ENDIF
CALL 画面再描画

@イベント_リゾート島開拓作業_ランダム_調合知識イベ３
CALL 口上変数初期化
IF ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):0 == "イベント完了"
	KSTR:(K++) = 特に変わった様子はない。
	CALL メッセージ欄表示用関数(,,,0)
ELSE
	;最初に訪れた時
	WSTR:(K++) = 妙な形の葉っぱを付けた低木の群生地を見つけた。
	CALL 知識技能所持者検索("調合知識", 1)
	LOCAL = RESULT
	IF LOCAL > -1
		WSTR:(K++) = %CALLNAME:LOCAL%はその葉っぱが一時的な魔力向上薬になることに気づいた。
		WSTR:(K++) = 調合した薬を飲むと、君たちの体に力が漲る！
		KSTR:(K++) = %CALLNAME:PLAYER%たちの奥義が即座に発動可能になった！
		CALL 探索中全体回復_奥義ゲージ(100)
		ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):0 = イベント完了
	ELSE
		WSTR:(K++) = %CALLNAME:PLAYER%たちにはそれ以上のことはわからなかった。
		KSTR:(K++) = 調合知識があればどんな樹木かわかったかもしれないが……。
	ENDIF
	CALL メッセージ欄表示用関数()
	CALL 接続ルート全開放処理((ダンジョン現在位置:0), (ダンジョン現在位置:1))
	CALL 口上変数初期化
ENDIF
CALL 画面再描画

@イベント_リゾート島開拓作業_ランダム_魔法知識イベ１
CALL 口上変数初期化
IF ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):0 == "イベント完了"
	KSTR:(K++) = 特に変わった様子はない。
	CALL メッセージ欄表示用関数(,,,0)
ELSE
	;最初に訪れた時
	WSTR:(K++) = 岩の陰に魔力を感じる石を見つけた。
	KSTR:(K++) = 拾ってみますか？
	KSTR:(K++) = BUTTON_[はい]
	KSTR:(K++) = BUTTON_[いいえ]
	CALL メッセージ欄表示用関数(,,,0)
	CALL 口上変数初期化
	$LOOP_MESSAGE
	BINPUTS
	SELECTCASE RESULTS
		CASE "[はい]"
			CALL 知識技能所持者検索("魔法知識", 1)
			LOCAL = RESULT
			IF LOCAL > -1
				WSTR:(K++) = %CALLNAME:LOCAL%が鑑定したところ、どうやら騎空艇の動力になる風の魔石のようだ。
				WSTR:(K++) = 持ち帰って売ればそこそこの金になるだろう！
				KSTR:(K++) = %CALLNAME:PLAYER%たちは５万ルピを手に入れた。
				MONEY += 50000
			ELSE
				WSTR:(K++) = 何かはわからないが、綺麗な魔石だ。
				WSTR:(K++) = 持ち帰って売れば換金出来るかもしれない。
				KSTR:(K++) = %CALLNAME:PLAYER%たちは１万ルピを手に入れた。
				MONEY += 10000
			ENDIF
			ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):0 = イベント完了
		CASE "[いいえ]"
			WSTR:(K++) = 下手に触ると何が起こるかわからず危険だ。放置しよう。
			KSTR:(K++) = 魔法知識があれば利用出来たかもしれないが……。
		CASEELSE
			CLEARLINE 1
			REUSELASTLINE
			GOTO LOOP_MESSAGE
	ENDSELECT
	CALL メッセージ欄表示用関数()
	CALL 接続ルート全開放処理((ダンジョン現在位置:0), (ダンジョン現在位置:1))
	CALL 口上変数初期化
ENDIF
CALL 画面再描画

@イベント_リゾート島開拓作業_ランダム_魔法知識イベ２
#DIM レベル記録

CALL 口上変数初期化
IF ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):0 == "イベント完了"
	KSTR:(K++) = 特に変わった様子はない。
	CALL メッセージ欄表示用関数(,,,0)
ELSE
	;最初に訪れた時
	WSTR:(K++) = 岩の陰に魔力を感じる石を見つけた。
	KSTR:(K++) = 拾ってみますか？
	KSTR:(K++) = BUTTON_[はい]
	KSTR:(K++) = BUTTON_[いいえ]
	CALL メッセージ欄表示用関数(,,,0)
	CALL 口上変数初期化
	$LOOP_MESSAGE
	BINPUTS
	SELECTCASE RESULTS
		CASE "[はい]"
			CALL 知識技能所持者検索("魔法知識", 1)
			LOCAL = RESULT
			IF LOCAL > -1
				WSTR:(K++) = 近づいてみると、%CALLNAME:LOCAL%はそれが火の魔石であることに気づいた。
				WSTR:(K++) = うっかり触っていたら炎が噴き出して怪我をしてしまっていただろう。
				WSTR:(K++) = %CALLNAME:LOCAL%は魔石から余計な魔力を取り除き、魔石を簡単な道具として加工した。
				LOCAL:1 = RAND:3 + 1
				KSTR:(K++) = %CALLNAME:PLAYER%たちは「火の魔石」を{LOCAL:1}個に手に入れた！
				CALL アイテム増減汎用処理("火の魔石", LOCAL:1)
			ELSE
				WSTR:(K++) = 近づいてみると、突然魔石から炎が噴き出した！！
				レベル記録 = 0
				FOR LOCAL, 0, 14
					SIF LOCAL > 3 && LOCAL < 10
						CONTINUE
					SIF BATTLE_STATE:LOCAL:キャラ登録番号 < 1
						CONTINUE
					SIF BATTLE_STATE:LOCAL:Lv > レベル記録
						レベル記録 = BATTLE_STATE:LOCAL:Lv
				NEXT
				KSTR:(K++) = %CALLNAME:PLAYER%たち全員のＨＰに{レベル記録 * 20}のダメージ！
				CALL メッセージ欄表示用関数()
				CALL 口上変数初期化
				FOR LOCAL, 0, 14
					SIF LOCAL > 3 && LOCAL < 10
						CONTINUE
					SIF BATTLE_STATE:LOCAL:キャラ登録番号 < 1
						CONTINUE
					BATTLE_STATE:LOCAL:ＨＰ = MAX(1, BATTLE_STATE:LOCAL:ＨＰ - (レベル記録 * 20))
				NEXT
				WSTR:(K++) = どうやら火の魔石に魔力が溜まりすぎていたようだ。
				WSTR:(K++) = 魔力を使い切った魔石はただの石ころになってしまっている……。
				KSTR:(K++) = 魔法知識があれば防げたかもしれないが……気を取り直して君たちは先に進む。
			ENDIF
			ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):0 = イベント完了
		CASE "[いいえ]"
			WSTR:(K++) = 下手に触ると何が起こるかわからず危険だ。放置しよう。
			KSTR:(K++) = 魔法知識があれば利用出来たかもしれないが……。
		CASEELSE
			CLEARLINE 1
			REUSELASTLINE  
			GOTO LOOP_MESSAGE
	ENDSELECT
	CALL メッセージ欄表示用関数()
	CALL 接続ルート全開放処理((ダンジョン現在位置:0), (ダンジョン現在位置:1))
	CALL 口上変数初期化
ENDIF
CALL 画面再描画

@イベント_リゾート島開拓作業_ランダム_魔法知識イベ３
CALL 口上変数初期化
IF ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):0 == "イベント完了"
	KSTR:(K++) = 特に変わった様子はない。
	CALL メッセージ欄表示用関数(,,,0)
ELSE
	;最初に訪れた時
	WSTR:(K++) = 岩の陰に魔力を感じる石を見つけた。
	KSTR:(K++) = 拾ってみますか？
	KSTR:(K++) = BUTTON_[はい]
	KSTR:(K++) = BUTTON_[いいえ]
	CALL メッセージ欄表示用関数(,,,0)
	CALL 口上変数初期化
	$LOOP_MESSAGE
	BINPUTS
	SELECTCASE RESULTS
		CASE "[はい]"
			CALL 知識技能所持者検索("魔法知識", 1)
			LOCAL = RESULT
			IF LOCAL > -1
				WSTR:(K++) = 近づいてみると、%CALLNAME:LOCAL%はそれが光の魔石であることに気づいた。
				WSTR:(K++) = 生命を司る魔力が治癒の力を大きく増加させる……！
				WSTR:(K++) = %CALLNAME:LOCAL%は魔石の魔力を使い、戦闘不能を含む全員のＨＰを１００回復した！
				CALL 探索中全体回復_ＨＰ_蘇生(100)
			ELSE
				WSTR:(K++) = 近づいてみると、突然魔石から温かな光が湧き出した。
				WSTR:(K++) = 光に包まれた君たちの傷が癒えていく……。
				KSTR:(K++) = %CALLNAME:PLAYER%たちのＨＰが１００回復した！
				CALL メッセージ欄表示用関数()
				CALL 探索中全体回復_ＨＰ(100)
				CALL 口上変数初期化
				WSTR:(K++) = どうやら光の魔石に魔力が溜まりすぎていたようだ。
				WSTR:(K++) = 魔力を使い切った魔石はただの石ころになってしまっている……。
				KSTR:(K++) = 魔法知識があればもっと有効に使えたかもしれないが……気を取り直して君たちは先に進む。
			ENDIF
			ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):0 = イベント完了
		CASE "[いいえ]"
			WSTR:(K++) = 下手に触ると何が起こるかわからず危険だ。放置しよう。
			KSTR:(K++) = 魔法知識があれば利用出来たかもしれないが……。
		CASEELSE
			CLEARLINE 1
			REUSELASTLINE  
			GOTO LOOP_MESSAGE
	ENDSELECT
	CALL メッセージ欄表示用関数()
	CALL 接続ルート全開放処理((ダンジョン現在位置:0), (ダンジョン現在位置:1))
	CALL 口上変数初期化
ENDIF
CALL 画面再描画

@イベント_リゾート島開拓作業_ランダム_機械知識イベ１
#DIMS ドロップアイテム

CALL 口上変数初期化
IF ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):0 == "イベント完了"
	KSTR:(K++) = 特に変わった様子はない。
	CALL メッセージ欄表示用関数(,,,0)
ELSE
	;最初に訪れた時
	WSTR:(K++) = 地面に横たわり、朽ちかけたアイアンゴーレムを発見した。
	KSTR:(K++) = 近づいてみますか？
	KSTR:(K++) = BUTTON_[はい]
	KSTR:(K++) = BUTTON_[いいえ]
	CALL 知識技能所持者検索("機械知識", 1)
	LOCAL = RESULT
	IF LOCAL > -1
		KSTR:(K++) = BUTTON_[%CALLNAME:LOCAL%が遠くから観察してみる]
	ELSE
		LOCAL = 0
	ENDIF
	CALL メッセージ欄表示用関数(,,,0)
	CALL 口上変数初期化
	$LOOP_MESSAGE
	BINPUTS
	SELECTCASE RESULTS
		CASE "[はい]"
			IF RAND:2
				WSTR:(K++) = 近づいてよく見てみると、朽ちているのは表面だけで内部の機構はまだ使うことが出来そうだ。
				WSTR:(K++) = 分解して状態が良い部品を回収しよう。
				ドロップアイテム = %ランダム素材名("ダンジョン素材", RAND:3)%
				LOCAL = RAND:3 + 2
				WSTR:(K++) = %CALLNAME:PLAYER%は%ドロップアイテム%を{LOCAL}個手に入れた！
				CALL 素材入手処理(ドロップアイテム, LOCAL)
			ELSE
				WSTR:(K++) = 近づいてみると、突然ゴーレムの機体が異音を立てて爆発した！
				KSTR:(K++) = %CALLNAME:PLAYER%たちのＨＰが{ダンジョン階層記録 * 50}減少した！
				CALL メッセージ欄表示用関数()
				CALL 探索中全体ダメージ_ＨＰ_非致死(ダンジョン階層記録 * 50)
				CALL 口上変数初期化
				WSTR:(K++) = どうやら朽ちているように見えて、動力部だけは生きていたようだ。
				WSTR:(K++) = 部品の類も吹っ飛んでしまっており、回収できそうな部品は残っていない。
				KSTR:(K++) = 収穫がなかったことを残念に思いながら、気を取り直して君たちは先に進む。
			ENDIF
			ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):0 = イベント完了
		CASE "[いいえ]"
			WSTR:(K++) = 下手に触ると何が起こるかわからず危険だ。放置しよう。
		CASE @"[%CALLNAME:LOCAL%が遠くから観察してみる]"
			IF RAND:2
				WSTR:(K++) = 露出している機械部分は光を失っており、耳を澄ませてみても駆動音は聞こえない…
				WSTR:(K++) = %CALLNAME:LOCAL%はあのゴーレムは安全だと判断した。
				WSTR:(K++) = 改めて近づいてみると、朽ちているのは表面だけで内部の機構はまだ使うことが出来そうだ。
				WSTR:(K++) = 分解して状態が良い部品を回収しよう。
				ドロップアイテム = %ランダム素材名("ダンジョン素材", RAND:3)%
				LOCAL = RAND:3 + 2
				WSTR:(K++) = %CALLNAME:PLAYER%は%ドロップアイテム%を{LOCAL}個手に入れた！
				CALL 素材入手処理(ドロップアイテム, LOCAL)
			ELSE
				WSTR:(K++) = 露出している機械部分は光を失っているが、耳を澄ませてみると微かに駆動音が聞こえる…
				WSTR:(K++) = %CALLNAME:LOCAL%はあのゴーレムは危険だと判断した。
				KSTR:(K++) = 遠くから石を投げて刺激してみると、突然ゴーレムの機体が異音を立てて爆発した！_PAGE
				WSTR:(K++) = どうやら朽ちているように見えて、動力部だけは生きていたようだ。
				WSTR:(K++) = 部品の類も吹っ飛んでしまっており、回収できそうな部品は残っていない。
				KSTR:(K++) = 収穫がなかったことを残念だが、安全に処理出来たことに安堵しながら君たちは先に進む。
			ENDIF
			ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):0 = イベント完了
		CASEELSE
			CLEARLINE 1
			REUSELASTLINE  
			GOTO LOOP_MESSAGE
	ENDSELECT
	CALL メッセージ欄表示用関数()
	CALL 接続ルート全開放処理((ダンジョン現在位置:0), (ダンジョン現在位置:1))
	CALL 口上変数初期化
ENDIF
CALL 画面再描画

@イベント_リゾート島開拓作業_ランダム_機械知識イベ２
#DIMS ドロップアイテム

CALL 口上変数初期化
IF ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):0 == "イベント完了"
	KSTR:(K++) = 特に変わった様子はない。
	CALL メッセージ欄表示用関数(,,,0)
ELSE
	;最初に訪れた時
	WSTR:(K++) = %CALLNAME:PLAYER%たちは野生の獣型ゴーレムと遭遇した。
	WSTR:(K++) = 咄嗟に戦闘態勢を取るが、ゴーレムは動かない。どうやらこちらへの敵意はないようだ。
	KSTR:(K++) = 近づいてみますか？
	KSTR:(K++) = BUTTON_[はい]
	KSTR:(K++) = BUTTON_[いいえ]
	CALL 知識技能所持者検索("機械知識", 1)
	LOCAL = RESULT
	CALL メッセージ欄表示用関数(,,,0)
	CALL 口上変数初期化
	$LOOP_MESSAGE
	BINPUTS
	SELECTCASE RESULTS
		CASE "[はい]"
			WSTR:(K++) = 近づいてよく見てみると、ちかちかとランプが規則的に点滅していることがわかる。
			IF LOCAL > -1
				WSTR:(K++) = %CALLNAME:LOCAL%が点滅するパターンを数えてみると、騎空艇でよく使われる通信の合図と一致することがわかった。
				WSTR:(K++) = 解読すると……「コ・コ・ホ・レ・ワ・ン・ワ・ン」と言っているらしい……。
				ドロップアイテム = %TEXTR("渦琥珀/オルディネシュタイン/宝晶原石/星晶の欠片")%
				WSTR:(K++) = 試しに地面を掘ってみると、地中から%ドロップアイテム%が出てきた！
				KSTR:(K++) = %CALLNAME:LOCAL%たちは%ドロップアイテム%を1個手に入れた！_PAGE
				CALL 素材入手処理(ドロップアイテム, 1)
				WSTR:(K++) = ゴーレムは満足したのかランプを消し、その場に横たわって休憩し始めた。
				KSTR:(K++) = 手に入れた宝石をありがたく貰い、君たちはゴーレムから離れて先に進む。
			ELSE
				WSTR:(K++) = なにかを伝えようとしているみたいだが、%CALLNAME:PLAYER%たちにはわからなかった……
				WSTR:(K++) = 機械の知識がある者ならわかるかもしれないが、今は解読する方法はない。
				KSTR:(K++) = 仕方なくゴーレムと別れ、君たちは先に進む。
			ENDIF
		CASE "[いいえ]"
			WSTR:(K++) = 敵対しないなら無理に関わる必要もないだろう。
			KSTR:(K++) = 君たちはゴーレムから離れ、先に進む。
		CASEELSE
			CLEARLINE 1
			REUSELASTLINE  
			GOTO LOOP_MESSAGE
	ENDSELECT
	ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):0 = イベント完了
	CALL メッセージ欄表示用関数()
	CALL 接続ルート全開放処理((ダンジョン現在位置:0), (ダンジョン現在位置:1))
	CALL 口上変数初期化
ENDIF
CALL 画面再描画





