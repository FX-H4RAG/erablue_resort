@乗機関数_試作大型走艇(処理モード)
#DIMS 処理モード
#DIMS 武装登録, 6
#DIM 乗機攻撃力
#DIM 乗機命中率
#DIM サブパイロット人数
#DIMS 乗機名一時保存
LOCALS = 

SELECTCASE 処理モード
	CASE "乗機登録"	
		乗機名一時保存 = 試作大型走艇
		;武装が無い場合は「不可」を入れる
		;固有武装の場合は「固有」を入れる
		;装備付け替え可能枠は何入れてもいいけど、わかりやすいように「装備可能」を入れてる
		武装登録:0 = 装備可能
		武装登録:1 = 装備可能
		武装登録:2 = 装備可能
		武装登録:3 = 装備可能
		武装登録:4 = 装備可能
		武装登録:5 = 不可
		;攻撃系武装で使用する基礎攻撃力を設定する
		乗機攻撃力 = 600
		乗機命中率 = 70
		;何人サブメンバーを載せられるか？
		サブパイロット人数 = 2

		{
		DT_ROW_ADD "所持乗機データベース", "乗機名", 乗機名一時保存, "乗機攻撃力", 乗機攻撃力, "乗機攻撃力_強化後", 乗機攻撃力, 
			"乗機命中率", 乗機命中率, "乗機命中率_強化後", 乗機命中率, 
			"武装0", 武装登録:0, "武装1", 武装登録:1, "武装2", 武装登録:2, "武装3", 武装登録:3, "武装4", 武装登録:4, "武装5", 武装登録:5,
			"サブ搭乗数", サブパイロット人数, "サブ搭乗数_強化後", サブパイロット人数
		}
	CASE "フレーバー"
		LOCALS += "運送業での活用を目的に、通常よりも大きく設計された試作走艇。<br>"
		LOCALS += "人だけでなく、武装もより多く搭載することができるようになった。<br>"
		LOCALS += "機関部の出力が大きさに見合っておらず、走行にはかなり不安が残る。<br>"
		詳細文文字列受け渡し変数 = %LOCALS%
	CASE "作成素材"
		作成素材登録:0 = 風の宝珠_3
		作成素材登録:1 = 火の宝珠_3
		作成素材登録:2 = 古びた歯車_8
		作成素材登録:3 = 帯電した珪砂_2
ENDSELECT


@乗機兵装関数_試作大型走艇_0(処理モード, 兵器id = 0)
;数字部分は武装登録の番号と対応させること
#DIMS 処理モード
#DIM 武装番号
#DIM 兵器id
;武装番号は武装登録の番号と対応させること
武装番号 = 0
LOCALS = 

SELECTCASE 処理モード
	CASE "アビ名", "アビ効果"
		;兵装処理系は装備してる兵装の関数に投げる
		TRYCCALLFORM 搭載兵器関数_%DT_CELL_GETS("所持兵器データベース", 兵器id, "兵器名", 1)%(処理モード, 兵器id)
		CATCH
			PRINTW 処理が不正です
			アビテンプレート用_キャンセルフラグ = 1
			RETURN -1
		ENDCATCH
	CASE "アビ説明文"
		LOCALS += @"　%残弾種別名:(乗機残弾種別:武装番号)%制限：残り{乗機残弾数:武装番号, 2}回<br>"
		TRYCCALLFORM 搭載兵器関数_%DT_CELL_GETS("所持兵器データベース", 兵器id, "兵器名", 1)%(処理モード, 兵器id)
			詳細文文字列受け渡し変数 = %LOCALS%%詳細文文字列受け渡し変数%
		CATCH
			PRINTW 処理が不正です
			アビテンプレート用_キャンセルフラグ = 1
			RETURN -1
		ENDCATCH
	CASE "残弾セット"
		乗機残弾種別:武装番号 = DT_CELL_GET("所持兵器データベース", 兵器id, "残弾種別", 1)
		乗機残弾数:武装番号 = DT_CELL_GET("所持兵器データベース", 兵器id, "残弾数_強化後", 1)
;---------------------------------------------------------------------------------------------------------
;編集するのはここから
	CASE "装備条件説明文"
		LOCALS += @"　装備可能カテゴリ：機械系・魔法系<br>"
		LOCALS += "　装備可能距離：近距離<br>"
		LOCALS += "　その他条件：なし<br>"
		詳細文文字列受け渡し変数 = %LOCALS%
	CASE "装備条件判定"
		;装備不可だと0、可能だと1を返す
		SIF STRCOUNT(ESCAPE(DT_CELL_GETS("所持兵器データベース", 兵器id, "兵器カテゴリ", 1)), "機械系") == 0 && STRCOUNT(ESCAPE(DT_CELL_GETS("所持兵器データベース", 兵器id, "兵器カテゴリ", 1)), "魔法系") == 0
			RETURN 0
		SIF STRCOUNT(ESCAPE(DT_CELL_GETS("所持兵器データベース", 兵器id, "兵器距離適性", 1)), "近距離") == 0
			RETURN 0
		RETURN 1
;編集するのはここまで
;---------------------------------------------------------------------------------------------------------
ENDSELECT

@乗機兵装関数_試作大型走艇_1(処理モード, 兵器id = 0)
;数字部分は武装登録の番号と対応させること
#DIMS 処理モード
#DIM 武装番号
#DIM 兵器id
;武装番号は武装登録の番号と対応させること
武装番号 = 1
LOCALS = 

SELECTCASE 処理モード
	CASE "アビ名", "アビ効果"
		;兵装処理系は装備してる兵装の関数に投げる
		TRYCCALLFORM 搭載兵器関数_%DT_CELL_GETS("所持兵器データベース", 兵器id, "兵器名", 1)%(処理モード, 兵器id)
		CATCH
			PRINTW 処理が不正です
			アビテンプレート用_キャンセルフラグ = 1
			RETURN -1
		ENDCATCH
	CASE "アビ説明文"
		LOCALS += @"　%残弾種別名:(乗機残弾種別:武装番号)%制限：残り{乗機残弾数:武装番号, 2}回<br>"
		TRYCCALLFORM 搭載兵器関数_%DT_CELL_GETS("所持兵器データベース", 兵器id, "兵器名", 1)%(処理モード, 兵器id)
			詳細文文字列受け渡し変数 = %LOCALS%%詳細文文字列受け渡し変数%
		CATCH
			PRINTW 処理が不正です
			アビテンプレート用_キャンセルフラグ = 1
			RETURN -1
		ENDCATCH
	CASE "残弾セット"
		乗機残弾種別:武装番号 = DT_CELL_GET("所持兵器データベース", 兵器id, "残弾種別", 1)
		乗機残弾数:武装番号 = DT_CELL_GET("所持兵器データベース", 兵器id, "残弾数_強化後", 1)
;---------------------------------------------------------------------------------------------------------
;編集するのはここから
	CASE "装備条件説明文"
		LOCALS += @"　装備可能カテゴリ：機械系or魔法系<br>"
		LOCALS += "　装備可能距離：遠距離<br>"
		LOCALS += "　その他条件：なし<br>"
		詳細文文字列受け渡し変数 = %LOCALS%
	CASE "装備条件判定"
		;装備不可だと0、可能だと1を返す
		SIF STRCOUNT(ESCAPE(DT_CELL_GETS("所持兵器データベース", 兵器id, "兵器カテゴリ", 1)), "機械系") == 0 && STRCOUNT(ESCAPE(DT_CELL_GETS("所持兵器データベース", 兵器id, "兵器カテゴリ", 1)), "魔法系") == 0
			RETURN 0
		SIF STRCOUNT(ESCAPE(DT_CELL_GETS("所持兵器データベース", 兵器id, "兵器距離適性", 1)), "遠距離") == 0
			RETURN 0
		RETURN 1
;編集するのはここまで
;---------------------------------------------------------------------------------------------------------
ENDSELECT

@乗機兵装関数_試作大型走艇_2(処理モード, 兵器id = 0)
;数字部分は武装登録の番号と対応させること
#DIMS 処理モード
#DIM 武装番号
#DIM 兵器id
;武装番号は武装登録の番号と対応させること
武装番号 = 2
LOCALS = 

SELECTCASE 処理モード
	CASE "アビ名", "アビ効果"
		;兵装処理系は装備してる兵装の関数に投げる
		TRYCCALLFORM 搭載兵器関数_%DT_CELL_GETS("所持兵器データベース", 兵器id, "兵器名", 1)%(処理モード, 兵器id)
		CATCH
			PRINTW 処理が不正です
			アビテンプレート用_キャンセルフラグ = 1
			RETURN -1
		ENDCATCH
	CASE "アビ説明文"
		LOCALS += @"　%残弾種別名:(乗機残弾種別:武装番号)%制限：残り{乗機残弾数:武装番号, 2}回<br>"
		TRYCCALLFORM 搭載兵器関数_%DT_CELL_GETS("所持兵器データベース", 兵器id, "兵器名", 1)%(処理モード, 兵器id)
			詳細文文字列受け渡し変数 = %LOCALS%%詳細文文字列受け渡し変数%
		CATCH
			PRINTW 処理が不正です
			アビテンプレート用_キャンセルフラグ = 1
			RETURN -1
		ENDCATCH
	CASE "残弾セット"
		乗機残弾種別:武装番号 = DT_CELL_GET("所持兵器データベース", 兵器id, "残弾種別", 1)
		乗機残弾数:武装番号 = DT_CELL_GET("所持兵器データベース", 兵器id, "残弾数_強化後", 1)
;---------------------------------------------------------------------------------------------------------
;編集するのはここから
	CASE "装備条件説明文"
		LOCALS += @"　装備可能カテゴリ：機械系or魔法系<br>"
		LOCALS += "　装備可能距離：遠距離<br>"
		LOCALS += "　その他条件：なし<br>"
		詳細文文字列受け渡し変数 = %LOCALS%
	CASE "装備条件判定"
		;装備不可だと0、可能だと1を返す
		SIF STRCOUNT(ESCAPE(DT_CELL_GETS("所持兵器データベース", 兵器id, "兵器カテゴリ", 1)), "機械系") == 0 && STRCOUNT(ESCAPE(DT_CELL_GETS("所持兵器データベース", 兵器id, "兵器カテゴリ", 1)), "魔法系") == 0
			RETURN 0
		SIF STRCOUNT(ESCAPE(DT_CELL_GETS("所持兵器データベース", 兵器id, "兵器距離適性", 1)), "遠距離") == 0
			RETURN 0
		RETURN 1
;編集するのはここまで
;---------------------------------------------------------------------------------------------------------
ENDSELECT

@乗機兵装関数_試作大型走艇_3(処理モード, 兵器id = 0)
;数字部分は武装登録の番号と対応させること
#DIMS 処理モード
#DIM 武装番号
#DIM 兵器id
;武装番号は武装登録の番号と対応させること
武装番号 = 3
LOCALS = 

SELECTCASE 処理モード
	CASE "アビ名", "アビ効果"
		;兵装処理系は装備してる兵装の関数に投げる
		TRYCCALLFORM 搭載兵器関数_%DT_CELL_GETS("所持兵器データベース", 兵器id, "兵器名", 1)%(処理モード, 兵器id)
		CATCH
			PRINTW 処理が不正です
			アビテンプレート用_キャンセルフラグ = 1
			RETURN -1
		ENDCATCH
	CASE "アビ説明文"
		LOCALS += @"　%残弾種別名:(乗機残弾種別:武装番号)%制限：残り{乗機残弾数:武装番号, 2}回<br>"
		TRYCCALLFORM 搭載兵器関数_%DT_CELL_GETS("所持兵器データベース", 兵器id, "兵器名", 1)%(処理モード, 兵器id)
			詳細文文字列受け渡し変数 = %LOCALS%%詳細文文字列受け渡し変数%
		CATCH
			PRINTW 処理が不正です
			アビテンプレート用_キャンセルフラグ = 1
			RETURN -1
		ENDCATCH
	CASE "残弾セット"
		乗機残弾種別:武装番号 = DT_CELL_GET("所持兵器データベース", 兵器id, "残弾種別", 1)
		乗機残弾数:武装番号 = DT_CELL_GET("所持兵器データベース", 兵器id, "残弾数_強化後", 1)
;---------------------------------------------------------------------------------------------------------
;編集するのはここから
	CASE "装備条件説明文"
		LOCALS += @"　装備可能カテゴリ：機械系or魔法系<br>"
		LOCALS += "　装備可能距離：遠距離or味方支援<br>"
		LOCALS += "　その他条件：なし<br>"
		詳細文文字列受け渡し変数 = %LOCALS%
	CASE "装備条件判定"
		;装備不可だと0、可能だと1を返す
		SIF STRCOUNT(ESCAPE(DT_CELL_GETS("所持兵器データベース", 兵器id, "兵器カテゴリ", 1)), "機械系") == 0 && STRCOUNT(ESCAPE(DT_CELL_GETS("所持兵器データベース", 兵器id, "兵器カテゴリ", 1)), "魔法系") == 0
			RETURN 0
		SIF STRCOUNT(ESCAPE(DT_CELL_GETS("所持兵器データベース", 兵器id, "兵器距離適性", 1)), "味方支援") == 0 && STRCOUNT(ESCAPE(DT_CELL_GETS("所持兵器データベース", 兵器id, "兵器距離適性", 1)), "遠距離") == 0
			RETURN 0
		RETURN 1
;編集するのはここまで
;---------------------------------------------------------------------------------------------------------
ENDSELECT

@乗機兵装関数_試作大型走艇_4(処理モード, 兵器id = 0)
;数字部分は武装登録の番号と対応させること
#DIMS 処理モード
#DIM 武装番号
#DIM 兵器id
;武装番号は武装登録の番号と対応させること
武装番号 = 4
LOCALS = 

SELECTCASE 処理モード
	CASE "アビ名", "アビ効果"
		;兵装処理系は装備してる兵装の関数に投げる
		TRYCCALLFORM 搭載兵器関数_%DT_CELL_GETS("所持兵器データベース", 兵器id, "兵器名", 1)%(処理モード, 兵器id)
		CATCH
			PRINTW 処理が不正です
			アビテンプレート用_キャンセルフラグ = 1
			RETURN -1
		ENDCATCH
	CASE "アビ説明文"
		LOCALS += @"　%残弾種別名:(乗機残弾種別:武装番号)%制限：残り{乗機残弾数:武装番号, 2}回<br>"
		TRYCCALLFORM 搭載兵器関数_%DT_CELL_GETS("所持兵器データベース", 兵器id, "兵器名", 1)%(処理モード, 兵器id)
			詳細文文字列受け渡し変数 = %LOCALS%%詳細文文字列受け渡し変数%
		CATCH
			PRINTW 処理が不正です
			アビテンプレート用_キャンセルフラグ = 1
			RETURN -1
		ENDCATCH
	CASE "残弾セット"
		乗機残弾種別:武装番号 = DT_CELL_GET("所持兵器データベース", 兵器id, "残弾種別", 1)
		乗機残弾数:武装番号 = DT_CELL_GET("所持兵器データベース", 兵器id, "残弾数_強化後", 1)
;---------------------------------------------------------------------------------------------------------
;編集するのはここから
	CASE "装備条件説明文"
		LOCALS += @"　装備可能カテゴリ：機械系or魔法系<br>"
		LOCALS += "　装備可能距離：味方支援<br>"
		LOCALS += "　その他条件：なし<br>"
		詳細文文字列受け渡し変数 = %LOCALS%
	CASE "装備条件判定"
		;装備不可だと0、可能だと1を返す
		SIF STRCOUNT(ESCAPE(DT_CELL_GETS("所持兵器データベース", 兵器id, "兵器カテゴリ", 1)), "機械系") == 0 && STRCOUNT(ESCAPE(DT_CELL_GETS("所持兵器データベース", 兵器id, "兵器カテゴリ", 1)), "魔法系") == 0
			RETURN 0
		SIF STRCOUNT(ESCAPE(DT_CELL_GETS("所持兵器データベース", 兵器id, "兵器距離適性", 1)), "味方支援") == 0
			RETURN 0
		RETURN 1
;編集するのはここまで
;---------------------------------------------------------------------------------------------------------
ENDSELECT
