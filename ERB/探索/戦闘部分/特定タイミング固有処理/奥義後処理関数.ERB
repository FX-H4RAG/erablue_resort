@奥義後処理関数
;奥義が全て終わった後に読みに来る関数
;主に奥義で効果が発動するバフなどの処理を想定
#DIM バフ番号
#DIM デバフ番号
#DIM 生存エネミー数

TRYCALL エンデュミオン短縮処理

;敵が全滅してた場合はどの処理も呼ばずに帰る
生存エネミー数 = 0
FOR LOCAL, 0, 10
	SIF 敵BATTLE_STATE_STR:LOCAL:エネミー名 == ""
		CONTINUE
	SIF 敵BATTLE_STATE:LOCAL:ＨＰ < 1
		CONTINUE
	生存エネミー数 += 1
NEXT
SIF 生存エネミー数 < 1
	RETURN 0


IF 戦闘行動キャラ < 10
    ;味方の場合

    ;指輪を見る
    TRYCALLFORM 固有奥義後処理_指輪_%DT_CELL_GETS("所持指輪データベース", 装備ステータス補正保存:(BATTLE_STATE:戦闘行動キャラ:キャラ番号):装備指輪番号, "指輪名")%()

	;衣装を見る
	TRYCALLFORM 固有奥義後処理_探索衣装_%DT_CELL_GETS("所持衣装データベース", 装備ステータス補正保存:(BATTLE_STATE:戦闘行動キャラ:キャラ番号):装備衣装番号, "衣装名")%()

	;キャラを見る
	TRYCALLFORM 固有奥義後処理_キャラ_{NO:(BATTLE_STATE:戦闘行動キャラ:キャラ番号)}()

	;バフを見る
	FOR バフ番号, 0, DT_ROW_LENGTH(@"バフデータベース_{戦闘行動キャラ}")
		TRYCALLFORM 固有奥義後処理_バフ_%DT_CELL_GETS(@"バフデータベース_{戦闘行動キャラ}", バフ番号, "バフ枠")%()
	NEXT
ELSE
    ;敵の場合

ENDIF
