@奥義補正処理関数_全体回復
#DIM 回復量
;回復量呼び出し
CALLFORM 全体回復_効果量_%DT_CELL_GETS("所持耳飾りデータベース", 装備ステータス補正保存:(BATTLE_STATE:戦闘行動キャラ:キャラ番号):装備耳飾り番号, "耳飾り名")%
;RESULTに基本量が帰ってくるので乱数補正
回復量 = RESULT * RAND(95, 106) / 100

FOR LOCAL, 0, 4
    IF BATTLE_STATE:LOCAL:0 < 1
        BREAK
    ENDIF
    LOCAL:1 = MIN(回復量, BATTLE_STATE:LOCAL:最大ＨＰ - BATTLE_STATE:LOCAL:ＨＰ)
    KSTR:(K++) = %CALLNAME:(BATTLE_STATE:LOCAL:キャラ番号)%のＨＰが{LOCAL:1}回復！
    BATTLE_STATE:LOCAL:ＨＰ = MIN(BATTLE_STATE:LOCAL:ＨＰ + 回復量, BATTLE_STATE:LOCAL:最大ＨＰ)
NEXT

