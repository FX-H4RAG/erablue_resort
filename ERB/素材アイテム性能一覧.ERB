
@素材アイテム登録処理
#DIMS 比較用一時保存配列, 1000
#DIMS 素材名分割用, 2
VARSET 比較用一時保存配列

FOR LOCAL, 0, 1000
	SIF LOCAL >= DT_ROW_LENGTH("所持素材データベース")
		BREAK
	;登録されてないアイテム判定のため比較用配列に保存
	比較用一時保存配列:LOCAL = %DT_CELL_GETS("所持素材データベース", LOCAL, "素材アイテム名")%
	IF ENUMFUNCENDSWITH(@"素材性能記述_%比較用一時保存配列:LOCAL%") == 0
		;登録されてるけどERBがないアイテムを削除
		比較用一時保存配列:LOCAL = 
		DT_ROW_REMOVE "所持素材データベース", DT_CELL_GET("所持素材データベース", LOCAL, "id")
		LOCAL -= 1
	ELSE
		;登録されてるERBと性能を比較して異なるなら再セット
		素材性能_カテゴリ = 
		素材性能_素材ランク = 0
		素材性能_属性 = 無
		素材性能_プレゼント = 
		CALLFORM 素材性能記述_%比較用一時保存配列:LOCAL%
		SIF 素材性能_カテゴリ != DT_CELL_GETS("所持素材データベース", LOCAL, "素材カテゴリ")
			DT_CELL_SET "所持素材データベース", LOCAL, "素材カテゴリ", 素材性能_カテゴリ
		SIF 素材性能_素材ランク != DT_CELL_GET("所持素材データベース", LOCAL, "素材ランク")
			DT_CELL_SET "所持素材データベース", LOCAL, "素材ランク", 素材性能_素材ランク
		SIF 属性文字列数値変換(素材性能_属性) != DT_CELL_GET("所持素材データベース", LOCAL, "素材属性")
			DT_CELL_SET "所持素材データベース", LOCAL, "素材属性", 属性文字列数値変換(素材性能_属性)
		SIF 素材性能_プレゼント != DT_CELL_GETS("所持素材データベース", LOCAL, "プレゼントカテゴリ")
			DT_CELL_SET "所持素材データベース", LOCAL, "プレゼントカテゴリ", 素材性能_プレゼント
	ENDIF
NEXT

;ERBにあるのに登録されてないアイテムを登録
ENUMFUNCBEGINSWITH "素材性能記述_"
FOR COUNT, 0, RESULT
	SPLIT RESULTS:COUNT, "_", 素材名分割用
	IF !MATCH(比較用一時保存配列, 素材名分割用:1)
		素材性能_カテゴリ = 
		素材性能_素材ランク = 0
		素材性能_属性 = 無
		素材性能_プレゼント = 
		CALLFORM %RESULTS:COUNT%
		DT_ROW_ADD "所持素材データベース", "素材アイテム名", 素材名分割用:1, "所持素材数", 0, "累計入手素材数", 0, "素材カテゴリ", 素材性能_カテゴリ, "素材ランク", 素材性能_素材ランク, "素材属性", 属性文字列数値変換(素材性能_属性), "素材値相場", 100, "プレゼントカテゴリ", 素材性能_プレゼント
	ENDIF
NEXT



@素材性能記述_ゴブリンの剣
素材性能_カテゴリ = エネミー素材
素材性能_素材ランク = 0
素材性能_属性 = 土

@素材性能記述_ジェリーの核
素材性能_カテゴリ = エネミー素材
素材性能_素材ランク = 0
素材性能_属性 = 水

@素材性能記述_柔らかい羽
素材性能_カテゴリ = エネミー素材
素材性能_素材ランク = 0
素材性能_属性 = 風

@素材性能記述_植物のツタ
素材性能_カテゴリ = エネミー素材
素材性能_素材ランク = 0
素材性能_属性 = 土

@素材性能記述_粘っこい茸
素材性能_カテゴリ = エネミー素材
素材性能_素材ランク = 0
素材性能_属性 = 土

@素材性能記述_火の宝珠
素材性能_カテゴリ = エネミー素材
素材性能_素材ランク = 1
素材性能_属性 = 火

@素材性能記述_水の宝珠
素材性能_カテゴリ = エネミー素材
素材性能_素材ランク = 1
素材性能_属性 = 水

@素材性能記述_風の宝珠
素材性能_カテゴリ = エネミー素材
素材性能_素材ランク = 1
素材性能_属性 = 風

@素材性能記述_土の宝珠
素材性能_カテゴリ = エネミー素材
素材性能_素材ランク = 1
素材性能_属性 = 土

@素材性能記述_光の宝珠
素材性能_カテゴリ = エネミー素材
素材性能_素材ランク = 1
素材性能_属性 = 光

@素材性能記述_闇の宝珠
素材性能_カテゴリ = エネミー素材
素材性能_素材ランク = 1
素材性能_属性 = 闇

@素材性能記述_普通の木材
素材性能_カテゴリ = ダンジョン素材
素材性能_素材ランク = 0
素材性能_属性 = 風

@素材性能記述_星晶の破片
素材性能_カテゴリ = ダンジョン素材
素材性能_素材ランク = 1
素材性能_属性 = 無

@素材性能記述_赤銅の古紋
素材性能_カテゴリ = ダンジョン素材
素材性能_素材ランク = 1
素材性能_属性 = 無

@素材性能記述_荒野の石材
素材性能_カテゴリ = ダンジョン素材
素材性能_素材ランク = 0
素材性能_属性 = 土

@素材性能記述_壁画の破片
素材性能_カテゴリ = ダンジョン素材
素材性能_素材ランク = 1
素材性能_属性 = 土

@素材性能記述_星晶の欠片
素材性能_カテゴリ = ダンジョン素材
素材性能_素材ランク = 2
素材性能_属性 = 無

@素材性能記述_星晶塊
素材性能_カテゴリ = ダンジョン素材
素材性能_素材ランク = 3
素材性能_属性 = 無

@素材性能記述_白銀の古紋
素材性能_カテゴリ = ダンジョン素材
素材性能_素材ランク = 3
素材性能_属性 = 無

@素材性能記述_黄金の古紋
素材性能_カテゴリ = ダンジョン素材
素材性能_素材ランク = 5
素材性能_属性 = 無

@素材性能記述_虹星晶
素材性能_カテゴリ = ダンジョン素材
素材性能_素材ランク = 4
素材性能_属性 = 無

@素材性能記述_碧空の結晶
素材性能_カテゴリ = ダンジョン素材
素材性能_素材ランク = 5
素材性能_属性 = 無

@素材性能記述_小魚
素材性能_カテゴリ = 食物素材
素材性能_素材ランク = 0
素材性能_属性 = 水

@素材性能記述_ランページシェル
素材性能_カテゴリ = 食物素材
素材性能_素材ランク = 0
素材性能_属性 = 水

@素材性能記述_マイトフィッシュ
素材性能_カテゴリ = 食物素材
素材性能_素材ランク = 1
素材性能_属性 = 水

@素材性能記述_レインボーマス
素材性能_カテゴリ = 食物素材
素材性能_素材ランク = 1
素材性能_属性 = 水

@素材性能記述_サケモン
素材性能_カテゴリ = 食物素材
素材性能_素材ランク = 2
素材性能_属性 = 水

@素材性能記述_ンナギ
素材性能_カテゴリ = 食物素材
素材性能_素材ランク = 2
素材性能_属性 = 水

@素材性能記述_アユウ
素材性能_カテゴリ = 食物素材
素材性能_素材ランク = 2
素材性能_属性 = 水

@素材性能記述_ヤマァメ
素材性能_カテゴリ = 食物素材
素材性能_素材ランク = 3
素材性能_属性 = 水

@素材性能記述_イワナン
素材性能_カテゴリ = 食物素材
素材性能_素材ランク = 3
素材性能_属性 = 水

@素材性能記述_オパールエヴィ
素材性能_カテゴリ = 食物素材
素材性能_素材ランク = 4
素材性能_属性 = 水

@素材性能記述_焼き魚
素材性能_カテゴリ = 贈答アイテム
素材性能_素材ランク = 1
素材性能_属性 = 火
素材性能_プレゼント = 食べ物

@素材性能記述_おいしいキノコ
素材性能_カテゴリ = 贈答アイテム
素材性能_素材ランク = 1
素材性能_属性 = 土
素材性能_プレゼント = 食べ物

@素材性能記述_新鮮お刺し身
素材性能_カテゴリ = 贈答アイテム
素材性能_素材ランク = 2
素材性能_属性 = 水
素材性能_プレゼント = 食べ物

@素材性能記述_豪華海鮮丼
素材性能_カテゴリ = 贈答アイテム
素材性能_素材ランク = 3
素材性能_属性 = 水
素材性能_プレゼント = 食べ物

@素材性能記述_炭酸麦酒
素材性能_カテゴリ = 贈答アイテム
素材性能_素材ランク = 1
素材性能_属性 = 水
素材性能_プレゼント = 酒

@素材性能記述_普通の清酒
素材性能_カテゴリ = 贈答アイテム
素材性能_素材ランク = 2
素材性能_属性 = 水
素材性能_プレゼント = 酒

@素材性能記述_高級蒸留酒
素材性能_カテゴリ = 贈答アイテム
素材性能_素材ランク = 3
素材性能_属性 = 水
素材性能_プレゼント = 酒

@素材性能記述_御神酒
素材性能_カテゴリ = 贈答アイテム
素材性能_素材ランク = 3
素材性能_属性 = 光
素材性能_プレゼント = 酒

@素材性能記述_100年物のワイン
素材性能_カテゴリ = 贈答アイテム
素材性能_素材ランク = 4
素材性能_属性 = 闇
素材性能_プレゼント = 酒

@素材性能記述_渦琥珀
素材性能_カテゴリ = 贈答アイテム
素材性能_素材ランク = 1
素材性能_属性 = 土
素材性能_プレゼント = 宝石

@素材性能記述_オルディネシュタイン
素材性能_カテゴリ = 贈答アイテム
素材性能_素材ランク = 2
素材性能_属性 = 土
素材性能_プレゼント = 宝石

@素材性能記述_宝晶原石
素材性能_カテゴリ = 贈答アイテム
素材性能_素材ランク = 3
素材性能_属性 = 土
素材性能_プレゼント = 宝石

@素材性能記述_シルバーネックレス
素材性能_カテゴリ = 贈答アイテム
素材性能_素材ランク = 1
素材性能_属性 = 無
素材性能_プレゼント = アクセサリ

@素材性能記述_ゴールドバングル
素材性能_カテゴリ = 贈答アイテム
素材性能_素材ランク = 2
素材性能_属性 = 無
素材性能_プレゼント = アクセサリ

@素材性能記述_プラチナリング
素材性能_カテゴリ = 贈答アイテム
素材性能_素材ランク = 3
素材性能_属性 = 無
素材性能_プレゼント = アクセサリ

@素材性能記述_ハンカチ
素材性能_カテゴリ = 贈答アイテム
素材性能_素材ランク = 1
素材性能_属性 = 無
素材性能_プレゼント = 実用品

@素材性能記述_羽根ペン
素材性能_カテゴリ = 贈答アイテム
素材性能_素材ランク = 2
素材性能_属性 = 風
素材性能_プレゼント = 実用品

@素材性能記述_Ｅマッサージャ
素材性能_カテゴリ = 贈答アイテム
素材性能_素材ランク = 3
素材性能_属性 = 無
素材性能_プレゼント = 実用品

@素材性能記述_ありふれた娯楽本
素材性能_カテゴリ = 贈答アイテム
素材性能_素材ランク = 1
素材性能_属性 = 無
素材性能_プレゼント = 本

@素材性能記述_流行りの小説本
素材性能_カテゴリ = 贈答アイテム
素材性能_素材ランク = 2
素材性能_属性 = 無
素材性能_プレゼント = 本

@素材性能記述_入手困難な名著
素材性能_カテゴリ = 贈答アイテム
素材性能_素材ランク = 3
素材性能_属性 = 無
素材性能_プレゼント = 本

@素材性能記述_一輪挿しの花
素材性能_カテゴリ = 贈答アイテム
素材性能_素材ランク = 1
素材性能_属性 = 土
素材性能_プレゼント = 花

@素材性能記述_フラワーバスケット
素材性能_カテゴリ = 贈答アイテム
素材性能_素材ランク = 2
素材性能_属性 = 土
素材性能_プレゼント = 花

@素材性能記述_大きな花束
素材性能_カテゴリ = 贈答アイテム
素材性能_素材ランク = 3
素材性能_属性 = 土
素材性能_プレゼント = 花



