;--------------------------------------------------
;ダンジョン探索中に条件を満たしていた時表示される文章
;--------------------------------------------------
;・使い方
;「XXXX」をキャラクター番号に置換し、それぞれの関数に処理を入れる
;--------------------------------------------------

;--------------------------------------------------
;「仲間と会話」ボタン押下時
;簡単に何度も見られるので、条件分岐やランダム化で複数パターンの登録を推奨
;--------------------------------------------------
@KOJO_DUNGEON_仲間と会話_XXXX
CALL 口上変数初期化
LOCAL = FINDCHARA(NO, XXXX)
LOCAL:1 = キャラ隊列検索(LOCAL)

KSTR:(K++) = 

CALL メッセージ欄表示用関数(@"探索用_{LOCAL:1}_顔", CALLNAME:LOCAL,,0)

;--------------------------------------------------
;固有スキル発動時
;「（キャラ名）の（アビ名）！」よりも前に表示される
;汎用アビや衣装アビだと発動しないので注意
;--------------------------------------------------
@KOJO_DUNGEON_固有アビ発動時_XXXX_YYYY
;YYYYを固有アビ関数の「@固有アビ_XXXX_YYYY」のYYYYと同じに変更する
CALL 口上変数初期化
LOCAL = FINDCHARA(NO, XXXX)
LOCAL:1 = キャラ隊列検索(LOCAL)

KSTR:(K++) = 

CALL メッセージ欄表示用関数(@"探索用_{LOCAL:1}_顔", CALLNAME:LOCAL)

;--------------------------------------------------
;奥義発動時
;「（キャラ名）の奥義発動！　（奥義名）！」よりも前に表示される
;--------------------------------------------------
@KOJO_DUNGEON_奥義発動時_XXXX
CALL 口上変数初期化
LOCAL = FINDCHARA(NO, XXXX)
LOCAL:1 = キャラ隊列検索(LOCAL)

KSTR:(K++) = 

CALL メッセージ欄表示用関数(@"探索用_{LOCAL:1}_顔", CALLNAME:LOCAL)

;--------------------------------------------------
;チェンバースト発動時
;「チェインバースト！」（フルチェイン！）よりも前に表示される
;該当キャラが起点になった時（＝ターンで最初に奥義を撃った）にしか呼ばれないので注意
;--------------------------------------------------
@KOJO_DUNGEON_チェンバ発動時_XXXX
CALL 口上変数初期化
LOCAL = FINDCHARA(NO, XXXX)
LOCAL:1 = キャラ隊列検索(LOCAL)

KSTR:(K++) = 

;掛け合いの作り方
;ZZZZ = 掛け合い相手のCSVに記載してあるキャラ番号とする
;
; LOCAL:2 = FINDCHARA(NO, ZZZZ)
; IF キャラ隊列検索(LOCAL:2) > -1
; 	KSTR:(K++) = （口上キャラのセリフ）
;
; 	NSTR:(K++) = ++++_%CALLNAME:(LOCAL:2)%
; 	切り替え顔グラリソース:0 = 探索用_{キャラ隊列検索(LOCAL:2)}_顔
;
; 	KSTR:(K++) = （掛け合い相手のセリフ）
; ENDIF
;と記述すると下に一個、掛け合い相手の顔グラと名前が表示されたメッセージ欄を増やせるので、そこで掛け合いを行う
;複数個メッセージ欄を増やす場合、切り替え顔グラリソース:1、切り替え顔グラリソース:2のように配列番号を１つずつ増やすこと

CALL メッセージ欄表示用関数(@"探索用_{LOCAL:1}_顔", CALLNAME:LOCAL)

;--------------------------------------------------
;戦闘勝利時
;ルピやEXPの取得よりも前に表示される
;--------------------------------------------------
@KOJO_DUNGEON_戦闘勝利時_XXXX
CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化
LOCAL = FINDCHARA(NO, XXXX)
LOCAL:1 = キャラ隊列検索(LOCAL)

KSTR:(K++) = 

CALL メッセージ欄表示用関数(@"探索用_{LOCAL:1}_顔", CALLNAME:LOCAL)

;--------------------------------------------------
;全滅時
;--------------------------------------------------
@KOJO_DUNGEON_全滅時_XXXX
CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化
LOCAL = FINDCHARA(NO, XXXX)
LOCAL:1 = キャラ隊列検索(LOCAL)

KSTR:(K++) = 

CALL メッセージ欄表示用関数(@"探索用_{LOCAL:1}_顔", CALLNAME:LOCAL)

;--------------------------------------------------
;逃走時
;--------------------------------------------------
@KOJO_DUNGEON_逃走時_XXXX
CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化
LOCAL = FINDCHARA(NO, XXXX)
LOCAL:1 = キャラ隊列検索(LOCAL)

KSTR:(K++) = 

CALL メッセージ欄表示用関数(@"探索用_{LOCAL:1}_顔", CALLNAME:LOCAL)
